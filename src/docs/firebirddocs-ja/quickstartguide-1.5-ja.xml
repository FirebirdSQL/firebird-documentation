<?xml version="1.0" encoding="UTF-8"?>
<!-- For standalone validation, uncomment the following DOCTYPE declaration. -->
<!-- DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"> "file:../docs/docbookx/docbookx.dtd" -->
<article id="qsg15-ja" lang="ja">
  <articleinfo>
    <title>Firebird 1.5 クイック・スタート・ガイド</title>

    <titleabbrev>Firebird 1.5 クイック・スタート</titleabbrev>

    <authorgroup>
      <corpauthor>IBPhoenix Editors</corpauthor>

      <othercredit lang="en">
        <surname>Firebird Project</surname>

        <contrib>Updates, additions</contrib>
      </othercredit>
    </authorgroup>

    <othercredit class="translator">
      <firstname>Tsutomu</firstname>

      <surname>Hayashi</surname>

      <contrib>Translation into Japanese</contrib>
    </othercredit>

    <edition>5 May 2006 – Document version 2.2.1-ja</edition>
  </articleinfo>

  <section id="qsg15-about-ja">
    <title>クイック・スタート・ガイドについて</title>

    <!--TODO : did Paul Reeves fix the Control Panel Applet?-->

    <!--TODO : any more changes in 1.5.3 that should make it into the QSG?-->

    <para>このガイドは全くの初心者が、Firebirdのバイナリキットを利用してクイッ
    ク・スタートするための少々のエッセンスをまとめたものです。サーバー上
    での実行に関しての詳細な設定やチューニングについては4-6節で紹介している<citetitle> Using
    Firebird</citetitle>マニュアル（<ulink
    url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_cd">
    IBPhoenix社監修のCD所収)</ulink>を参照して下さい。</para>

    <para><citetitle>Firebird クイック・スタート・ガイド</citetitle>は、<ulink
    url="http://www.ibphoenix.com"> IBPhoenix社</ulink>が販売する<citetitle>Using
    Firebird</citetitle>マニュアル の Chapter 1 として記述されたのがその始まりです。後になって分離されてインターネット上
    で公開されることになりました。2004年6月に、IBPhoenix社は本ガイドをFirebird Project に寄贈したのです。</para>

    <important>
      <para>本書をお読みなる前に、お使いのFirebirdのバージョンが本ガイドと一致する
      かどうかお確かめ下さい。本ガイドはバージョン1.5又はそれ以上について記載されて います。もしもお使いのFirebirdのバージョンが1.0,
      1.0.2, 又は1.0.3である場合は、 適切なバージョンのクイック・スタート・ガイドを次のURLから入手して下さい。</para>

      <para><ulink
      url="http://www.firebirdsql.org/manual/">http://www.firebirdsql.org/manual/</ulink>
      (HTML)</para>

      <para>又は</para>

      <para><ulink
      url="http://www.firebirdsql.org/pdfmanual/">http://www.firebirdsql.org/pdfmanual/</ulink>
      (PDF).</para>
    </important>
  </section>

  <section id="qsg15-kit-contents-ja">
    <title><indexterm class="singular" scope="local">
        <primary>インストール</primary>

        <secondary>バイナリキットの内容</secondary>
      </indexterm>バイナリキットには何が含まれているのか?</title>

    <para>全てのバイナリキットにはFirebirdサーバーのインストールに必要なものは全て 含まれています:</para>

    <itemizedlist>
      <listitem>
        <para>Firebirdサーバー</para>
      </listitem>

      <listitem>
        <para>サーバーマシン上に配置されるクライアントライブラリ</para>
      </listitem>

      <listitem>
        <para>コマンドラインツール群</para>
      </listitem>

      <listitem>
        <para>標準ユーザー定義関数ライブラリ群</para>
      </listitem>

      <listitem>
        <para>サンプルデータベース</para>
      </listitem>

      <listitem>
        <para>C言語ヘッダファイル（初心者には必要無いものですが)</para>
      </listitem>

      <listitem>
        <para>リリースノート - 必ずお読み下さい</para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="qsg15-classic-or-super-ja">
    <title><indexterm class="singular" scope="local">
        <primary>インストール</primary>

        <secondary>Classicサーバー と Superサーバー</secondary>
      </indexterm><indexterm class="singular" scope="local">
        <primary>Classicサーバー</primary>
      </indexterm><indexterm class="singular" scope="local">
        <primary>Superサーバー</primary>
      </indexterm>Classicサーバー か Superサーバー か?</title>

    <para>Firebirdは2種類があり、<firstterm>アーキテクチャ</firstterm>から
    ClassicサーバーとSuperサーバーと呼ばれています。どちらをインストールす べきでしょうか?
    それは、読者のおかれている状況によっています。両者の重要 な相違点について、以下に簡単な概要をしめします。</para>

    <table>
      <title>Firebird 1.5 Classicサーバー vs. Superサーバー</title>

      <tgroup cols="2">
        <colspec colname="col-classic" colwidth="*" />

        <colspec colname="col-super" colwidth="*" />

        <thead>
          <row>
            <entry align="center"><para>Classicサーバー</para></entry>

            <entry align="center"><para>Superサーバー</para></entry>
          </row>
        </thead>

        <tbody>
          <row valign="top">
            <entry><para>On Linux: 完全に成熟している</para><para>On Windows: version
            1.5.1 から完全に 成熟している</para><!--This statement based on fb-devel thread 24 Sep 2005.--></entry>

            <entry><para>Windows と Linuxの両方で完全に成熟している.</para></entry>
          </row>

          <row valign="top">
            <entry><para>クライアントからの接続毎に独立したプロセスを生成し、各プロセスは独立したキャッシュ
            を保持します。接続数が少なければリソースの消費は少なくなります。</para></entry>

            <entry><!--As per correction Alex Peshkov on admin list 8 Dec 2005.--><para>
            全接続に対して単一のサーバープロセスが対応します、リクエストの処理はスレッドにて行われます。
            同時接続数が増加した場合により効果的です。 </para></entry>
          </row>

          <row valign="top">
            <entry><para> Linux上のローカル接続では、高速なダイレクトI/Oによるデータベースファイルへのアクセスが行えます。
            Winsows上では、ローカル接続はネットワーク・スタイルで行わなくてはならず、 <systemitem
            class="systemname">localhost</systemitem>を使用して接続を行います。
            </para></entry>

            <entry><para> Linux上では、ローカル接続はネットワークスタイルで行われ、<systemitem
            class="systemname"> localhost</systemitem>を（暗黙的にも）使用します。
            Windows上では、オプションとしてダイレクトなローカル接続を行うことが可能ですが、
            Linux上の<quote>Classic</quote>サーバーほど高速ではなく、また安全性も多少犠牲になります。
            </para></entry>
          </row>

          <row valign="top">
            <entry><para>1.5: <firstterm>Services
            Manager</firstterm>は部分的に実装されていますので、
            バックアップ/リストアやデータベースのシャットダウン等をネットワーク越しに行うことが出来ます。
            その他の管理作業はFirebirdと一緒に提供されている各クライアントツール群(小さな実行ファイル)
            を利用して行います。</para><para> 1.5.1以上:完全版の Service Manager が実装されています。
            </para><!--This statement based on 1.5 and 1.5.1 relnotes.--></entry>

            <entry><para>完全版の <firstterm>Services Manager</firstterm> (on
            Windows and Linux) が提供されています。全ての管理作業（バックアップ/リストア、
            データベースのシャットダウン、ユーザー管理、統計処理、他）をプログラム上で行うことが出来ます。 ネットワーク越しにService
            Managerに接続し、これらの処理をリモートで行うことが出来ます。 </para></entry>
          </row>

          <row valign="top">
            <entry><para>SMP (symmetrical multi-processor)
            サポート。依存関係のない複数のそれほど多くない接続が 実行される場合にベターなパフォーマンスを発揮します。
            </para></entry>

            <entry><para>SMP サポートは提供されません。マルチ・プロセッサのWindowsマシン上では、OSがプロセスを
            CPU間で移動するためにパフォーマンスが劇的に低下する可能性があります。これを防ぐためには、
            <parameter>CpuAffinityMask</parameter>パラメーターを<filename>firebird.conf</filename>設定ファイル中で
            設定して下さい。</para></entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <para>以上のように、どちらがより優れているとは言えない状態です。驚くほどのことではありませんが、もしいずれかの
    アーキテクチャーが全戦線に渡って勝利を収めているなら、両方のアーキテクチャーを継続することは無いでしょう。</para>

    <para>もし、どちらを選ぶべきか迷った場合（これらの技術的な話題に閉口しているとか）には、以下のルールを使用して下さい。</para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>Windows では、Superサーバーを選んで下さい</para>
      </listitem>

      <listitem>
        <para>Linux では、どちらを選んでもかまいません。ほとんどの環境で、パフォーマンスの違いに気づくことは無いでしょう。</para>
      </listitem>
    </itemizedlist>

    <para>注意：後になってから他のアーキテクチャーへ移行することはいつでも可能です。アプリケーションやデータベースには影響を
    与えることはありません。（ClassicサーバーのService Managerがサポートしていない機能や不完全な機能を使用している
    場合を除いて）</para>

    <para>Linux版Superサーバーは、<literal>FirebirdSS</literal>で始まるパッケージをダウンロードして下さい。
    Classicサーバーは<literal>FirebirdCS</literal>で始まるパッケージです。
    Windows版では、インストールパッケージに両方が含まれていますので、インストール・プロセス中に選択することになります。</para>

    <note>
      <para>まだ全てをお話ししたわけではありませんでした。Firebirdには3つ目の選択肢があります： <firstterm>Embedded
      サーバー</firstterm>ですが、これは完全に違うもので、典型的なクライアント-サーバー環境向けでは
      ありません。詳細についてはリリースノートをご覧下さい。</para>
    </note>
  </section>

  <section id="qsg15-disk-locations-ja">
    <title><indexterm>
        <primary>インストール先</primary>
      </indexterm>インストール先の既定値</title>

    <para>以下の表ではWindowsとLinuxへのデフォルトのインストール先についての詳細を示します</para>

    <para>v.1.5から開始された大幅なコードベースの改訂によって、InterBase由来の古いハード・リンクは取り除かれ、
    多くの主要なコンポーネントの名前が変更されました。結果として、Firebird 1.5はInterBase®サーバーがインストール
    されている環境へもインストールすることが出来るようになりました。（両方のサーバーが同じTCP/IPのポートを開いて
    いないことが前提ですが）この件については、Firebirdと一緒にインストールされるリリースノートの <citetitle>Configuring
    the port service</citetitle>をご覧下さい。リリースノートは <filename
    class="directory">doc</filename>にインストールされています。</para>

    <table frame="all" id="qsg15-tbl-firebird-components-ja"
           xreflabel="Firebird installation components table">
      <title>Firebird 1.5 インストールされるコンポーネント</title>

      <tgroup cols="4">
        <colspec align="left" colname="col-platform" colwidth="2*" />

        <colspec align="left" colname="col-component" colwidth="3*" />

        <colspec align="left" colname="col-filename" colwidth="3*" />

        <colspec align="left" colname="col-location" colwidth="3*" />

        <thead>
          <row>
            <entry><para>プラットフォーム</para></entry>

            <entry><para>コンポーネント</para></entry>

            <entry><para>ファイル名</para></entry>

            <entry><para>既定のインストール先</para></entry>
          </row>
        </thead>

        <tbody valign="top">
          <row>
            <entry morerows="5"><para>32-bit and 64-bit
            Windows</para><para>(Windows 95, 98, ME, NT, 2000, XP,
            ...)</para></entry>

            <entry><para>インストール先ディレクトリ</para><para>(以降は
            <varname>&lt;InstallDir&gt;</varname>と呼びます)</para></entry>

            <entry></entry>

            <entry><para><filename class="directory">C:\Program
            Files\Firebird\Firebird_1_5</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebird server</para></entry>

            <entry><para><filename>fbserver.exe</filename> (SS) or
            <filename>fb_inet_server.exe</filename> (CS)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para></entry>
          </row>

          <row>
            <entry><para>コマンドライン・ツール</para></entry>

            <entry><para><filename>gbak.exe</filename>,
            <filename>gfix.exe</filename>, <filename>gstat.exe</filename>,
            etc.</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para></entry>
          </row>

          <row>
            <entry><para>サンプル・データベース</para></entry>

            <entry><para><filename>employee.fdb</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\examples</filename></para></entry>
          </row>

          <row>
            <entry><para>ユーザー定義関数(UDF)ライブラリ</para></entry>

            <entry><para><filename class="libraryfile">ib_udf.dll</filename>
            &amp; <filename
            class="libraryfile">fbudf.dll</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\UDF</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebirdクライアント</para></entry>

            <entry><para><filename
            class="libraryfile">fbclient.dll</filename></para><para>(with an
            optional <filename class="libraryfile">gds32.dll</filename>, to
            support legacy apps)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para><para>(with
            an optional copy in the Windows System dir – see note below
            table)</para></entry>
          </row>

          <row>
            <entry morerows="5"><para>Linux 及びその他の利用可能な UNIX システム
            </para></entry>

            <entry><para>インストール先ディレクトリ</para><para>(以降は
            <varname>&lt;InstallDir&gt;</varname>と呼びます)</para></entry>

            <entry></entry>

            <entry><para><filename
            class="directory">/opt/firebird</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebirdサーバー</para></entry>

            <entry><para><filename>fbserver</filename> (SS) or
            <filename>fb_inet_server</filename> (CS)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/bin</filename></para></entry>
          </row>

          <row>
            <entry><para>コマンドライン・ツール</para></entry>

            <entry><para><filename>gbak</filename>, <filename>gfix</filename>,
            <filename>gstat</filename>, etc.</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/bin</filename></para></entry>
          </row>

          <row>
            <entry><para>サンプル・データベース</para></entry>

            <entry><para><filename>employee.fdb</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/examples</filename></para></entry>
          </row>

          <row>
            <entry><para>UDFライブラリ</para></entry>

            <entry><para><filename class="libraryfile">ib_udf.so</filename>,
            <filename class="libraryfile">fbudf.so</filename> </para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/UDF</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebirdクライアント</para></entry>

            <entry><para><filename
            class="libraryfile">libfbclient.so.1.5.<varname>n</varname></filename>
            (binary); <filename class="symlink">libfbclient.so.1</filename>,
            <filename class="symlink">libfbclient.so</filename>
            (symlinks)</para><para>Legacy <filename
            class="symlink">libgds*</filename> symlinks are also
            installed.</para></entry>

            <entry><para><filename
            class="directory">/usr/lib</filename></para><para>(actually, the
            real stuff is in <filename
            class="directory">&lt;InstallDir&gt;/lib</filename>, but you
            should use the links in <filename
            class="directory">/usr/lib</filename>)</para></entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <note>
      <para>Windowsのシステム・ディレクトリについて、正確なパスはWindowsのバージョンに依拠しています。
      通常は以下のディレクトリとなります:</para>

      <itemizedlist spacing="compact">
        <listitem>
          <para>for Windows 95/98/ME: <filename
          class="directory">C:\Windows\System</filename></para>
        </listitem>

        <listitem>
          <para>for Windows NT/2000: <filename
          class="directory">C:\WINNT\System32</filename></para>
        </listitem>

        <listitem>
          <para>for Windows XP: <filename
          class="directory">C:\Windows\System32</filename></para>
        </listitem>
      </itemizedlist>
    </note>
  </section>

  <section id="qsg15-installing-ja">
    <title><indexterm>
        <primary>インストール</primary>
      </indexterm>Firebirdのインストール</title>

    <section id="qsg15-installing-server-ja">
      <title><indexterm>
          <primary>インストール</primary>

          <secondary>サーバー</secondary>
        </indexterm>Firebirdサーバーのインストール</title>

      <section>
        <title><indexterm>
            <primary>インストール</primary>

            <secondary>ドライバー</secondary>
          </indexterm>ドライバーのインストール</title>

        <para>Firebirdサーバー、また作成するデータベースや接続するデータベースは、全て
        ホストマシンに物理的に接続されたハードディスク上に配置して下さい。サーバーのコンポーネントや
        データベースを共有ファイルシステムやネットワークファイルシステム上に配置することは出来ません。</para>

        <note>
          <para>CD-ROM上に読み取り専用データベースを配置することは出来ますが、FirebirdサーバーをCD-ROMから
          実行することは出来ません。</para>
        </note>
      </section>

      <section>
        <title><indexterm>
            <primary>インストール</primary>

            <secondary>スクリプトとプログラム</secondary>
          </indexterm>スクリプトとプログラムのインストール</title>

        <para>Firebirdをファイルのコピーによってインストールすることは可能です、例えば
        スナップショット・ビルドのファイルを<quote>untrar</quote>することや、WinZipで <filename
        class="extension">.zip</filename>ファイルを解凍することですが、しかし、
        初めてFirebirdをインストールする際には配布されているリリースキットを使用する
        ことを強くお勧めします。Windows用のインストーラー、Linux用の<application>rpm</application>
        (<application><citetitle>RPM Package Manager</citetitle></application>
        元々は <application><citetitle>RedHat Package
        Manager</citetitle></application>)プログラム
        、その他のPOSIXプラットフォーム用の公式<filename class="extension">.tar.gz</filename>
        ファイルはいくつかの必須のセットアップ処理を実行します。以下の手順に従って作業をすれば、
        他にすることは特にありません。後は、ログインするだけです。</para>

        <section>
          <title>Windowsプラットフォーム</title>

          <para>FirebirdのインストーラーではSuperサーバーとClassicサーバーのどちらを
          インストールするか選択しなくてはなりません。前述したように、両者の違いを
          理解した上でClassicを選択するのでなければ、Superサーバーを選んで下さい。</para>

          <para>Windows95/98/MEにFirebirdをインストールする場合には、コントロールパネル・アプレットの
          インストール・オプションの<emphasis role="bold">チェックを外して下さい</emphasis>。これらの
          プラットフォーム上では、コンパネ・アプレットは動作しません。本ガイド中で、この場合に
          利用可能なアプレットについて後述します。</para>

          <para>サーバー・プラットフォーム、Windows NT/2000/XP、においてはFirebirdサービスがインストール完了後
          に実行されます。次回の起動時には、自動的にサービスが開始されるようになっています。</para>

          <para><indexterm>
              <primary>ガーディアン</primary>
            </indexterm> Windowsの非サーバー・プラットフォーム、Windows95/98/ME、では、サービスがサポート
          されていません。そのため、インストーラーはFirebirdサーバーをアプリケーションモードで
          実行します、その際サーバー・アプリケーションはガーディアンとして知られているアプリケーション
          によって保護されます。何らかの理由でサーバー・アプリケーションが異常終了した場合には、
          ガーディアンがサーバー・アプリケーションを再起動します。</para>
        </section>

        <section>
          <title>Posixプラットフォーム</title>

          <para>全ての場合において、これからインストールしようと考えている当該のバージョンのFirebirdの
          リリースノートをお読み下さい。リリースを繰り返して多くのバージョンが存在しているかもしれ
          ません、特にオープンソース界ではこの傾向は顕著です。可能であれば、各バージョンのFirebird
          の開発者達は、知っておくべき事をドキュメントかしているはずです。</para>

          <tip>
            <para>もしもリリースノートがインストール・キット中に見あたらない場合には、Firebirdプロジェクトの
            webサイト<ulink
            url="http://firebird.sourceforge.net">http://firebird.sourceforge.net</ulink>の<ulink
            url="http://firebird.sourceforge.net/index.php?op=files">Downloads
            page</ulink>へ戻って、そこからリリースノートをダウンロードして下さい。</para>
          </tip>

          <para>もしも<application>rpm</application>でのインストールをサポートしているLinuxディストリビューション
          を使用しているのであれば、<application>RPM Package
          Manager</application>を使用して各プラットフォーム
          に適切なドキュメントを入手して下さい。ほとんどのディストリビューションで、コマンドライン・シェルまたは
          GUIインターフェースによるインストールを選択出来ると思います。</para>

          <para><application>rpm</application>が動作しないLinuxディストリビューションや、各種にUNIXシステムでは
          <filename class="extension">.tar.gz</filename>パッケージを使用して下さい。詳細については
          リリースノートをご覧下さい。</para>

          <para>シェル・スクリプトが提供されていますが、希なケースでは、リリースノートにおいてスクリプトの修正を
          何点か指示している場合があるかも知れません。</para>
        </section>
      </section>
    </section>

    <section id="qsg15-installing-testing-ja">
      <title><indexterm>
          <primary>テスト</primary>
        </indexterm>インストール後のテスト</title>

      <para>手順通りに事が運べば、インストールの終了後にサーバー上でFirebirdサーバープロセスが実行されます。
      サーバーを再起動することなく、自動的にスタートするようになっています。</para>

      <para>ここまでくれば、TCP/IPプロトコルを使用して（推奨）Firebirdのクライアント・サーバー・ネットワークを
      利用できるようになりました。</para>

      <note>
        <para>NetBEUIプロトコルを全てのWindows環境で利用するための情報については、<citetitle>Using
        Firebird</citetitle> manualの Chapter 6: <citetitle>Network
        Configuration</citetitle>をご覧下さい。</para>
      </note>

      <warning>
        <para>IPX/SPXネットワークはFirebirdではサポートされません。</para>
      </warning>

      <section>
        <title><indexterm>
            <primary>Ping</primary>
          </indexterm>サーバーへのPing</title>

        <para>通常、インストールが完了した際には一番最初にPingをサーバーにうとうと思うものです。そうすることによって、
        クライアントマシンがサーバーへ接続することが本当に出来るかどうかを実際に確認出来るからです。例えば、
        クライアントからアクセス可能なサーバーのIPアドレスが 192.13.14.1だったとしましょう。コマンドシェルから
        次のコマンドを実行し下さい</para>

        <blockquote>
          <para><command>ping 192.13.14.1</command></para>
        </blockquote>

        <para>実際のサーバーのIPアドレスとこの例のIPアドレスを入れ替えて下さい。</para>

        <warning>
          <para>タイムアウトが表示された場合、<citetitle>Using Firebird</citetitle> manual –
          Chapter 6: <citetitle>Network Configuration</citetitle>、Chapter 7:
          <citetitle>Troubleshooting
          Connections</citetitle>や、その他の事項を参照して下さい。</para>
        </warning>

        <para>注意：ローカルマシンからサーバーへ接続しようとしている場合、 もしサーバーと同一マシン上でクライアントが動作しているのであれば
        仮想TCP/IPループバックサーバーを使ってPINGを打つことが出来ます</para>

        <blockquote>
          <para><command>ping localhost</command> –or– <command>ping
          127.0.0.1</command></para>
        </blockquote>
      </section>

      <section>
        <title><indexterm>
            <primary>サーバーのチェック</primary>
          </indexterm>Firebirdサーバーが起動しているかどうかのチェック</title>

        <para>Windows NT4、2000、XP上では、Firebirdサーバーはインストール後に、
        サービスとして起動するようになっています</para>

        <section>
          <title>Windows NT4, 2000 and XP</title>

          <para>次のコントロールパネルを開きます -&gt; Services (NT) or Control Panel -&gt;
          Administrative Tools -&gt; Services (2000, XP).</para>

          <para><indexterm>
              <primary>サービス (Windows)</primary>
            </indexterm>この図ではWindows2000上のサービス・アプレットが表示されています。
          Windowsサーバーや他のバージョンのものとは見え方が少し違うかもしれません</para>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="images/services.png"
                         format="PNG" />
            </imageobject>
          </mediaobject>

          <para><indexterm>
              <primary>ガーディアン</primary>
            </indexterm>もし、ガーディアンが起動していたら（スクリーンショットの上部を見て下さい）、
          バージョンの違いによって名前が違っているかも知れません。</para>

          <note>
            <para>Windows2000、XP上では、ガーディアンは便利ではありますが必須ではありません。
            なぜならこの2つのOSはサービスを監視して必要な時に再起動する機能を持っているからです。
            他のプラットフォームではガーディアンを起動しておくことが推奨されます。何かの理由で
            サーバーが停止するようなことがあった場合に、SYSDBAが手動で再起動できないような状況 では特にそうです。</para>
          </note>
        </section>

        <section>
          <title>Windows 9x or ME</title>

          <para><indexterm>
              <primary>Guardian</primary>
            </indexterm>Windows9xやMEでは、Firebirdサーバーはアプリケーションとして起動します。
          サーバープロセスはガーディアンによって監視されています。ガーディアンのアイコンがタスクトレイ
          にグリーンのアイコンで表示されているはずです。もし、このアイコンが点滅していたり赤色で
          表示されているとすれば、ガーディアンがサーバーを起動中であるか又は起動に失敗したことを 示しています</para>

          <para>インストールキットを利用してインストールを行った場合でも、自動的にガーディアンと
          Firebirdサーバーが起動しない時には、以下の手順に従って手動で設定をして下さい</para>

          <orderedlist>
            <listitem>
              <para>ガーディアン・プログラム(<filename>fbguard.exe</filename>)の実行ファイルを配置して、
              ショートカットを作成します。それをスタートメニューのスタートアップフォルダに入れて下さい。</para>
            </listitem>

            <listitem>
              <para>ショートカットのプロパティ・ダイアログを開いて、コマンドライン・フィールドへ移ります</para>
            </listitem>

            <listitem>
              <para>コマンドラインを以下のように変更して下さい。</para>

              <blockquote>
                <para><literal><command>fbguard.exe -a</command></literal>
                (for スーパーサーバー)</para>

                <para><literal><command>fbguard.exe -c</command></literal>
                (for Classicサーバ)</para>
              </blockquote>
            </listitem>

            <listitem>
              <para>プロパティ・ダイアログを閉じて編集を保存します</para>
            </listitem>

            <listitem>
              <para>ショートカットをダブルクリックしてガーディアンを開始します。ガーディアンは
              <filename>fbserver.exe</filename>又は<filename>fb_inet_server.exe</filename>を自動的に
              開始します</para>
            </listitem>
          </orderedlist>

          <para>ガーディアンは次回Windws 9x/MEの起動時に、自動的に開始されます</para>

          <para>別の方法として、コントロールパネルのアプレットを使用して、Firebirdサーバーを
          起動/停止させることも出来ます</para>
        </section>

        <section>
          <title><indexterm>
              <primary>コントロールパネル・アプレット</primary>
            </indexterm>Windows コントロールパネル・アプレット</title>

          <para>バージョン1.0.3から、Firebirdの配布パッケージにコントロールパネル・アプレットが
          含まれるようになっています。アプレットは必須の構成要素ではありませんが、サーバーの起動/停止用途
          では便利に使えるので提供されています。</para>

          <mediaobject>
            <imageobject>
              <imagedata align="center"
                         fileref="images/FbServerControl-1.5.png" format="PNG" />
            </imageobject>
          </mediaobject>

          <para>残念ながら、バンドルされているアプレットはWindows NT/2000/XPのみでしか動作しません。 Windows
          9x/MEをお使いの場合、便利なアプレット・プログラムが以下のwebサイトで配布されています</para>

          <blockquote>
            <para><ulink
            url="http://www.achim-kalwa.de/fbcc.phtml">http://www.achim-kalwa.de/fbcc.phtml</ulink></para>
          </blockquote>

          <para>Firebird Control Center <ulink
          url="http://www.achim-kalwa.de/dl/fbcc-0.2.6.exe">fbcc-0.2.6.exe</ulink>をダウンロードして下さい</para>

          <para>このアプレットは上で示したスクリーンショットとは多少違っていますが、 機能的には同等のものです</para>
        </section>

        <section>
          <title>Posix サーバー</title>

          <para><indexterm>
              <primary>top コマンド (Linux)</primary>
            </indexterm><indexterm>
              <primary>ガーディアン</primary>
            </indexterm>コマンドシェルで <command>top</command> コマンドを使うと、プロセスの起動状態を
          インタラクティブに確認することが出来ます。Firebirdのスーパーサーバーが起動中であれば、次のプロセスを
          確認することが出来るでしょう
          <application><systemitem>fbguard</systemitem></application>。これは
          ガーディアン・プロセスです。さらに、<application><systemitem>fbserver</systemitem></application>の
          一つのメイン・プロセスとゼロ以上の子プロセスが起動しているでしょう</para>

          <para>For Classic サーバー
          版では、プロセス名は<application><systemitem>fb_inet_server</systemitem>
          </application>となっています。ネットワークコネクション毎にこのプロセスが一つ起動しています。
          一つもアクティブなコネクションが無い場合、又はダイレクト・ローカル・コネクションしかない場合、
          <application><systemitem>fb_inet_server</systemitem></application>はプロセス・リスト上に現れません</para>

          <para>次のスクリーンショットは、<application>top</application>
          コマンドの出力です。<application>grep
          </application>で、<literal>fb</literal>で始まるプロセスだけに限定してあります。</para>

          <screen>frodo:/inkomend/firebird # top -b -n1 | grep fb
 2587 firebird  24   0  1232 1232 1028 S  0.0  0.3   0:00.00 fbguard
 2588 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.04 fbserver
 2589 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2604 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2605 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.02 fbserver
 2606 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2607 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver</screen>

          <para><application>top</application>コマンドの代わりに、<command>ps
          -ax</command>コマンドや <command>ps
          -aux</command>コマンドを利用することも出来ます。もちろん、<application>grep</application>
          をパイプで繋いでも結構です</para>
        </section>
      </section>
    </section>

    <section id="qsg15-installing-other-ja">
      <title>その他の必要条件</title>

      <section>
        <title><indexterm>
            <primary>ネットワーク・アドレス</primary>
          </indexterm>サーバーのネットワーク・アドレス</title>

        <itemizedlist>
          <listitem>
            <para>管理されているネットワークであれば、サーバー用のIPアドレスをシステム管理者から取得して下さい</para>
          </listitem>

          <listitem>
            <para>クロスケーブルで接続した単純なネットワークに接続した2台のマシンであれば、
            どのIPアドレスを利用しても大丈夫です。(ただし127.0.0.1を除く。このIPアドレスはローカルループバック
            用に予約されています）もちろん、クライアントマシンで利用しているIPアドレスも使えません。
            ネットワークカードの<quote>native</quote>なIPアドレスを知っている場合、それらが違うものであれば、
            そのまま使っても構いません</para>
          </listitem>

          <listitem>
            <para>一台のマシン上にクライアントとサーバーの両方をインストールしたのであれば、
            ローカルループバック・アドレスを使って下さい。localhost 又は 127.0.0.1のIPアドレス になります。</para>
          </listitem>
        </itemizedlist>

        <note>
          <para>Windows上のスーパーサーバーには、TCP/IPのループバックを使用せずに、ダイレクト接続することが
          可能です。これはTCP/IP接続ではなく、スレッド・セーフではありません。コマンドラインツール
          (<application>gsec</application>, <application>gbak</application>
          etc.)の単体での使用は問題なく
          動作します。対照的に、ダイレクトなデーターベース接続は、Linux版のClassicサーバーでは、複数同時
          接続でも全く問題なく安全に動作します。</para>
        </note>
      </section>

      <section>
        <title><indexterm>
            <primary>ユーザー名</primary>

            <secondary>既定の</secondary>
          </indexterm><indexterm>
            <primary>パスワード</primary>

            <secondary>既定の</secondary>
          </indexterm>デフォルト・ユーザー名とパスワード</title>

        <para><indexterm>
            <primary>SYSDBA</primary>
          </indexterm>SYSDBAユーザーはサーバー上の全権限を保有しています。これはバージョン、OS、アーキテクチャー、
        インストール・プログラムによって、以下のいずれかの方法でインストールされます</para>

        <itemizedlist>
          <listitem>
            <para>SYSDBAユーザーが<literal>masterkey</literal>パスワード付でインストールされる
            (実際には、<literal>masterke</literal>: 8文字目より後の文字は無視されるので）</para>
          </listitem>

          <listitem>
            <para>インストール中にパスワードの入力を促される</para>
          </listitem>

          <listitem>
            <para>SYSDBA用にランダムなパスワードが生成され、<filename>/opt/firebird/SYSDBA.password</filename>
            に格納される</para>
          </listitem>
        </itemizedlist>

        <para>あなたのサーバーがインターネットに<emphasis>完全に</emphasis>曝されていて、パスワードが
        <literal>masterkey</literal>のままだったら、即座にコマンドライン・ユーティリティの<application>gsec</application>
        を使ってパスワードを変更しなくてはなりません</para>

        <section>
          <title><indexterm>
              <primary>パスワード</primary>

              <secondary>変更</secondary>
            </indexterm><indexterm>
              <primary>gsec</primary>
            </indexterm>SYSDBAユーザーのパスワード変更方法</title>

          <para>Firebird
          には、<application>gsec</application>と呼ばれるコマンドライン・ツールが付属しています。
          <application>gsec</application>を使ってユーザーアカウントの操作を行います</para>

          <important>
            <para>幾つかのFirebirdのインストールパッケージでは、システム上の管理者権限 (<systemitem
            class="username">root</systemitem> on Linux)がないと<application>gsec
            </application> を実行出来ない場合があります、あるいは、Firebirdサーバーのプロセスを実行しているユーザー
            出ない場合も同様です。Windowsサーバープラットフォームでは、通常の場合Power Userグループかそれ以上の
            権限で<application>gsec </application>を実行すれば大丈夫です</para>

            <para>もし、十分な権限があるにもかかわらず<application>gsec </application>の実行に失敗し、
            <quote><computeroutput>unavailable database - unable to open
            database</computeroutput></quote>というメッセージが表示された場合</para>

            <itemizedlist>
              <listitem>
                <para>Windows版のClassicサーバーを実行しているか、<parameter>-database</parameter>の引数を
                間違えている事が考えられます。あるいは、</para>
              </listitem>

              <listitem>
                <para>サーバーが全く起動していないことも考えられます。そうであった場合、 <link
                linkend="qsg15-installing-testing-ja"><citetitle>Testing your
                installation</citetitle></link>へ戻って、問題を修正して下さい</para>
              </listitem>
            </itemizedlist>
          </important>

          <para>SYSDBAのパスワードを<literal>icuryy4me</literal>に変更することにしたとしましょう</para>

          <procedure>
            <step>
              <para>サーバー上のコマンドシェルから、コマンドライン・ユーティリティのインストール位置へ
              ディレクトリを移動して下さい。<xref
              linkend="qsg15-tbl-firebird-components-ja" />を参考
              にしてその位置を探して下さい。</para>
            </step>

            <step>
              <para>次のコマンドを入力して下さい、Windows上のClassicサーバー
              を実行している場合は<emphasis>例外</emphasis>となります</para>

              <blockquote>
                <para><command>gsec -user sysdba -password
                masterkey</command></para>
              </blockquote>

              <para>Windows版のClassicサーバーの場合、<emphasis>必ず</emphasis>セキュリティ・データベース
              の位置を完全なネットワーク上の位置として指定して下さい</para>

              <blockquote>
                <para><command>gsec -user sysdba -password masterkey -database
                "localhost:C:\Program
                Files\Firebird\Firebird_1_5\security.fdb"</command>
                (パスは必要に応じて書き換えて下さい)</para>
              </blockquote>

              <note>
                <itemizedlist>
                  <listitem>
                    <para>Linux上では、<command>gsec</command>の代わりに<command>./gsec</command>として下さい。
                    そうしないと<quote>予期せぬ</quote> <application>gsec</application>
                    が起動されてしまう可能性 がある上、コマンドが見つからない可能性もあるからです</para>
                  </listitem>

                  <listitem>
                    <para>パスとファイル名は、Windows以外の全てのプラットフォームでは大文字小文字が区別されます。
                    パスワードは常に大文字小文字が区別されます</para>
                  </listitem>
                </itemizedlist>
              </note>

              <para>いずれのケースでも、<application>gsec</application>ユーティリティのシェル・プロンプト
              が表示されているはずです</para>

              <blockquote>
                <para><prompt>GSEC&gt;</prompt></para>
              </blockquote>
            </step>

            <step>
              <para>次のコマンドを実行して下さい</para>

              <blockquote>
                <para><userinput>modify sysdba -pw
                icuryy4me</userinput></para>
              </blockquote>
            </step>

            <step>
              <para><keycap>Enter</keycap>キーを押下して下さい。新しいパスワード
              <literal>icuryy4me</literal> が暗号化されてて保存されました。
              <literal>masterkey</literal> はもう使用できなくなっています</para>
            </step>

            <step>
              <para><application>gsec</application> のシェルを終了します</para>

              <blockquote>
                <para><userinput>quit</userinput></para>
              </blockquote>
            </step>
          </procedure>

          <note>
            <para>Firebirdはパスワードの8文字を越えた部分を無視するので、<literal>icuryy4m</literal>も
            <literal>icuryy4monkeys</literal>もパスワードとして通用します</para>
          </note>
        </section>
      </section>

      <section>
        <title><indexterm>
            <primary>管理ツール</primary>
          </indexterm>管理ツール</title>

        <para>Firebirdインストールパッケージには、GUIの管理ツールは含まれていません。コマンドライン・ツールは
        付属していますが、それらはFirebirdのインストール・ディレクトリの<filename
        class="directory">bin</filename> サブディレクトリに配置されています</para>

        <para>Windowsのクライアントマシンで利用可能な、様々な素晴らしいGUIツールは、
        たくさんありすぎてここでご紹介することは出来ません。幾つかのGUIツールはBorlandの
        Kylixで書かれていて、Linuxクライアントマシンで利用可能ですが、完成度はまちまちです</para>

        <para>以下のリンクを辿って下さい <ulink
        url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink>上の<ulink
        url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_contrib_download#ADM">Downloads
        &gt; Contributed &gt; Admin Tools
        page</ulink>。これらは全てオプションとなっています</para>

        <note>
          <para>WindowsクライアントからLinuxサーバーに接続することも出来るし、その逆もまた可能です</para>
        </note>
      </section>
    </section>

    <section id="qsg15-installing-client-ja">
      <title><indexterm class="singular" scope="local">
          <primary>インストール</primary>

          <secondary>クライアントのみ</secondary>
        </indexterm>クライアントのみのインストール</title>

      <para>リモートクライアントマシンはそれぞれクライアント・ライブラリを必要としています。 Posixクライアントでは <filename
      class="libraryfile">libfbclient.so</filename> 、Widnwosクライアント では
      <filename class="libraryfile">fbclient.dll</filename>
      となります。それぞれのクライアント・ライブラリ はFirebirdサーバーのバージョンと一致するようにします</para>

      <para>Firebirdのバージョン1.5以降では、バージョン1.0のライブラリ(<quote>古い</quote>InterBaseからの名称で)
      と同名で、クライアント・ライブラリの コピー又はシンボリックリンクを古いクライアント・ライブラリに依存したサードパーティの製品との
      交換性を保つためにインストールするようになっています</para>

      <para>その他、幾つかのファイルがクライアントのみのインストールで必要となっています</para>

      <section>
        <title>Windows</title>

        <para>現状では、Windowsクライアントへのクライアント・ライブラリのみをインストールする
        コンパクト・インスーラーは用意されていません。もし、Linuxやその他のPosixサーバー（あるいは
        他のWindowsサーバー)に接続するWindowsクライアントを用意することがあれば、サーバーマシンの
        Firebirdサーバーのバージョンに対応したWindows用のフル・インストーラーをダウンロードしなくては なりません。</para>

        <para>幸いにも、いったんインストーラーを入手すれば、Windowsのクライアント専用機へのインストール
        は大変簡単です。インストーラーを起動して、サーバーをインストールしたのと同じようにして、CLIENT ONLY
        オプションをメニューから選択すればOKです。</para>
      </section>

      <section>
        <title>Linux とその他の Posixクライアント</title>

        <para>同様に、Linuxクライアント用の小さな専用インストーラーは用意されていません。加えて、
        Posixの流儀のために、Linuxであったとしても、幾つかの固有の条件がファイルシステム上にあるため、
        全てのディストリビューション(*x)に対してFirebirdはクライアントのみのインストールオプションを提供 していません。</para>

        <para>ほとんどのLinuxの流儀のために、以下のプロシージャーがFirebirdのクライアントのみの
        インストールのために提供されています。<systemitem class="username">root</systemitem>として
        ログインして実行して下さい。</para>

        <procedure>
          <step>
            <para>Look for <filename
            class="libraryfile">libfbclient.so.1.<replaceable>m.n</replaceable></filename>
            (<replaceable>m.n</replaceable> being the minor plus patch version
            number) in <filename
            class="directory">/opt/firebird/lib</filename> on the server where
            Firebird server is installed. Copy it to <filename
            class="directory">/usr/lib</filename> on the client.</para>
          </step>

          <step>
            <para>Create chained symlinks using the following commands:</para>

            <blockquote>
              <para><command>ln -s
              /usr/lib/libfbclient.so.1.<replaceable>m.n</replaceable>
              /usr/lib/libfbclient.so.1</command></para>

              <para><command>ln -s /usr/lib/libfbclient.so.1
              /usr/lib/libfbclient.so</command></para>
            </blockquote>

            <para>replacing
            <varname><replaceable>1.m.n</replaceable></varname> with your
            version number, e.g. <literal>1.5.0</literal> or
            <literal>1.6.1</literal></para>

            <para>If you're running applications that expect the legacy
            libraries to be present, also create the following
            symlinks:</para>

            <blockquote>
              <para><command>ln -s /usr/lib/libfbclient.so
              /usr/lib/libgds.so.0</command></para>

              <para><command>ln -s /usr/lib/libfbclient.so
              /usr/lib/libgds.so</command></para>
            </blockquote>
          </step>

          <step>
            <para>Copy the <filename>firebird.msg</filename> file to <filename
            class="directory">/opt/firebird</filename></para>
          </step>

          <step>
            <para>In the system-wide default shell profile, or using
            <function>setenv()</function> from a shell, create the
            <envar>FIREBIRD</envar> environment variable and point it to
            <filename class="directory">/opt/firebird</filename>, to enable
            the API routines to locate the messages.</para>
          </step>
        </procedure>
      </section>
    </section>
  </section>

  <section id="qsg15-databases-ja">
    <title>データベース上での作業</title>

    <section id="qsg15-databases-connecting-ja">
      <title><indexterm>
          <primary>接続</primary>
        </indexterm><indexterm>
          <primary>データベース</primary>

          <secondary>接続</secondary>
        </indexterm><indexterm>
          <primary>サンプル・データベース</primary>
        </indexterm><indexterm>
          <primary>サンプル・データベース</primary>
        </indexterm><indexterm>
          <primary>データベース</primary>

          <secondary>サンプル・データベース</secondary>
        </indexterm>サンプル・データベースへの接続</title>

      <para>Firebirdのインストールディレクトリ中の<filename
      class="directory">examples</filename>
      に、<filename>employee.fdb</filename>というサンプル・データベースがあります。
      このデータベースを使って<quote>腕試し</quote>をしてみて下さい。</para>

      <section>
        <title><indexterm>
            <primary>サーバー名とパス名</primary>
          </indexterm>サーバー名とパス名</title>

        <para>サンプル・データベースを移動する場合には、サーバーマシンに物理的に接続されたハードディスク
        に配置されていることを確認して下さい。共有ディスクやネットワークドライブ、(Unixでは）SMB(samba)
        ファイルシステムでマウントされている場合動作しません。同じ事は、これからあなたが作成するデータベース についても言えます。</para>

        <para>TCP/IP接続に関して、2つの要素があります: サーバー名とディスク/ファイルシステムのパス名です
        これらは以下のように記述して下さい:</para>

        <itemizedlist>
          <listitem>
            <para>Linux サーバー:</para>

            <blockquote>
              <para>サーバー名:/ファイルシステムのパス名/データベースファイル名</para>
            </blockquote>

            <para>Linux とその他の Posix サーバーでの例:サーバー名<systemitem
            class="systemname">serverxyz</systemitem>:</para>

            <blockquote>
              <para><filename>serverxyz:/opt/interbase/examples/employee.fdb</filename></para>
            </blockquote>
          </listitem>

          <listitem>
            <para>Windows サーバー:</para>

            <blockquote>
              <para>サーバー名:ドライブレター:\ファイルシステムのパス名\データベースファイル名</para>
            </blockquote>

            <para>Windows での例:</para>

            <blockquote>
              <para><filename>serverxyz:C:\Program
              Files\Firebird\examples\employee.fdb</filename></para>
            </blockquote>
          </listitem>
        </itemizedlist>
      </section>

      <section>
        <title><indexterm>
            <primary>CONNECT ステートメント</primary>
          </indexterm><indexterm class="singular" scope="local">
            <primary>SQL</primary>

            <secondary>CONNECT ステートメント</secondary>
          </indexterm>CONNECT ステートメント</title>

        <para>Firebirdのデータベースに接続するためには、ユーザー名と正しいパスワードの組み合わせによる
        ユーザー認証が必要となります。<database class="name">SYSDBA</database>、<systemitem
        class="username"> root</systemitem>(Posixシステム上)又は<systemitem
        class="username">Administrator</systemitem>
        (Windowsシステム上で、Firebirdがこのユーザー権限で動作している場合）以外のユーザーは、データベース内の
        各オブジェクトに対するパーミッションも持っていないといけません。問題を簡単にするために、ここでは <database
        class="name">SYSDBA</database>ユーザーをパスワード<literal>masterkey</literal>で認証している
        ということにしましょう。</para>

        <section>
          <title><indexterm>
              <primary>isql</primary>

              <secondary>データベースへの接続</secondary>
            </indexterm><indexterm>
              <primary>データベース</primary>

              <secondary>接続</secondary>

              <tertiary>isql</tertiary>
            </indexterm><application>isql</application>の使い方</title>

          <para><application>isql</application>にはデータベースへの接続方法がいくつかあります。一つは、
          <application>isql</application>をシェルで起動する方法です。まずFirebirdのインストール先ディレクトリ
          の<filename
          class="directory">bin</filename>サブディレクトリへ移動して、プロンプトから<command>isql
          </command>コマンドをタイプして下さい（Linuxでは、<command>./isql</command>)
          [↵は<quote><keycap> エンターキー</keycap>を押下してください</quote>]:</para>

          <screen>C:\Program Files\Firebird\Firebird_1_5\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database
SQL&gt;CONNECT "C:\Program Files\Firebird\Firebird_1_5\examples\employee.fdb"↵
CON&gt;user 'SYSDBA' password 'masterkey';↵</screen>

          <important>
            <itemizedlist>
              <listitem>
                <para><application>isql</application>では、全てのSQL文はセミコロンで区切ります。
                <keycap>Enter</keycap>キーを押下しても、セミコロンがついていないと、isqlは文が
                次の行に続いていると判断して、プロンプトを<prompt>SQL&gt;</prompt>から
                <prompt>CON&gt;</prompt>に変更して表示します。この機能によって、長い文を複数の行に
                またがって記述することが出来るようになっています。<keycap>Enter</keycap>を押下した
                時に、もしセミコロンを忘れていたら、<prompt>CON&gt;</prompt>プロンプトの直後に
                セミコロンを打って、再度<keycap>Enter</keycap>キーを押下して下さい。</para>
              </listitem>

              <listitem>
                <para>もしLinux上でClassicサーバーを実行している場合、データベースのパスがホスト名で
                開始されていない場合、高速なダイレクト・ローカル接続が試みられます。この接続法は、
                ユーザーのLinuxへのログインアカウントにデータベース・ファイルへの十分なアクセス権限が
                ない場合失敗します。この場合、<systemitem
                class="systemname">localhost</systemitem>: <filename
                class="directory">/</filename>&lt;path&gt;で接続して下さい。サーバー・プロセス
                がファイルをオープンします（Firebird 1.5 は通常<systemitem
                class="username">firebird
                </systemitem>ユーザーとして実行されています）。逆に、ネットワーク・スタイルの接続では、
                ユーザーがClassicサーバーのローカル・モードでデータベースを作成したり、サーバーにファイル
                への十分なアクセス権限がない場合には接続に失敗することになります。</para>
              </listitem>

              <listitem>
                <para>もし、ClassicサーバーをWindows上で実行している場合、<emphasis>必ず</emphasis>
                ホスト名を指定しなくてはなりません(<systemitem
                class="systemname">localhost</systemitem>
                も含まれます)。データベースへのフルパスにホスト名を付加しない場合、接続は失敗します。</para>
              </listitem>
            </itemizedlist>
          </important>

          <note>
            <para>一重引用符はFirebirdの<quote>標準</quote>区切り文字ですが、二重引用符
            が上記の例で、データベースのパスを指定する所で使用されています。このように、
            コマンドライン・ユーティリティの一部で空白を含むパスを指定する際に必要と
            なる場合があります。一重引用符も空白を含まないパスに対してはきちんと動作 します。</para>

            <para><quote>SYSDBA</quote>と<quote>masterkey</quote>の両側の引用符はオプション
            となります。空白を含まないデータベースのパスも引用符は必要ではありません。</para>
          </note>

          <para>この点は、<application>isql</application>が接続した時点で表示します。</para>

          <screen>DATABASE "C:\Program Files\Firebird\Firebird_1_5\examples\employee.fdb",
User: sysdba
SQL&gt;</screen>

          <para><filename>employee.fdb</filename>を利用して遊んでもらってもいいでしょう。
          <acronym>isql</acronym>の由来は<emphasis>interactive SQL</emphasis>から来てい
          ます。isqlを使って、データを検索したり、メタデータの情報を表示したり、データベー
          ス・オブジェクトを作成したり、データ定義言語を実行するなど、様々なことが出来ま す</para>

          <para>コマンドプロントに戻るには、次のようにタイプして下さい</para>

          <screen>SQL&gt;QUIT;↵</screen>

          <para><application>isql</application>に関しての詳細な情報は、<citetitle>Using
          Firebird</citetitle>のChapter 10:<citetitle>Interactive SQL Utility
          (isql)</citetitle> をご覧下さい。</para>
        </section>

        <section>
          <title><indexterm>
              <primary>データベース</primary>

              <secondary>接続</secondary>

              <tertiary>GUIクライントによる</tertiary>
            </indexterm>GUIクライアントの利用方法</title>

          <para>GUIクライアントは通常、いったん入力された<database>CONNECT</database>
          文字列の生成や、サーバー、パス、ユーザー名、パスワードの情報等の構成を管理し
          ています。各要素には前節でご説明した内容を使用して下さい。</para>

          <note>
            <itemizedlist spacing="compact">
              <listitem>
                <para>これらのツールでは、たいていの場合、サーバー名 + パス名 を一つながり
                の文字列として扱っています。</para>
              </listitem>

              <listitem>
                <para>Linux/Posixシステムではファイル名やコマンド名は大文字小文字を区別
                すると言うことに注意して下さい。</para>
              </listitem>
            </itemizedlist>
          </note>
        </section>
      </section>
    </section>

    <section id="qsg15-databases-creating-ja">
      <title><indexterm>
          <primary>isql</primary>

          <secondary>データベースの作成</secondary>
        </indexterm><indexterm>
          <primary>データベース</primary>

          <secondary>isqlでの作成</secondary>
        </indexterm><application>isql</application>を使用したデータベースの作成</title>

      <para><application>isql</application>を使用したデータベースの作成方法は一つだけ
      ではありません。ここでは、データベースをインタラクティブに作成する単純な方法を
      見ていくこととします、実際のデータベース作成業務においてはこうした方法ではなく、
      データ定義言語(DDL)を利用してデータベースの作成とメンテナンスを行うべきです。 <citetitle>Using
      Firebird</citetitle>マニュアルの該当部分をご覧下さい。</para>

      <section>
        <title><application>isql</application>の開始</title>

        <para><application>isql</application>を利用してデータベースをインタラクティブに作成
        するためには、Firebirdのインストールディレクトリ下の<filename class="directory">
        bin</filename>サブディレクトリで、<command>isql</command>(Windows)又は<command>
        ./isql</command>(Linux)を実行して下さい。</para>

        <screen>C:\Program Files\Firebird\Firebird_1_5\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database</screen>
      </section>

      <section>
        <title><indexterm>
            <primary>CREATE DATABASE 文</primary>
          </indexterm><indexterm class="singular" scope="local">
            <primary>SQL</primary>

            <secondary>CREATE DATABASE 文</secondary>
          </indexterm>CREATE DATABASE 文</title>

        <para>さて、新しいデータベースをインタラクティブに作成する準備が出来ました。
        それでは、<filename>test.fdb</filename>という名前のデータベースを作成してみま
        しょう。作成場所は<filename class="directory">data</filename>ディレクトリを
        <systemitem class="filesystem">D</systemitem>ドライブに作成して、そこへ配置
        することにします。</para>

        <screen>SQL&gt;CREATE DATABASE 'D:\data\test.fdb' page_size 8192↵
CON&gt;user 'SYSDBA' password 'masterkey';↵</screen>

        <important>
          <itemizedlist>
            <listitem>
              <para><database>CREATE DATABASE</database>文中で、パス名・ユーザー名・
              パスワードには引用符がありますが、これは<emphasis>必須</emphasis>です。
              この点では、<database>CONNECT</database>文とは違いがあります。</para>
            </listitem>

            <listitem>
              <para>もし、Linux上でClassicサーバーを実行している場合、データベースの
              パス名をホスト名から始めてはいけません。その場合、データベースファイルは
              あなたのLinuxログインユーザーをオーナーとして作成されることになります。
              それでいいかどうかはあなた次第ですが(アクセス権限を考慮して下さい、他の
              ユーザーがアクセス出来るかどうかについてです）。<systemitem
              class="systemname">localhost:</systemitem>をパスに付けた場合、サーバー
              プロセス(Firebird 1.5では通常<systemitem
              class="username">firebird</systemitem>
              が使われています）がファイルを生成して所有します。</para>
            </listitem>

            <listitem>
              <para>Windows上でClassicサーバーを実行している場合、ホスト名は<emphasis>
              必ず</emphasis>特定しなくてはなりません(<systemitem
              class="systemname">localhost</systemitem>かもしれませんが)。パス名にホスト名が付加されていないと
              データベースの作成は失敗します。</para>
            </listitem>
          </itemizedlist>
        </important>

        <para>さあ、データベースが作成されました。ちょっとだけ待って、SQLプロンプトが
        現れましたね。この状態で、新しいデータベースに接続していますので、新しいテスト
        オブジェクトを作成することが出来るようになっています。</para>

        <para>データベースが本当に作成されているのかを確認する為に、次のようにタイプし て下さい</para>

        <screen>SQL&gt;SELECT * FROM RDB$RELATIONS;↵</screen>

        <para>スクリーンに沢山のデータが表示されましたね! このクエリーはFirebirdがメタデータを
        格納しているシステムテーブル中の全ての行を表示させるものです。<quote>空の</quote>データベース
        は全くの空というわけではありません、データベースにはあなたが作成するオブジェクトを格納
        するためのメタデータが既に存在しているのです。</para>

        <para>コマンドプロンプトに戻るには次の様にタイプして下さい</para>

        <screen>SQL&gt;QUIT;↵</screen>

        <para><application>isql</application>に関する詳細は、<citetitle>Using
        Firebird</citetitle> の Chapter 10:<citetitle>Interactive SQL Utility
        (isql)</citetitle>を参照して下さい。</para>
      </section>
    </section>

    <section id="qsg15-databases-sql-ja">
      <title><indexterm class="singular" scope="local">
          <primary>SQL</primary>
        </indexterm><indexterm class="singular" scope="local">
          <primary>Firebird SQL</primary>
        </indexterm>Firebird SQL</title>

      <para>データベースマネジメントシステムには通常、それぞれ固有の方法でSQLが実装されています。
      Firebirdは従兄弟のInterBase®を除く他のRDBMSと比較して、より厳格にSQL標準に準拠しています。
      そのため、SQL標準に準拠していない他製品から移行してきた開発者は、Firebirdはクセが強いと
      よく言いますが、クセと言われているものの大半は実は全くクセではなく標準なのです。</para>

      <section id="qsg15-integer-division-ja">
        <title><indexterm>
            <primary>整数の除算</primary>
          </indexterm>整数と整数の除算</title>

        <para>FirebirdはSQL標準に準拠しているため、整数÷整数の計算の結果(商)は切り捨てられ、
        次に小さい整数となります。このことは、ヘンテコな結果になるので十分注意して下さい。</para>

        <para>例えば次の計算はSQLにおいては正解です:</para>

        <blockquote>
          <para><literal>1 / 3 = 0</literal></para>
        </blockquote>

        <para>RDBMSからの、整数÷整数の結果を浮動小数点型に改善したい場合、その除数と被除数の
        両方又はどちらかについてそのデータ型について、浮動小数点型か高精度数値型を使用する 必要があります。</para>

        <para>例えば、上の計算式で非ゼロ値を結果として得たい場合には次のような 変更をします:</para>

        <blockquote>
          <para><literal>1.000 / 3 = 0.333</literal></para>
        </blockquote>
      </section>

      <section id="qsg15-strings-ja">
        <title>文字列に関する情報</title>

        <section>
          <title><indexterm>
              <primary>文字列</primary>

              <secondary>区切記号</secondary>
            </indexterm>文字列の区切記号</title>

          <para>Firebirdで文字列を扱う場合には一重引用符(アポストロフィ）が必要です – <literal> 'I am a
          string'</literal> –
          (ASCIIコード39で、<emphasis>96ではない</emphasis>)。InterBase®
          に対して初期のバージョンのFirebirdを使う場合、文字列の区切記号として一重引用符と二重引用符
          は交換可能であったことを想起できるでしょう。二重引用符はFirebirdのSQL文において文字列の
          区切記号としては使うことが出来ません。</para>
        </section>

        <section>
          <title><indexterm>
              <primary>文字列中のアポストロフィ</primary>
            </indexterm><indexterm>
              <primary>文字列</primary>

              <secondary>文字列中のアポストロフィ</secondary>
            </indexterm>文字列中のアポストロフィ</title>

          <para>Firebirdの文字列中でアポストロフィを使用したい場合には、
          アポストロフィをもう一つ前に付けて<quote>エスケープ</quote>して下さい。</para>

          <para>例えば、次の文字列はエラーになります:</para>

          <blockquote>
            <para><literal>'Joe's Emporium'</literal></para>
          </blockquote>

          <para>パーサーはアポストロフィに出会ったところで、<literal>'Joe'</literal>
          と解釈して、その後は不明なキーワードとなってしまうためです。</para>

          <para>規約に適合する文字列にするためには、アポストロフィを二重にします:</para>

          <blockquote>
            <para><literal>'Joe''s Emporium'</literal></para>
          </blockquote>

          <para>これは二つの一重引用符で二重引用符ではないことに注意して下さい。</para>
        </section>

        <section>
          <title><indexterm>
              <primary>文字列</primary>

              <secondary>結合</secondary>
            </indexterm>C文字列の結合</title>

           

          <para>SQLにおける結合記号は二つの<quote>パイプ</quote>記号(ASCIIコード 124、スペースを入れず
          二つ並べる)です。SQL中で、<quote>+</quote>記号は算術演算子であって、文字列の結合に
          使用した場合にはエラーとなります。次の表現では文字型のカラムに<quote>
              <literal>Reported by:</literal>
            </quote>を前に付加しています。</para>

           

          <blockquote>
            <para>
              <literal>'Reported by: ' || LastName</literal>
            </para>
          </blockquote>

           

          <para>結合は慎重に行って下さい。もしも、2つ又は3つのCHAR型又はVARCHAR型のカラムを結合した
          場合に、CHAR型又はVARCHAR型の最大長である32KBの制限を超えてしまうとエラーになるので、 注意して下さい。</para>

           

          <para>以下の点も参照して下さい、 <xref linkend="qsg15-nulls" />
          <constant>NULL</constant>を含んだ結合表現について</para>
        </section>

        <section>
          <title><indexterm>
              <primary>二重引用符識別子</primary>
            </indexterm>二重引用符識別子</title>

          <para>SQL-92標準以前には、データベース中で大文字小文字の別や空白を含んだキーワード
          が二重化する場合のオブジェクト名(識別子)に関しての規約はありませんでした。SQL-92
          が一つの新しい規格を取り入れてその規約にしたため、識別子は二つの二重引用符(ASCIIコード
          34)で囲まれるものと定義し、以降は常に二重引用符で囲まれる事になりました。</para>

          <para>この<quote>贈り物</quote>の目的というのは、非標準のRDBMSから標準準拠のRDBMS
          への以降を容易にするためのものでした。この事で悪い面があるとすれば、二重引用符
          で識別子を定義した場合、それらは大文字小文字が区別され、その後も二重引用符を 使用することが強制されると言うことです。</para>

          <para>Firebirdは大変制限された環境下でも、いくらかは気を抜けるようになっています。
          識別子が二重引用符で定義されていたとします:</para>

          <orderedlist spacing="compact">
            <listitem>
              <para>その場合大文字で定義されたものと見なします</para>
            </listitem>

            <listitem>
              <para>キーワードではなく</para>
            </listitem>

            <listitem>
              <para>スペースを含みません</para>
            </listitem>
          </orderedlist>

          <para>また、引用符を使わずに大文字小文字を区別しないという使い方も出来ます
          (しかしすぐにでも二重引用符を付けた方が良いでしょう、大文字小文字を合わせる べきです)。</para>

          <warning>
            <para>あまりスマートではありませんが、例として、以下のテーブルがあるとしましょう
            "<database>TESTTABLE</database>" and
            "<database>TestTable</database>"、 両方が二重引用符を付けて定義されていて,
            次のコマンドを実行します:</para>

            <screen>SQL&gt;select * from TestTable;</screen>

            <para>あなたがレコードを得るのは、"<database>TESTTABLE</database>"からで
            "<database>TestTable</database>"ではありません!</para>
          </warning>

          <para>引用符による識別子がどうしても必要な理由がある場合でなければ、通常は使用を
          避けた方が良いと思われます。Firebirdは幸運なことに引用符付と引用符無しの識別子の 混在を認めています –
          必要であれば、古いデータベースから引き継いだキーワードを含め ることにはなんの問題もありません。</para>

          <warning>
            <para>データベース管理ツールの中には、デフォルトで<emphasis>全ての</emphasis>
            識別子に二重引用符を強制するものがあります。二重引用符オプションを設定可能か 試してみて下さい。</para>
          </warning>
        </section>
      </section>

      <section id="qsg15-nulls" xreflabel="Expressions involving NULL-ja">
        <title><indexterm>
            <primary>NULL</primary>
          </indexterm><constant>NULL</constant>を含んだ表現式</title>

        <para>SQLでは、<constant>NULL</constant>は値ではありません。NULLはデータの条件又は
        <emphasis>状態</emphasis>であって、値としては不明なものを意味します。<constant>NULL
        </constant>を含んだ演算や、<constant>NULL</constant>と値を含んだ他の表現式
        は、ほとんどの場合常に<constant>NULL</constant>を結果として返します。<constant>NULL
        </constant>はゼロや空白や<quote>空文字</quote>ではありませんし、それらの様に振る舞う
        こともありません。</para>

        <para>試してみた場合にびっくりするかも知れませんが、<constant>NULL</constant>による
        比較や演算を実行してみた場合の例をいくつか示しましょう:</para>

        <itemizedlist>
          <listitem>
            <para><literal>1 + 2 + 3 + <constant>NULL</constant> =
            <constant>NULL</constant></literal></para>
          </listitem>

          <listitem>
            <para><literal>not (<constant>NULL</constant>) =
            <constant>NULL</constant></literal></para>
          </listitem>

          <listitem>
            <para><literal>'Home ' || 'sweet ' || <constant>NULL</constant> =
            <constant>NULL</constant></literal></para>
          </listitem>

          <listitem>
            <para><programlisting>if (a = b) then
  MyVariable = 'Equal';
else
  MyVariable = 'Not equal';</programlisting></para>

            <para>これらのコードを実行してみた後で、<varname>a</varname>と<varname>b</varname>
            の両方を<constant>NULL</constant>にした場合、<varname>MyVariable</varname>には
            <literal>'Not equal'</literal>が入ります。理由は、<literal>'a =
            b'</literal>の結果は
            どちらか一方が<constant>NULL</constant>であった場合、<constant>NULL</constant>になる
            からです。テスト例にある<quote><literal>if</literal></quote>文は<constant>NULL
            </constant>の場合には<literal>false</literal>として振る舞うため、'<literal>then</literal>
            'ブロックはスキップされて、'<literal>else</literal>'ブロックが実行されます</para>

            <warning>
              <para>表現式が<literal>false</literal>として<emphasis>振る舞う</emphasis>にもかかわらず、
              この場合には、まだこれは<constant>NULL</constant>のままです。つまり、<function>not()
              </function>を使って結果を反転させようと思っても、結局これも<constant>NULL</constant>
              を返すことになり、<literal>true</literal>は返ってきません。</para>
            </warning>
          </listitem>

          <listitem>
            <para><programlisting>if (a &lt;&gt; b) then
  MyVariable = 'Not equal';
else
  MyVariable = 'Equal';</programlisting></para>

            <para>ここで<varname>MyVariable</varname>
            は<literal>'Equal'</literal>になりますが、
            それは<varname>a</varname>が<constant>NULL</constant>で<varname>b</varname>が
            <constant>NULL</constant>出はない時、あるいはその逆の時です。説明としては
            左記の例と同様になります。</para>
          </listitem>

          <listitem>
            <para><programlisting>FirstName || ' ' || LastName</programlisting></para>

            <para>この式は<varname>FirstName</varname>と<varname>LastName</varname>のどちらかが<constant>NULL</constant>の時には<constant>NULL</constant>を返します。</para>
          </listitem>
        </itemizedlist>

        <tip>
          <para><constant>NULL</constant>を<constant>UNKNOWN</constant>として考えてみれば
          上記のヘンテコな結果も、なるほどと頷けるでしょう。もし<varname>Number</varname>
          が不明だったとしたら、'<literal>1 + 2 + 3 + Number</literal>'もまた、不明
          (つまり<constant>NULL</constant>)になることは自明です。<varname>MyString</varname>が
          不明であれば、'<literal>MyString || YourString</literal>'も不明となります(<varname>
          YourString</varname>が非<constant>NULL</constant>であっても)。その他も同様ですね。</para>
        </tip>

        <section>
          <title><constant>NULL</constant>に関しての追加情報</title>

          <para><constant>NULL</constant>に関しての詳細な情報は、以下から入手出来る
          <citetitle>Firebird Null Guide</citetitle>をご覧下さい:</para>

          <itemizedlist spacing="compact">
            <listitem>
              <para><ulink
              url="http://www.firebirdsql.org/manual/nullguide.html">http://www.firebirdsql.org/manual/nullguide.html</ulink>
              (HTML)</para>
            </listitem>

            <listitem>
              <para><ulink
              url="http://www.firebirdsql.org/pdfmanual/Firebird-Null-Guide.pdf">http://www.firebirdsql.org/pdfmanual/Firebird-Null-Guide.pdf</ulink>
              (PDF)</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>
  </section>

  <section id="qsg15-safety-ja">
    <title>セキュリティ・ガイドライン</title>

    <section id="qsg15-safety-server-ja">
      <title><indexterm>
          <primary>セキュリティ</primary>
        </indexterm><indexterm>
          <primary>データベース</primary>

          <secondary>セキュリティ</secondary>
        </indexterm>サーバーのセキュリティオプション</title>

      <para>Firebird 1.5は新しいセキュリティに関する既定をいくつか持っています。これらを
      探索してみて下さい。多くの設定可能な機能のデフォルト値は古いままで、<quote>セキュアで無い
      </quote>振る舞いをしますが、これは既存のアプリケーションの動作を保証するためです、しかし
      可能な限り保護レベルを向上させようとすれば、システムのセキュリティをさらに高めることが 出来るようになっています。</para>

      <para>新規又は変更されたセキュリティ機能は以下の通りです:</para>

      <itemizedlist>
        <listitem>
          <para>Posixシステムでは、Firebirdはデフォルトで<systemitem
          class="username">firebird
          </systemitem>として実行されるようになりました。(以前は<systemitem class="username">
          root</systemitem>でした)。</para>
        </listitem>

        <listitem>
          <para>Windowsサーバープラットフォームでは、Firebirdサービスを指定されたユーザーアカウント
          (例：<systemitem
          class="username">Firebird</systemitem>)で実行することも可能です。サービス
          を実行する既定のユーザーは<systemitem
          class="username">LocalSystem</systemitem>ですが、
          インターネット接続環境下ではシステムが危険にさらされる可能性があります。 <filename
          class="directory">doc</filename>にある<filename>README.instsvc</filename>を読んで、
          この設定について学んで下さい。</para>
        </listitem>

        <listitem>
          <para><firstterm><indexterm>
              <primary>Aliases</primary>
            </indexterm><indexterm>
              <primary>Database</primary>

              <secondary>Aliases</secondary>
            </indexterm>Database Aliases</firstterm> は、クライアントから物理的なデータベース
          の位置を隠蔽します。エイリアスを利用することで、クライアントは例えば次のようにして データベースに接続します
          <quote><database class="name">frodo:zappa</database></quote>、つまり
          <filename>frodo:/var/firebird/music/underground/mothers_of_invention.fdb</filename>という物理配置
          を公開せずにすみます。エイリアスを利用することで、また、データベースの配置を変更しても、
          クライアントの接続文字列を変更しなくても済むようになります。</para>
        </listitem>

        <listitem>
          <para><parameter>DatabaseAccess</parameter> パラメータによって、
          <constant>Restrict</constant>の場合、制限されたアクセスを設定することが可能です。この場合、
          明示的に記述されたファイルシステム上の位置に限定することが出来ます。また、
          <constant>None</constant>を設定すると、エイリアスで指定されたデータベースのみアクセス可能
          となります。既定値は<constant>Full</constant>となっていて、無制限のアクセスを認めています。
          （訳注：原文ではAllだが、これはFullのはずです）</para>
        </listitem>

        <listitem>
          <para><parameter>ExternalFileAccess</parameter> パラメータは、外部テーブルへの
          アクセスを制御しています</para>
        </listitem>

        <listitem>
          <para><parameter>UdfAccess</parameter> パラメータは、ユーザー定義関数の配置場所
          についての制御をしています。</para>
        </listitem>
      </itemizedlist>

      <para>データベース・エイリアスは<filename>aliases.conf</filename>で指定されています。
      また、設定パラメータは<filename>firebird.conf</filename>で指定されています。インストールした
      Firebirdのリリースノートをよく読んで、適切な使用方法を理解するようにして下さい（また、幾ばくか
      有用なアドバイスが記述されているはずです）。</para>

      <!--Maybe expand this section later, so we don't have to refer people to the RNotes.-->
    </section>

    <section id="qsg15-safety-backup-ja">
      <title><indexterm>
          <primary>Backup</primary>
        </indexterm><indexterm>
          <primary>Restore</primary>
        </indexterm><indexterm>
          <primary>Databases</primary>

          <secondary>バックアップとリストア</secondary>
        </indexterm>Backup</title>

      <para>Firebirdには、データベースをバックアップ・リストアするためのツールが付属しています。
      それは<application>gbak</application>という名前で、Firebirdのインストール先ディレクトリの
      <filename class="directory">bin</filename>サブディレクトリに配置されています。Firebirdの
      データベースはユーザーが接続し通常の動作を行っている最中でもバックアップすることが可能です。
      バックアップはバックアップ開始時点でのデータベースの状態のスナップショットとして作成されます。</para>

      <para>定期的なバックアップと時々リストアを行うために、<application>gbak</application>を使用
      することは、データベース管理業務として定期的に行うべきです。</para>

      <warning>
        <para>データベースが動作中に、外部のプロプライエタリなユーティリティやファイルコピーツール
        類（<application>WinZip</application>, <application>tar</application>,
        <application>copy </application>, <application>xcopy</application>,
        等々)を使用しないで下さい。バックアップが 正確に行われないばかりでなく、これらのツールの使用によって引き起こされるディスクレベルでの
        排他処理が動作中のデータベースを壊してしまう可能背があります。</para>
      </warning>

      <important>
        <para>リストア中のデータベースの振る舞いについて、次のセクションの警告から学んで下さい</para>
      </important>
    </section>

    <section id="qsg15-safety-howtocorrupt-ja">
      <title><indexterm>
          <primary>Databases</primary>

          <secondary>破壊</secondary>
        </indexterm>データベースの壊し方（やってはいけないこと）</title>

      <para>以下のリストに挙げたのは<emphasis>やってはいけない</emphasis>ことです。こういった
      ことを行うとFirebirdのデータベースは壊れてしまう可能性があります。</para>

      <section>
        <title><indexterm>
            <primary>Databases</primary>

            <secondary>system tables</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>metadata</secondary>
          </indexterm><indexterm>
            <primary>System tables</primary>
          </indexterm>メタデータテーブルを変更する</title>

        <para>Firebirdは自身のオブジェクトとユーザーが作成した全てのオブジェクト
        のメタデータをデータベース中に格納して管理しています。もっとはっきり言えば、
        それらのオブジェクトはデータベース自身の関連テーブルに正しく格納されています。
        システムテーブルとそれらのカラムやその他の幾つかのシステムオブジェクトの識別子は
        <literal>RDB$</literal>で開始されています。</para>

        <para>これらは通常のデータベースオブジェクトであるため、ユーザー定義のオブジェクト
        と同様にクエリーをかけたり操作したりすることが出来ます。しかしながら、これらの操作
        をすべきではありません。Firebirdのデータベースエンジンはメタデータオブジェクトを
        定義し操作するために、高いレベルでSQL(DDL)のサブセットを実装しています。それらは、
        <database>CREATE</database>や<database>ALTER</database>、また<database>DROP</database>
        文として実行することが可能です。</para>

        <para>システムテーブルの直接的な操作をSQLでやることはもちろん、メタデータを変更したり
        削除したりする時に、DDLを使うことはあまり強くお勧め出来ません。SQLの技術とFirebirdエンジン
        に関する知識が十分なレベルに到達するまで、その<quote>衝動</quote>を先延ばしした方がよいでしょう。
        大破したデータベースはちょっとした注意や簡単な修理で何とかなるものではないからです。</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Forced writes</primary>
          </indexterm>Windowsサーバー上でForced WritesをOFFにする</title>

        <para>Firebirdはデフォルトでforced writes(同期書込モード）をONにしてインストールされています。
        データの変更や新規の挿入はディスクへ即座に書き込まれています。</para>

        <para>データベースを非同期書込モードに変更することは可能ですが、それによってデータの変更や
        新規のデータはメモリキャッシュ中に保持され、オペレーティングシステムのI/Oサブシステムが定期
        的にその内容をディスクへ書き込むことになります。こうした変更は、<firstterm>forced writes off
        </firstterm>(又は<firstterm>disabled</firstterm>)の設定をすることで可能です。この設定は
        大規模なバッチオペレーション等でパフォーマンスの向上を図るためになされることがあります。</para>

        <para>しかし重大な警告をしなくてはなりません。Windowsサーバー上では、forced writesを
        <emphasis>disableに絶対にしてはいけません</emphasis>。Windowsサーバーでは、Firebirdサービス
        をシャットダウンするまで書込キャッシュがフラッシュされなかったという事が報告されています。
        電源以上による中断は別として、Windowsサーバーの行いはかなり酷いものです。もし、OSがハングして
        I/Oシステムにまでそれが及んだ場合、ユーザーの行った操作はリブートプロセスによって全て失われて しまいます。</para>

        <note>
          <para>Windows 9x / ME は遅延書込をサポートしていません。</para>
        </note>

        <section>
          <title>Linuxサーバー上でForced WritesをOFFにする</title>

          <para>Linuxサーバーは一時的にforced writesをOFFにして運用しても安全です。
          とはいえ、大規模バッチジョブを終了したら元に戻すことを忘れないことです。もしも
          大変安全な予備電源システムを使用しているなら別ですが。</para>
        </section>
      </section>

      <section>
        <title><indexterm>
            <primary>Restore</primary>

            <secondary>to a running database</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>バックアップとリストア</secondary>
          </indexterm>運用中のデータベースにバックアップからリストアする</title>

        <para><application>gbak</application>のリストアのオプションの一つに(<literal>gbak
        -r[eplace]</literal>)
        があり、gbakが既存のデータベースを上書きすることを認めることが出来ます。この時、ユーザーがデータベースに
        ログインしていても警告すること成しにリストアが実行されてしまいます。結果として、データベースの破壊が
        たいていの場合は確実に起きてしまします。</para>

        <warning>
          <para>管理ツールや管理用のプロシージャをデザインする際には、どのユーザー(<database>SYSDBA</database>も
          含みます)であっても、いずれかのユーザーがログインしているデータベースに対してリストアを行わないよう に注意して下さい。</para>
        </warning>

        <note>
          <para><application>gbak</application>の使い方については、<citetitle>Using
          Firebird</citetitle>の Chapter21 <citetitle>Database Backup and
          Restore</citetitle>を参照して下さい。</para>

          <para>ユーザーに対して排他的アクセスを行う方法については、<citetitle>Using
          Firebird</citetitle>の Chapter14 <citetitle>Getting exclusive access
          to a database</citetitle>を参照して下さい。</para>
        </note>

        <para>実際上どうすればよいのかということでは、スペアのディスクスペースに<literal>gbak
        -c[reate]</literal>
        オプションを使用してリストアを行い、<application>isql</application>等のツールをを使用して十分にテストを
        行うことを推奨します。リストアされたデータベースが問題なければ、サーバーをシャットダウンして、古いデータベース
        のコピーをファイルシステム上で行い、リストアしたデータベースで既存のデータベースを上書きして下さい。</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Restore</primary>

            <secondary>user logins during restore</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>バックアップとリストア</secondary>
          </indexterm>リストア中にユーザーログインを認めてしまう</title>

        <para><literal>gbak -r[eplace]</literal>によってリストア中のデータベースにユーザーの
        ログインを認めてしまった場合、ユーザーのデータ操作によって、データベースが壊れてしまうでしょう。</para>
      </section>
    </section>
  </section>

  <section id="qsg15-gettinghelp-ja">
    <title><indexterm>
        <primary>Help</primary>
      </indexterm><indexterm>
        <primary>Documentation</primary>
      </indexterm>Helpの探し方</title>

    <para>Firebirdの廻りには多くの自発的なヘルパーのコミュニティが長きにわたって形作られてきました、 InterBase®
    6のソースコードが公開され、Firebirdプロジェクトが始まるもっと前からそれは連綿と続いて
    きました。見渡してみれば、Firebirdのコミュニティはあらゆる答えをすでに持っているのです。ボストンの
    バスルームで画板の上にそのデザインがなされる前から、Firebirdに関わってきた何名かの人々まで含まれて
    いるのです。(訳注：AnnやJimのことですね）</para>

    <itemizedlist>
      <listitem>
        <para>Firebird Projectの公式サイトは <ulink
        url="http://firebird.sourceforge.net">http://firebird.sourceforge.net</ulink>
        こちらです。そして、サポートリストに参加して下さい。</para>
      </listitem>

      <listitem>
        <para>Firebird knowledge site はこちらです。 <ulink
        url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink>
        Firebirdの開発と利用上の情報については、大変な量の情報を見いだすことが出来るでしょう。 IBPhoenixはまたDeveloper
        CDを販売していますが、これにはFirebirdのバイナリとたくさんのドキュメント
        が含まれています。(訳注：Firebird日本ユーザー会でも取り扱っています)</para>
      </listitem>

      <listitem>
        <para>Firebirdプロジェクト自体がプロデュースしている成長するドキュメントはこちらをご覧下さい。 <ulink
        url="http://firebird.sourceforge.net/manual/">http://firebird.sourceforge.net/manual/</ulink>.</para>
      </listitem>

      <listitem>
        <para><indexterm>
            <primary>Books</primary>

            <secondary>The Firebird Book</secondary>
          </indexterm><indexterm>
            <primary>Firebird Book</primary>
          </indexterm>公式 Firebird Book はこちらから発注できます <ulink
        url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;s=1093098777:149734&amp;page=ibp_firebird_book">http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;s=1093098777:149734&amp;page=ibp_firebird_book</ulink>,
        1100ページを越えるFirebird情報が満載です。（訳注：Amazonでも注文できます)</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>IBPhoenix の出版する <citetitle>Using Firebird</citetitle> と
      <citetitle>The Firebird Reference Guide</citetitle>, は、Developer
      CDにまだ入っていますが、あまりメンテナンスされていません。しかし、
      これらに含まれていたほとんどの内容はアップデートされて公式ドキュメントに加えられて 来ています。</para>
    </note>
  </section>

  <section id="qsg15-firebird-project-ja">
    <title><indexterm scope="local">
        <primary>Project</primary>
      </indexterm><indexterm>
        <primary>Firebird project</primary>
      </indexterm>Firebirdプロジェクト</title>

    <para>Firebirdと幾つかのドライバの開発者、設計者、テスターはSourceForge上のFirebirdプロジェクトの
    メンバーとなっています。SourceForgeは幾千ものオープンソースプロジェクトのホームグラウンドで
    驚異的な仮想コミュニティとなっています。Firebirdプロジェクトのアドレスは <ulink
    url="http://sourceforge.net/projects/firebird">http://sourceforge.net/projects/firebird</ulink>です。
    このサイトには、ソースコードツリーとバグとラッカー、その他いくつもの技術的ファイルがあり、
    コードベースの開発とテストのための種々の目的のためにダウンロードすることが出来ます。</para>

    <para>Firebirdプロジェクトの開発者とテスターは以下のメーリングリストを利用しています。
    firebird-devel@lists.sourceforge.net これは、<quote>仮想研究室</quote>となっていて、
    Firebirdの強化やバグフィックス、新しいバージョンのリリース等のためのコミュニケーションの 手段となっています。</para>

    <para>このMLには興味を持っている人であれば誰でも参加ですますが、しかし、
    ユーザーサポート的な質問は妨げになるので歓迎されません。そういった質問は、 firebird-support@yahoogroups.com
    へお願い致します。</para>
  </section>

  <appendix id="qsg15-dochist-ja">
    <title><indexterm>
        <primary id="qsg10-it-dochist-p-ja">Document history</primary>
      </indexterm>Document History</title>

    <para>The exact file history is recorded in the <filename
    class="directory">manual</filename> module in our CVS tree; see <ulink
    url="http://sourceforge.net/cvs/?group_id=9028">http://sourceforge.net/cvs/?group_id=9028</ulink></para>

    <para><revhistory>
        <revision>
          <revnumber>0.0</revnumber>

          <date>2002</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Published as Chapter One of <citetitle>Using
            Firebird</citetitle>.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.0</revnumber>

          <date>2003</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Published separately as a free Quick Start Guide.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.x</revnumber>

          <date>Jun 2004</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Donated to Firebird Project by IBPhoenix.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.0</revnumber>

          <date>27 Aug 2004</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Upgraded to Firebird 1.5</para>

            <para>Added Classic vs. Superserver section.</para>

            <para>Reorganised and corrected Disk Locations Table.</para>

            <para>Added (new) screenshots.</para>

            <para>Added section on security.</para>

            <para>Updated and completed information on Control Panel
            applets.</para>

            <para>Added more examples to <quote>Expressions involving
            <constant>NULL</constant></quote>.</para>

            <para>Various other corrections and additions.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1</revnumber>

          <date>20 Feb 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Enhanced GSEC section.</para>

            <para>Added more info to <database>CONNECT</database> and
            <database>CREATE DATABASE</database> sections.</para>

            <para>Added version number and document history.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1.1</revnumber>

          <date>1 Mar 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Changed <literal>gbak r[estore]</literal> to
            <literal>r[eplace]</literal> in two places.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1.2</revnumber>

          <date>8 Apr 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Reordered Firebird SQL subsections.</para>

            <para>Added links to Firebird Null Guide.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.2</revnumber>

          <date>2 Dec 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Removed "Using the books by IBPhoenix" as it doesn't make
            sense in the QSG.</para>

            <para>Promoted "How to get help" to 1st-level section and removed
            "Where to next" shell.</para>

            <para>Removed link to UFB and RefGuide; added a note instead
            explaining their current status.</para>

            <para>Updated/corrected classic-super comparison table.</para>

            <para>Moved a number of sections on installing, working with
            databases, and (un)safety into newly created top-level
            sections.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.2.1</revnumber>

          <date>22 Dec 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Corrected statement on SS thread usage in
            Classic-vs-Superserver table.</para>

            <para>Fixed broken link.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.2.1-ja</revnumber>

          <date>5 May 2006</date>

          <authorinitials>TH</authorinitials>

          <revdescription>
            <para>Translation into Japanese by Tsutomu Hayashi.</para>
          </revdescription>
        </revision>
      </revhistory></para>
  </appendix>

  <appendix id="qsg15-license-ja">
    <title><indexterm>
        <primary>License notice</primary>
      </indexterm>License notice</title>

    <para>The contents of this Documentation are subject to the Public
    Documentation License Version 1.0 (the <quote>License</quote>); you may
    only use this Documentation if you comply with the terms of this License.
    Copies of the License are available at <ulink
    url="http://www.firebirdsql.org/pdfmanual/pdl.pdf">http://www.firebirdsql.org/pdfmanual/pdl.pdf</ulink>
    (PDF) and <ulink
    url="http://www.firebirdsql.org/manual/pdl.html">http://www.firebirdsql.org/manual/pdl.html</ulink>
    (HTML).</para>

    <para>The Original Documentation is titled <citetitle>Firebird Quick Start
    Guide</citetitle>.</para>

    <para>The Initial Writer of the Original Documentation is: IBPhoenix
    Editors.</para>

    <para>Copyright (C) 2002-2004. All Rights Reserved. Initial Writer
    contact: hborrie at ibphoenix dot com.</para>

    <para>Contributor: Paul Vinkenoog - see <link
    linkend="qsg15-dochist-ja">document history</link>.</para>

    <para>Portions created by Paul Vinkenoog are Copyright (C) 2004-2005. All
    Rights Reserved. Contributor contact: paul at vinkenoog dot nl.</para>

    <para>Contributor: Tsutomu Hayashi - Japanese translation.</para>

    <para>The Japanese translation by Tsutomu Hayashi is Copyright (C) 2006.
    All Rights Reserved. Contributor contact: tomsan dot hayashi at nifty dot
    com.</para>
  </appendix>

  <index id="qsg15-index-ja">
    <title>Alphabetical index</title>
  </index>
</article>