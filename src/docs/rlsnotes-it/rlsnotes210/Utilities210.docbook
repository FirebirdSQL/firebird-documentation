<?xml version="1.0" encoding="UTF-8"?>
<chapter id="rnfb20x-util">
  <chapterinfo>
    <title>Utilità a linea di comando</title>
  </chapterinfo>

  <section id="rnfb210-util-general">
    <title>Miglioramenti</title>

    <section id="rnfb21-utils-dbtriggers">
      <title>Supporto ai TRIGGER di Database</title>

      <!--MIMMO == versione 2.1.3 == traduzione allineata-->

      <para><emphasis role="bold">(V. 2.1)</emphasis> Un nuovo parametro è
      stato aggiunto a <emphasis>gbak</emphasis>, <emphasis>nbackup</emphasis>
      e <emphasis>isql</emphasis> per non eseguire <xref
      linkend="rnfb210-dbtriggers" />. Ciò è disponibile solo al proprietario
      del database e a SYSDBA:</para>

      <programlisting>
  gbak -nodbtriggers
  isql -nodbtriggers
  nbackup -T
      </programlisting>
    </section>

    <section id="rnfb21-utils-password">
      <sectioninfo>
        <title>Occultamento password</title>

        <author>
          <firstname>Alex</firstname>

          <surname>Peshkov</surname>
        </author>
      </sectioninfo>

      <para>Le utilità a linea di comando che accettano il parametro
      <command>-password</command> sono vulnerabili alla cattura della
      password, specialmente quando sono lanciate da uno script. Un ulteriore
      passo nell'ostacolare tutto ciò nelle piattaforme POSIX, consiste nel
      mostrare nella lista dei processi l'argomento [PASSWORD] con un
      asterisco ( * ), mentre prima veniva visualizzato in chiaro.</para>
    </section>
  </section>

  <section id="rnfb210-util-svcs">
    <title>Servizi di Firebird</title>

    <section id="rnfb21-fbsvcmgr">
      <sectioninfo>
        <title>Nuova utilità a linea di comando fbsvcmgr</title>

        <author>
          <firstname>Alex</firstname>

          <surname>Peshkov</surname>
        </author>
      </sectioninfo>

      <para><emphasis role="bold">(V.2.1)</emphasis> La nuova utilità
      <firstterm>fbsvcmgr</firstterm> permette un'interfaccia a linea di
      comando verso le API di servizio, permettendo l'accesso a tutti i
      servizi implementati in Firebird.</para>

      <para>Sebbene ci siano in giro molti strumenti con interfaccia grafica
      per l'amministrazione dei database attraverso le API di servizio,questo
      nuovo strumento risolve agli amministratori il problema di accedere a
      server Unix remoti nelle grandi reti attraverso una connessione a linea
      di comando. Precedentemente per ottenere una cosa del genere era
      necessario ricorrere ad un programmatore.</para>

      <section id="rnfb21-fbsvcmgr-using">
        <title>Uso di fbsvcmgr</title>

        <para><emphasis>fbsvcmgr</emphasis> non simula i parametri
        implementati nelle tradizionali <quote>g*</quote> utilità. Invece,
        semplicemente è un'interfaccia attraverso cui possono transitare le
        funzioni ed i parametri delle API di servizio. Gli utenti pertanto
        devono essere pratici della versione attuale delle API di servizio. Il
        file di definizioni delle API <filename>ibase.h</filename>, nella
        cartella di installazione di Firebird <filename>../include</filename>,
        va preso come primaria fonte di informazioni su quanto è disponibile,
        supportato dalla lettura (In inglese) del manuale <quote>InterBase 6.0
        beta API Guide</quote>.</para>

        <section id="rnfb21-fbsvcmgr-params">
          <title>Parametri</title>

          <variablelist>
            <varlistentry>
              <term>Specificare il gestore del servizio</term>

              <listitem>
                <para>Il primo parametro richiesto nella linea di comando è il
                <quote>gestore dei servizi</quote> (Services Manager) a cui ci
                si vuole collegare:</para>

                <itemizedlist>
                  <listitem>
                    <para>Per una connessione locale usare il semplice simbolo
                    <filename>service_mgr</filename></para>
                  </listitem>

                  <listitem>
                    <para>Per collegarsi ad un server remoto, bisogna usare il
                    formato con il nome del server
                    <filename>nomeserver:service_mgr</filename></para>
                  </listitem>
                </itemizedlist>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Specificare i successivi blocchi dei parametri di servizio
              (SPB)</term>

              <listitem>
                <para>Successivamente vanno specificati gli SPB (Service
                Parameter Block), con eventuali valori richiesti. Ogni SPB può
                essere opzionalmente prefisso da un singolo simbolo '-'. Per
                le lunghe linee di comando che usualmente servono con
                <emphasis>fbsvcmgr</emphasis>, l'uso di uno '-' migliora la
                leggibilità della linea di comando. Confrontare, ad esempio,
                le seguenti (sono linee di comando su singola linea, ignorare
                gli a capo messi per necessità di stampa):</para>

                <programlisting>
# fbsvcmgr service_mgr user sysdba password masterke
        action_db_stats dbname employee sts_hdr_pages
                </programlisting>

                <para>e</para>

                <programlisting>
# fbsvcmgr service_mgr -user sysdba -password masterke
        -action_db_stats -dbname employee -sts_hdr_pages
                </programlisting>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>

        <section id="rnfb21-fbsvcmgr-spbsyntax">
          <title>Sintassi degli SPB</title>

          <para>La sintassi degli SPB che <emphasis>fbsvcmgr</emphasis> è in
          grado di capire coincide con quanto si trova nel file
          <filename>ibase.h</filename> o nella documentazione delle API di
          InterBase 6.0, eccetto che una certa forma d'abbreviazione può
          essere usata per ridurre un po' la lunghezza delle linee di comando.
          Ecco come funziona.</para>

          <para>Tutti i parametri SPB hanno una di queste due forme: (1)
          <filename>isc_spb_VALORE</filename> oppure (2)
          <filename>isc_VALORE1_svc_VALORE2</filename>. In
          <emphasis>fbsvcmgr</emphasis> c'è bisogno solamente delle parti
          <filename>VALORE, VALORE1 oppure VALORE2</filename> quando si deve
          scrivere il parametro.</para>

          <para>Di conseguenza, nel caso (1) si scrive semplicemente
          <filename>VALORE</filename>, mentre nel caso (2) si deve scrivere
          VALORE1_VALORE2. Ad esempio:</para>

          <programlisting>
isc_spb_dbname =&gt; dbname
isc_action_svc_backup =&gt; action_backup
isc_spb_sec_username =&gt; sec_username
isc_info_svc_get_env_lock =&gt; info_get_env_lock
          </programlisting>

          <para>e così via.</para>

          <note>
            <para>L'eccezione è <filename>isc_spb_user_name</filename>: può
            essere specificata sia come <filename>user_name</filename> o più
            semplicemente con <filename>user</filename>.</para>
          </note>

          <para>Non è realistico descrivere tutti i parametri di SPB in queste
          note di rilascio. Nella documentazione di InterBase 6.0 beta il
          tutto prende circa 40 pagine! La successiva sezione evidenzia solo
          alcune note differenze tra il modo di operare di
          <emphasis>fbsvcmgr</emphasis> e quello che si potrebbe arguire dalla
          vecchia documentazione di Interbase.</para>

          <section id="rnfb21-fbsvcmgr-spbdiffs">
            <title>fbsvcmgr: sintassi specifica</title>

            <variablelist>
              <varlistentry>
                <term>
                  <quote>Cosa fare e cosa non fare</quote>
                </term>

                <listitem>
                  <para>Con <emphasis>fbsvcmgr</emphasis> si effettua una
                  singola azione e quando ne è il caso se ne ottiene il suo
                  risultato, oppure si possono recuperare più elementi
                  informativi dal gestore dei servizi. Non si possono fare
                  entrambe le cose in un unico comando.</para>

                  <para>Ad esempio,</para>

                  <programlisting>
# fbsvcmgr service_mgr -user sysdba -password masterke
    -action_display_user
                  </programlisting>

                  <para>elenca tutti gli utenti sul server firebird
                  locale:</para>

                  <programlisting>
SYSDBA                         Sql Server Administrator      0    0
QA_USER1                                                     0    0
QA_USER2                                                     0    0
QA_USER3                                                     0    0
QA_USER4                                                     0    0
QA_USER5                                                     0    0
GUEST                                                        0    0
SHUT1                                                        0    0
SHUT2                                                        0    0
QATEST                                                       0    0
                  </programlisting>

                  <para>...e...</para>

                  <programlisting>
# fbsvcmgr service_mgr -user sysdba -password masterke
    -info_server_version -info_implementation
                  </programlisting>

                  <para>elenca sia la versione che l'implementazione del
                  server:</para>

                  <programlisting>
Server version: LI-T2.1.0.15740 Firebird 2.1 Alpha 1
Server implementation: Firebird/linux AMD64
                  </programlisting>

                  <para>Ma un tentativo di ottenere tutto ciò in una unica
                  linea di comando:</para>

                  <programlisting>
# fbsvcmgr service_mgr -user sysdba -password masterke
    -action_display_user -info_server_version -info_implementation
                  </programlisting>

                  <para>da' un errore:</para>

                  <programlisting>
Unknown switch <quote>-info_server_version</quote>
                  </programlisting>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>Elementi non documentati</term>

                <listitem>
                  <para>La funzione
                  <filename>isc_spb_rpr_list_limbo_trans</filename> è omessa
                  dalla documentazione beta di IB6, comunque
                  <emphasis>fbsvcmgr</emphasis> la supporta.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>Supporto per i nuovi elementi nelle API v.2.1</term>

                <listitem>
                  <para>Due nuovi elementi sono stati aggiunti nelle API di
                  servizio in Firebird 2.1 e sono supportati da
                  <emphasis>fbsvcmgr</emphasis>:</para>

                  <itemizedlist>
                    <listitem>
                      <para><filename>
                          <xref linkend="rnfb210-apiods-api-wintrust" />
                        </filename> (da scrivere
                      <filename>trusted_auth</filename>) si applica solo a
                      Windows. Forza Firebird ad usare l'autenticazione
                      trusted di Windows.</para>
                    </listitem>

                    <listitem>
                      <para><filename>
                          <xref linkend="rnfb210-apiods-api-dbname" />
                        </filename> (da scrivere <filename>dbname</filename>)
                      permette di impostare nei parametri il nome di un
                      database in tutte le azioni di servizio per accedere al
                      database della sicurezza da un client remoto, in modo
                      equivalente allo specificare in
                      <emphasis>gsec</emphasis> lo switch
                      <filename>-database</filename>.</para>

                      <note>
                        <para>Lo switch <filename>-database</filename> in
                        <emphasis>gsec</emphasis> è usato soprattutto per
                        specificare un server remoto da amministrare. In
                        <emphasis>fbsvcmgr</emphasis>, il nome del server è
                        già specificato col primo parametro (attraverso il
                        simbolo <filename>service_mgr</filename>) cosicché il
                        parametro <filename>[isc_spb_]dbname</filename> non è
                        particolarmente necessario.</para>
                      </note>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>Errori nella documentazione</term>

                <listitem>
                  <para>Il formato descritto per alcuni parametri nella
                  documentazione di InterBase 6 beta contiene diversi errori.
                  Nel caso ci fossero problemi, la fonte adatta per le
                  informazioni sulla forma corretta è
                  <filename>ibase.h</filename> .</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>Funzioni non supportate</term>

                <listitem>
                  <itemizedlist>
                    <listitem>
                      <para>Tutto ciò che si riferisce alla licenza d'uso è
                      stato rimosso dal codice sorgente aperto originale di
                      InterBase 6 e pertanto non è supportato né in Firebird
                      né da <emphasis>fbsvcmgr</emphasis>.</para>
                    </listitem>

                    <listitem>
                      <para>Le funzioni per vedere o modificare il vecchio
                      file di configurazione sono state eliminate sin da
                      Firebird 1.5 e quindi non implementate in
                      <emphasis>fbsvcmgr</emphasis>.</para>
                    </listitem>
                  </itemizedlist>
                </listitem>
              </varlistentry>
            </variablelist>
          </section>
        </section>
      </section>

      <section id="rnfb21-impr-svcmgr01">
        <sectioninfo>
          <title>Risolti alcuni roblemi del servizio di backup</title>

          <author>
            <firstname>A.</firstname>

            <surname>Peshkov</surname>
          </author>
        </sectioninfo>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-1232">Richiesta
          CORE-1232</ulink>

          <!--MIMMO == questa sezione dovrebbe essere di livello 2 e non di livello 3-->
        </para>

        <para><emphasis role="bold">(V.2.1)</emphasis> Mentre il gestore dei
        servizi effettuava operazioni di backup o restore, potevano accadere
        cose strane se alcuni parametri mancavano oppure se erano nell'ordine
        sbagliato. Il problema c'è ancora nelle versioni più vecchie, inclusa
        la v.2.0.x, pertanto bisogna fare attenzione nello specificare tutti
        gli swirtch richiesi fornendo il nome del database e del file di
        backup nell'ordine corretto con lo switch
        <command>-se[vice_mgr]</command>.</para>
      </section>

      <section id="rnfb21-impr-svcmgr02">
        <sectioninfo>
          <title>L'accesso ai servizi privilegiati consentito solo a
          SYSDBA</title>

          <author>
            <firstname>A.</firstname>

            <surname>Peshkov</surname>
          </author>
        </sectioninfo>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-787">Richiesta
          CORE-787</ulink>

          <!--MIMMO == questa sezione dovrebbe essere di livello 2 e non di livello 3-->
        </para>

        <para>L'accesso alle informazioni riportate dalle API di servizio
        riguardanti gli utenti ed i percorsi alle cartelle dei database è
        stato inibito agli utenti non amministratori. Tuttavia, un utente non
        privilegiato può ottenere informazioni su sé stesso.</para>
      </section>
    </section>
  </section>

  <section id="rnfb20x-util-backup">
    <title>Strumenti di Backup</title>

    <para>Ci sono molte novità in Firebird 2 per fare copie di sicurezza dei
    database: un nuovo programma di utilità per ottenere copie incrementali in
    linea e altri miglioramenti alla <emphasis>gbak</emphasis> per evitare
    alcuni trappoloni in cui avrebbero potuto incorrere gli utenti
    finali.</para>

    <section id="rnfb20x-util-backup-nbak">
      <sectioninfo>
        <title>Il nuovo backup incrementale</title>

        <author>
          <firstname>N.</firstname>

          <surname>Samofatov</surname>
        </author>
      </sectioninfo>

      <para>Un sistema per effettuare copie di sicurezza veloci, on-line, a
      livello di pagina ed incrementale è stato implementato ex-novo.</para>

      <para>Il sistema di backup è composto di due parti:</para>

      <itemizedlist>
        <listitem>
          <para>NBak, il modulo di supporto al motore</para>
        </listitem>

        <listitem>
          <para>NBackup, lo strumento che realmente effettua il backup</para>
        </listitem>
      </itemizedlist>

      <section id="rnfb20x-util-backup-nbak-nbak">
        <title>Nbak</title>

        <para>Le incombenze funzionali di NBAK sono:</para>

        <orderedlist>
          <listitem>
            <para>redirezionare le scritture sui file di differenza quando
            richiesto (frase <function>ALTER DATABASE BEGIN
            BACKUP</function>)</para>
          </listitem>

          <listitem>
            <para>produrre un GUID che fotografa il database e scriverlo nella
            testata dello stesso prima che ritorni dall'esecuzione la frase
            <function>ALTER DATABASE BEGIN BACKUP</function></para>
          </listitem>

          <listitem>
            <para>integrare le differenze nel database quando richiesto (frase
            <function>ALTER DATABASE END BACKUP</function>)</para>
          </listitem>

          <listitem>
            <para>segnare le pagine scritte dal motore con il valore corrente
            del contatore SCN [scansione di pagina] per il database</para>
          </listitem>

          <listitem>
            <para>incrementare l'SCN ad ogni cambio dello stato di
            backup</para>
          </listitem>
        </orderedlist>

        <para>Il ciclo degli stati di backup è:</para>

        <para>
          <emphasis role="bold">nbak_state_normal -&gt; nbak_state_stalled
          -&gt; nbak_state_merge -&gt; nbak_state_normal</emphasis>
        </para>

        <itemizedlist>
          <listitem>
            <para>Nello stato <emphasis>normal</emphasis> (normale) le
            scritture vanno direttamente ai file principali del
            database.</para>
          </listitem>

          <listitem>
            <para>Nello stato <emphasis>stalled</emphasis> (in stallo) le
            scritture vanno solo ai file delle differenze ed i file principali
            diventano in sola lettura.</para>
          </listitem>

          <listitem>
            <para>Nello stato di <emphasis>merge</emphasis> (integrazione) le
            nuove pagine non vengono allocate per i file delle differenze. Si
            scrive direttamente sui file principali del database. Le letture
            delle pagine mappate confrontano entrambe le versioni delle pagine
            e riportano la versione più recente, perché è impossibile sapere
            se è già stata integrata oppure no.</para>

            <note>
              <para>Questa logica dello stato di merge ha una parte un po'
              particolare. Sia Microsoft che Linux definiscono il contenuto
              del file che cresce come <quote>indefinito</quote> cioè sporco,
              ed entrambi lo inizializzano a zero.</para>

              <para>Questo è il motivo per cui non vengono lette le pagine
              mappate oltre la fine originale del file di database principale
              e vengono invece tenute aggiornate nel file delle differenze
              fino alla fine dell'integrazione. Qui c'è almeno la metà di
              tutta la logica di lettura e scrittura di NBak, provata usando
              PIO modificato su file esistenti che contenevano dati
              sporchi.</para>
            </note>
          </listitem>
        </itemizedlist>
      </section>

      <section id="rnfb20x-util-backup-nbak-nbackup">
        <title>NBackup</title>

        <para>Le responsabilità funzionali di NBackup sono</para>

        <orderedlist>
          <listitem>
            <para>rendere possibile un modo conveniente di lanciare ALTER
            DATABASE BEGIN/END BACKUP</para>
          </listitem>

          <listitem>
            <para>sistemare il database dopo la copia del file (cambiando
            fisicamente lo stato da <function>nbak_state_diff</function> a
            <function>nbak_state_normal</function> nella testata del
            database)</para>
          </listitem>

          <listitem>
            <para>creare e recuperare backup (copie di sicurezza)
            incrementali.</para>

            <para>Le copie di sicurezza incrementali sono multi livello. Ciò
            significa che, ad esempio, facendo un backup di livello 2 ogni
            giorno ed un backup di livello 3 ogni ora, ogni backup di livello
            3 contiene tutte le pagine modificate dall'inizio del giorno
            (momento in cui è stato fatto l'ultimo backup di livello 2) fino
            al momento in cui viene fatto il backup di livello 3.</para>

            <!--MIMMO == ho aggiunto per chiarezza la parte fra parentesi-->
          </listitem>
        </orderedlist>

        <section id="rnfb20x-util-backup-nbak-nbackup-backup">
          <title>Fare il backup</title>

          <para>Le copie incrementali seguono il seguente algoritmo:</para>

          <orderedlist>
            <listitem>
              <para>lanciano <function>ALTER DATABASE BEGIN BACKUP</function>
              per redirezionare le scritture al file delle differenze</para>
            </listitem>

            <listitem>
              <para>Controllano SCN e GUID del backup più recente del livello
              precedente</para>
            </listitem>

            <listitem>
              <para>Accodano le pagine di database che hanno un SCN maggiore
              di quello trovato al passo 2 nel file di backup</para>
            </listitem>

            <listitem>
              <para>Scrivono il GUID della copia di livello precedente
              nell'header, rendendo possibile la verifica della consistenza
              della catena di copie durante la fase di recupero
              (restore).</para>
            </listitem>

            <listitem>
              <para>lanciano <function>ALTER DATABASE END
              BACKUP</function></para>
            </listitem>

            <listitem>
              <para>aggiungono in <function>RDB$BACKUP_HISTORY</function> la
              registrazione della operazione appena eseguita, registrando il
              livello corrente, SCN, la GUID immagine del database e altre
              informazioni ad uso e consumo dell'utente.</para>
            </listitem>
          </orderedlist>
        </section>

        <section id="rnfb20x-util-backup-nbak-nbackup-restore">
          <title>Recupero</title>

          <para>Il recupero o restore dei dati è semplice: si ricostruisce
          l'immagine fisica del database attraverso la catena dei file di
          copia, verificando che il backup_guid di ogni file corrisponda al
          prev_guid del successivo, e poi si aggiorna il tutto cambiando lo
          stato in header di nuovo in nbak_state_normal.</para>
        </section>

        <section id="rnfb20x-util-backup-nbak-nbackup-usage">
          <title>Uso</title>

          <programlisting>
    nbackup &lt;opzioni&gt;
          </programlisting>

          <section id="rnfb20x-util-backup-nbak-nbackup-usage-options">
            <title>Opzioni valide</title>

            <programlisting>
   -L &lt;database&gt;   Blocca il database per fare la copia
   -N &lt;database&gt;   Sblocca un database precedentemente bloccato
   -F &lt;database&gt;   Sistema il database dopo la copia
   -B &lt;livello&gt; &lt;database&gt; [&lt;nomefile&gt;]  Crea un backup incrementale
   -R &lt;database&gt; [&lt;file0&gt; [&lt;file1&gt;...]]   Restore di un backup incrementale
   -U &lt;utente&gt;     Nome dell'utente
   -P &lt;password&gt;   Password dell'utente
            </programlisting>

            <note>
              <orderedlist>
                <listitem>
                  <para>&lt;database&gt; può anche specificare un alias del
                  database</para>
                </listitem>

                <listitem>
                  <para>non è supportato il backup incrementale dei database
                  multi file</para>
                </listitem>

                <listitem>
                  <para>"stdout" può essere usato come valore per
                  &lt;nomefile&gt; nella opzione -B</para>
                </listitem>
              </orderedlist>
            </note>
          </section>
        </section>
      </section>

      <section id="rnfb213-util-backup-nbak-hogging">
        <sectioninfo>
          <title>Miglioramenti in V.2.1.3</title>

          <author>
            <firstname>A.</firstname>

            <surname>Peshkov</surname>
          </author>
        </sectioninfo>

        <para>Nella versione di Firebird 2.5 beta, nelle versioni POSIX si è
        risolto un problema in cui lo strumento di copia completa di
        <emphasis>nBackup</emphasis> si impadroniva di tutte le risorse di I/O
        nel fare la copia di grandi database, bloccando completamente gli
        altri lavori sul server. Questo miglioramento è stato riportato anche
        in V.2.1.3. Ora, nBackup cerca di leggere prima dalla cache del
        sistema prima di cercare di leggere da disco, riducendo
        sostanzialmente il quantitativo di I/O necessario.</para>

        <note>
          <para>Il costo potrebbe essere un aumento variabile dal 10 al 15 per
          cento in più del tempo impiegato per effettuare una copia completa
          in condizioni di grande carico di lavoro.</para>
        </note>

        <para>Riferimenti <ulink
        url="http://tracker.firebirdsql.org/browse/CORE-2316">CORE-2316</ulink>.</para>
      </section>

      <section id="rnfb20x-util-backup-nbak-manual">
        <sectioninfo>
          <title>Manuale utente</title>

          <author>
            <firstname>P.</firstname>

            <surname>Vinkenoog</surname>
          </author>
        </sectioninfo>

        <para>Un manuale utente (ancora solo in inglese) per NBak/NBackup è
        stato già preparato. Può essere scaricato dal sito Firebird nella zona
        relativa alla documentazione: <ulink
        url="http://www.firebirdsql.org/pdfmanual/">www.firebirdsql.org/pdfmanual/</ulink>.
        Il nome del file è <function>Firebird-nbackup.pdf</function>.</para>
      </section>
    </section>

    <section id="rnfb20x-util-backup-gbak">
      <title>gbak, programma di utilità per copia, trasporto e
      recupero</title>

      <para>Un certo numero di miglioramenti sono stati apportati al programma
      di utilità <emphasis>gbak</emphasis>.</para>

      <section id="rnfb20x-util-backup-gbak-sw">
        <sectioninfo>
          <title>Comportamento e nuove funzioni</title>

          <author>
            <firstname>V.</firstname>

            <surname>Khorsun</surname>
          </author>
        </sectioninfo>

        <para>Il nuovo switch separato per la gbak</para>

        <literallayout class="monospaced">
  -RECREATE_DATABASE [OVERWRITE]
        </literallayout>

        <para>è stato aggiunto per impedire a chi non se lo aspetta di
        sovrascrivere accidentalmente il proprio database, come poteva
        facilmente accedere con la forma abbreviata del vecchio switch:</para>

        <literallayout class="monospaced">
  -R[EPLACE_DATABASE]
        </literallayout>

        <para>
          <emphasis role="bold">In sintesi:</emphasis>
        </para>

        <itemizedlist>
          <listitem>
            <para>gbak -R (oppure gbak -r) adesso applica il nuovo switch
            -R[ECREATE_DATABASE] e non sovrascrive più un database esistente
            se manca l'argomento O[VERWRITE].</para>
          </listitem>

          <listitem>
            <para>La precedente vecchia forma abbreviata -R[EPLACE_DATABASE] è
            stata cambiata in -REP[LACE_DATABASE]. Questo switch non accetta
            l'argomento O[VERWRITE].</para>
          </listitem>

          <listitem>
            <para>Lo switch -REP[LACE_DATABASE] deve essere ritenuto
            <quote>sconsigliato</quote>, cioè potrebbe diventare non più
            disponibile in una prossima futura release di Firebird.</para>
          </listitem>
        </itemizedlist>

        <para>Questa modifica comporta che ogni procedura script o periodica
        che utilizza <quote>gbak -r</quote> o <quote>gbak -R</quote> senza
        modifiche darà un'eccezione se il database esiste.</para>

        <para>Per continuare a far funzionare gli script permettendo loro di
        sovrascrivere incondizionatamente i database, bisogna modificare i
        comandi in modo da usare il nuovo switch con l'argomento OVERWRITE
        oppure la nuova forma abbreviata del vecchio switch
        -REPLACE_DATABASE.</para>
      </section>

      <section id="rnfb21-impr-gbak01">
        <sectioninfo>
          <title>gbak compatibile con tutte le versioni</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para><emphasis role="bold">(V.2.1)</emphasis> nella sua ultima
        versione, <emphasis>gbak</emphasis> può essere utilizzato per fare il
        restore di una qualsiasi precedente versione di Firebird.</para>
      </section>

      <section id="rnfb21-impr-gbak02">
        <sectioninfo>
          <title>Nascondere il nome utente e la password</title>

          <author>
            <firstname>A.</firstname>

            <surname>Peshkov</surname>
          </author>
        </sectioninfo>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-867">Richiesta
          CORE-867</ulink>
        </para>

        <para><emphasis role="bold">(V.2.1)</emphasis>
        <emphasis>gbak</emphasis> adesso cambia il primo parametro per
        impedire che si possano leggere il nome utente e la password con il
        comando <filename>ps axf</filename> il Linux.</para>
      </section>

      <section id="rnfb20x-util-backup-gbak-nosw">
        <title>gbak -V ed il parametro <quote>contatore</quote></title>

        <para>Durante lo sviluppo di Firebird 1, era stato aggiunto allo
        switch -V[erbose] della gbak un opzionale argomento numerico
        <emphasis>&lt;contatore&gt;</emphasis> sia per il backup che per il
        restore. Era stato pensato per specificare un numero ed ottenere un
        conteggio delle righe processate aggiornato ogni intervallo di righe
        specificato. Poiché procurava effetti collaterali indesiderati, è
        stato rimosso ancora prima che uscisse Firebird 1. Purtroppo, sebbene
        non lo sia mai stato, era stato documentato come esistente nelle note
        di rilascio ed in altri posto.</para>
      </section>
    </section>
  </section>

  <section id="rnfb20x-util-isql">
    <title>ISQL, utilità di interrogazione</title>

    <para>Il lavoro sull'ISQL ha comportato un gran quantitativo di correzioni
    e l'introduzione di un certo numero di utili nuove caratteristiche.</para>

    <para>Una particolarità da notare è che ora i tipi CHAR e VARCHAR definiti
    col set di caratteri OCTETS (cioè di fatto BINARY) ora mostrano il
    contenuto in formato esadecimale. Attualmente questa caratteristica non
    può essere cambiata.</para>

    <section id="rnfb20x-util-isql-sw">
      <title>Nuovi switch</title>

      <para>Sono stati aggiunti i seguenti switch alla linea di
      comando:</para>

      <section id="rnfb20x-util-isql-sw-bail">
        <sectioninfo>
          <title>-b[ail], cioè "termina"</title>

          <author>
            <firstname>D. Ivanov,</firstname>

            <surname>C. Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Lo switch -b nella linea di comando impone a isql di terminare
        riportando al sistema operativo un errore quando viene utilizzata in
        modalità non interattiva.</para>

        <para>Usando degli script in ingresso nella linea di comando, è
        completamente inappropriato permettere alla isql di continuare
        l'esecuzione di una serie di comandi dopo che è avvenuto un errore.
        Pertanto l'opzione "-b[ail]" fa terminare l'esecuzione al primo errore
        incontrato. Non verranno più eseguiti i successivi comandi dello
        script in ingresso e isql riporta un codice di errore al sistema
        operativo.</para>

        <itemizedlist>
          <listitem>
            <para>Sono stati coperti sicuramente la maggior parte dei casi, ma
            siccome questo è un lavoro in itinere, se si dovessero trovare
            eventualmente degli errori non riconosciuti dalla isql
            bisognerebbe informarne il progetto.</para>
          </listitem>

          <listitem>
            <para>Al momento non si differenzia per tipo o codice di errore,
            qualsiasi valore riportato diverso da zero deve essere considerato
            un errore. In funzione di altre opzioni (come -o, -m e -m2), isql
            può mostrare il messaggio d'errore su video oppure inviarlo ad un
            file.</para>
          </listitem>
        </itemizedlist>

        <section id="rnfb20x-util-isql-sw-bail=features">
          <title>Alcune caratteristiche</title>

          <itemizedlist>
            <listitem>
              <para>Anche se si eseguono script annidati, isql termina
              qualsiasi esecuzione e ritorna al sistema operativo non appena
              incontra un errore. Si possono ottenere script annidati quando
              uno script A richiamato nella linea di comando contiene a sua
              volta il comando INPUT per caricare lo script B e così via. Isql
              non effettua controlli culla recursione diretta o indiretta,
              pertanto se il programmatore sbaglia e lo script A chiama sé
              stesso o carica uno script B che a sua volta richiama A, isql
              continua finché esaurisce la memoria o il database riporta un
              errore, al che, se è stato attivato -bail, ferma ogni attività
              ed esce.</para>
            </listitem>

            <listitem>
              <para>Gli errori di DML sono colti durante la preparazione o
              l'esecuzione, ciò dipende dal tipo di errore.</para>
            </listitem>

            <listitem>
              <para>In molti casi, isql riporta il numero di linea in cui
              avviene un errore in un comando DML che fallisce nell'esecuzione
              di uno script. (C'è di più in <xref
              linkend="rnfb20x-util-isql-cmd-errors" />)</para>
            </listitem>

            <listitem>
              <para>Gli errori di DDL per default sono colti durante la
              preparazione o l'esecuzione, poiché isql usa AUTODDL ON per
              default. Tuttavia se si pone AUTO DLL a OFF, il server si
              lamenta solo quando lo script richiede una esplicita COMMIT e
              questo può comprendere vari comandi.</para>
            </listitem>

            <listitem>
              <para>La caratteristica può essere attivata o disattivata
              interattivamente o da script attraverso il comando</para>

              <programlisting>
  SET BAIL [ON | OFF]
 </programlisting>

              <para>Come altri comandi SET, usando solo SET BAIL semplicemente
              rovescia lo stato precedente scambiando attivato con
              disattivato. Usando solo SET mostrerà lo stato di tutti gli
              switch.</para>
            </listitem>

            <listitem>
              <para>Anche se BAIL è attivo, non significa che cambia il
              funzionamento di isql. L'altro requisito che deve essere
              soddisfatto è che la sessione non sia interattiva. Una sessione
              non interattiva è quella in cui l'utente chiama isql in modalità
              processo dandogli in ingresso uno script.</para>

              <para>
                <emphasis role="bold">Esempio</emphasis>
              </para>

              <programlisting>
  isql -b -i my_fb.sql -o results.log -m -m2
              </programlisting>

              <tip>
                <para>Tuttavia, se l'utente carica interattivamente isql e
                successivamente lancia uno script con il comando INPUT, questa
                resta ancora una sessione interattiva anche se isql sa di
                eseguire uno script.</para>
              </tip>

              <para>
                <emphasis role="bold">Esempio</emphasis>
              </para>

              <programlisting>
  isql
  Use CONNECT or CREATE DATABASE to specify a database
  SQL&gt; set bail;
  SQL&gt; input my_fb.sql;
  SQL&gt; ^Z
              </programlisting>

              <para>Qualsiasi sia il contenuto dello script, verrà eseguito
              completamente, errori e tutto, anche se l'opzione BAIL è
              abilitata.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>

      <section id="rnfb20x-util-isql-sw-stats">
        <sectioninfo>
          <title>-m2 per visualizzare statistiche e PLAN</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Questa è un'opzione da linea di comando per inviare le
        statistiche ed i PLAN allo stesso output degli altri comandi
        (eventualmente con lo switch -o[utput]).</para>

        <para>Se l'utente specifica di voler inviare i messaggi su un file,
        per anni ci sono solo state due sole possibilità:</para>

        <itemizedlist>
          <listitem>
            <para>o dalla linea di comando, con lo switch -o seguito da il
            nome di un file</para>
          </listitem>

          <listitem>
            <para>oppure col comando OUTput seguito dal nome di un file, sia
            come batch che da sessione interattiva. In qualsiasi caso,
            specificando solo OUTput è sufficiente per riavere i messaggi in
            uscita sula console. I messaggi di errore, tuttavia, sono mostrati
            alla console ma non sono re-direzionati su file.</para>
          </listitem>
        </itemizedlist>

        <para>Sulla linea di comando è stato aggiunto lo switch -m, per
        inserire i messaggi di errore nel normale flusso di uscita ovunque
        esso venga redirezionato.</para>

        <para>Questo lascia aperto ancora un caso: come far riportare dal
        server le statistiche sulle operazioni (il comando SET STAT) ed i PLAN
        SQL. I comandi SET PLAN e SET PLANONLY sono stati sempre trattati come
        messaggi diagnostici e, come tali, sono stati sempre inviati solo alla
        console.</para>

        <para>Il comando -m2 inserisce le statistiche e le informazioni dei
        PLAN ovunque venga redirezionato il flusso di uscita.</para>

        <note>
          <para>Né -m né -m2 hanno una controparte interattiva attraverso un
          comando SET. Essi possono essere usati solo come opzioni della linea
          di comando isql.</para>
        </note>
      </section>

      <section id="rnfb20x-util-isql-sw-role">
        <sectioninfo>
          <title>-r2 per passare un nome di ruolo con maiuscole e
          minuscole</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Il solo scopo di questo parametro è permettere di specificare il
        nome di un ruolo che contiene caratteri sia maiuscoli che
        minuscoli.</para>

        <itemizedlist>
          <listitem>
            <para>Lo switch di default per questo parametro è -r. Ovviamente
            in tal caso i ruoli passati nella linea di comando sono convertiti
            tutti in maiuscolo</para>
          </listitem>

          <listitem>
            <para>Con lo switch -r2, il ruolo viene passato al motore
            esattamente come è scritto nella linea di comando.</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>

    <section id="rnfb20x-util-isql-cmd">
      <title>Nuovi comandi e miglioramenti</title>

      <para>I seguenti comandi sono stati aggiunti o migliorati.</para>

      <section id="rnfb21-impr-isql1">
        <sectioninfo>
          <title>Ctrl-C per interromepre il flusso di
          un'interrogazione</title>

          <authorgroup>
            <author>
              <firstname>M.</firstname>

              <surname>Kubecek</surname>
            </author>

            <author>
              <firstname>A.</firstname>

              <surname>dos Santos Fernandes</surname>
            </author>
          </authorgroup>
        </sectioninfo>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-704">Richiesta
          CORE-704</ulink>
        </para>

        <para><emphasis role="bold">(V. 2.1)</emphasis> In una sessione
        interattiva di isql ora si può interrompere una SELECT usando Ctrl-C.
        Notare, questo semplicemente blocca il recupero delle righe dalla
        memoria di ingresso, non cancella l'esecuzione della query.</para>
      </section>

      <section id="rnfb21-impr-isql2">
        <sectioninfo>
          <title>Estensione del comando SHOW SYSTEM di isql</title>

          <author>
            <firstname>A.</firstname>

            <surname>dos Santos Fernandes</surname>
          </author>
        </sectioninfo>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-978">Richiesta
          CORE-978</ulink>
        </para>

        <para><emphasis role="bold">(V. 2.1)</emphasis> Il comando SHOW
        &lt;tipo_di_oggetto&gt; serve per mostrare all'utente tutti gli
        oggetti di quel tipo. Il comando SHOW SYSTEM era stato pensato per
        mostrare gli oggetti di sistema, ma fin'ora visualizzava solo le
        tabelle di sistema. Ora elenca le UDF predefinite di sistema
        incorporate in FB 2.</para>

        <para>Può essere migliorato per elencare anche le viste di sistema nel
        caso ne vengano create nel futuro.</para>
      </section>

      <section id="rnfb21-impr-isql3">
        <sectioninfo>
          <title>Il comando SHOW COLLATIONS</title>

          <author>
            <firstname>A.</firstname>

            <surname>dos Santos Fernandes</surname>
          </author>
        </sectioninfo>

        <para><emphasis role="bold">(V. 2.1)</emphasis> Elenca tutte le coppie
        set di caratteri/ordinamenti dichiarati nel database.</para>
      </section>

      <section id="rnfb20x-util-isql-cmd-sethead">
        <sectioninfo>
          <title>SET HEAD[ing]</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Alcuni ritengono utile eseguire in isql una SELECT ed ottenerne
        il risultato in un file, per poterlo elaborare successivamente in un
        secondo momento, specie se il numero delle colonne rende la
        visualizzazione di isql poco pratica. Tuttavia, isql per default
        stampa continuamente le testate di colonna e in tal caso sono una
        seccatura.</para>

        <para>Pertanto, la stampa delle testate che prima era una
        caratteristica fissa, ora è un'opzione impostabile interattivamente o
        da script con il comando isql</para>

        <programlisting>
  SET HEADing [ON | OFF]
 </programlisting>

        <para>Come per altri comensi SET, usare semplicemente SET HEAD scambia
        lo stato fra attivo e non attivo.</para>

        <note>
          <para>Non esiste un'opzione nella linea di comando per impostare le
          testate.</para>
        </note>

        <para>Usando il solo comando SET mostra lo stato di SET HEAD, insieme
        a tutti gli altri switch che possono essere impostati in isql.</para>
      </section>

      <section id="rnfb20x-util-isql-cmd-sqlda">
        <sectioninfo>
          <title>SET SQLDA_DISPLAY ON/OFF</title>

          <author>
            <firstname>A.</firstname>

            <surname>dos Santos Fernandes</surname>
          </author>
        </sectioninfo>

        <para>Il comando SQLDA_DISPLAY mostra i parametri di SQLDA in ingresso
        per le INSERT, UPDATE e DELETE. Era precedentemente disponibile solo
        nei pacchetti di DEBUG e adesso è stato inserito anche nei pacchetti
        pubblici. Visualizza le informazioni delle SQLVAR. Ogni SQLVAR
        rappresenta un campo nel XSQLDA, che è la struttura principale usata
        nelle API di FB per comunicare con i client trasferendo i dati da e
        per il server.</para>

        <note>
          <para>Lo stato di questa opzione non è visualizzato nella lista
          generata con il comando<literal> SET; </literal> usato in isql per
          visualizzare la maggior parte delle opzioni.</para>
        </note>
      </section>

      <section id="rnfb20x-util-isql-cmd-settrans">
        <sectioninfo>
          <title>SET TRANSACTION migliorato</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Il comando SET TRANSACTION è stato migliorato in modo tale che
        adesso sono supportate tutte le opzioni di TPB:</para>

        <itemizedlist>
          <listitem>
            <para>NO AUTO UNDO</para>
          </listitem>

          <listitem>
            <para>IGNORE LIMBO</para>
          </listitem>

          <listitem>
            <para>LOCK TIMEOUT &lt;numero&gt;</para>
          </listitem>
        </itemizedlist>

        <para>
          <emphasis>Esempio</emphasis>
        </para>

        <programlisting>
  SET TRANSACTION WAIT SNAPSHOT NO AUTO UNDO LOCK TIMEOUT 10
        </programlisting>

        <para>Vedere anche la documentazione in
        <citetitle>doc/sql.extensions/README.set_transaction.txt</citetitle>.</para>
      </section>

      <section id="rnfb20x-util-isql-cmd-version">
        <sectioninfo>
          <title>SHOW DATABASE riporta anche la versione di ODS</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>La versione ODS (On-Disk Structure) viene visualizzata con il
        comando SHOW DATABASE (C. Valderrama)</para>
      </section>

      <section id="rnfb20x-util-isql-cmd-errors"
               xreflabel="error line numbers">
        <sectioninfo>
          <title>Possibilità di mostrare il numero di linea in cui vi è un
          errore in uno script</title>

          <author>
            <firstname>C.</firstname>

            <surname>Valderrama</surname>
          </author>
        </sectioninfo>

        <para>Nelle versioni precedenti, l'unico modo possibile per sapere
        dove uno script cadeva in errore era adoperare il comando -e per
        vedere i comandi, -o per inviare l'uscita su un file e -m per inviare
        anche i messaggi di errore su quel file. In tal modo si potevano
        vedere i comandi <emphasis>isql</emphasis> che venivano eseguiti e i
        possibili errori esistenti. Lo script continuava fino alla fine,
        ovviamente. Per alcuni errori DSQL, il server ora comunica il numero
        di linea relativo al singolo comando (o frase) che sta' eseguendo. Per
        altri errori, si può solo sapere che un certo comando ha
        problemi.</para>

        <para>Con l'opzione -b già descritta sopra in (1), l'utente ha la
        possibilità di fermare lo script isql non appena rileva un errore, ma
        si ha ancora bisogno dell'opzione eco ( -e -o ) su un file di uscita
        per sapere quale comando ha causato l'errore.</para>

        <para>Ora, la possibilità di segnalare la linea nello script che
        provoca un errore permette all'utente di trovare nello script il punto
        incriminato. Se il server indica la linea e la colonna si può
        identificare esattamente dove nello script DML è avvenuto il problema.
        Quando il server invece indica semplicemente un errore, si ha la linea
        iniziale, relativa all'intero script, del comando che ha causato un
        problema.</para>

        <para>Questo funziona anche in script annidati, in particolare, se lo
        script SA include lo script SB e SB crea un problema, il numero di
        linea è relativo a SB. Alla fine di SB, isql continua eseguendo il
        resto di SA e pertanto isql ritorna a contare le linee di SA, poiché
        ogni file ha un contatore di linee distinto. Si dice che uno script SA
        include lo script SB quando in SA si usa il comando INPUT per caricare
        SB.</para>

        <para>Le linee sono contate nel modo in cui riesce a farlo il
        substrato di I/O, in funzione cioè di come riesce a separare le linee.
        Nei sistemi in cui esiste EDITLINE, una linea è quanto la readline()
        recupera in una singola chiamata. Il limite per la lunghezza massima
        di una linea non cambia e rimane fissato a 32767 byte.</para>
      </section>

      <section id="rnfb20x-util-isql-cmd-help">
        <sectioninfo>
          <title>Migliorato l'aiuto da comando</title>

          <author>
            <firstname>M.</firstname>

            <surname>Kubecek</surname>
          </author>
        </sectioninfo>

        <para>Se si adoperano dei parametri sconosciuti, isql mostra tutti i
        suoi parametri da linea di comando e la relativa spiegazione invece
        sella semplice lista di switch permessi.</para>

        <programlisting>
opt/firebird/bin] isql -?
Unknown switch: ?
usage:    isql [options] [&lt;database&gt;]
        -a(all)                 extract metadata incl. legacy non-SQL tables
        -b(ail)                 bail on errors (set bail on)
        -c(ache) &lt;num&gt;          number of cache buffers
        -ch(arset) &lt;charset&gt;    connection charset (set names)
        -d(atabase) &lt;database&gt;  database name to put in script creation
        -e(cho)                 echo commands (set echo on)
        -ex(tract)              extract metadata
        -i(nput) &lt;file&gt;         input file (set input)
        -m(erge)                merge standard error
        -m2                     merge diagnostic
        -n(oautocommit)         no autocommit DDL (set autoddl off)
        -now(arnings)           do not show warnings
        -o(utput) &lt;file&gt;        output file (set output)
        -pag(elength) &lt;size&gt;    page length
        -p(assword) &lt;password&gt;  connection password
        -q(uiet)                do not show the message "Use CONNECT..."
        -r(ole) &lt;role&gt;          role name
        -r2 &lt;role&gt;              role (uses quoted identifier)
        -sqldialect &lt;dialect&gt;   SQL dialect (set sql dialect)
        -t(erminator) &lt;term&gt;    command terminator (set term)
        -u(ser) &lt;user&gt;          user name
        -x                      extract metadata
        -z                      show program and server version
        </programlisting>
      </section>
    </section>
  </section>

  <section id="rnfb20x-util-gsec">
    <title>gsec per l'autenticazione</title>

    <para>Le modifiche all'utilità <emphasis>gsec</emphasis> includono:</para>

    <section id="rnfb20x-util-gsec-returncode">
      <sectioninfo>
        <title>valore di ritorno per gsec</title>

        <author>
          <firstname>C.</firstname>

          <surname>Valderrama</surname>
        </author>
      </sectioninfo>

      <para><emphasis>gsec</emphasis> adesso riporta un codice di errore
      quando non viene usato interattivamente. Zero indica successo; ogni
      altro valore indica problemi.</para>
    </section>
  </section>

  <section id="rnfb20x-util-gfix">
    <title>gfix utilità del server</title>

    <para>Le modifiche apportate alla utilità <emphasis>gfix</emphasis>
    includono:</para>

    <section id="rnfb20x-util-gfix-shut" xreflabel="New Shutdown Modes">
      <sectioninfo>
        <title>Nuovi stati (o modi) di shutdown</title>

        <author>
          <firstname>N. Samofatov,</firstname>

          <surname>D. Yemanov</surname>
        </author>
      </sectioninfo>

      <para>Le opzioni di <function>gfix -shut[down]</function> sono state
      estese per includere i due stati o modi extra per gestire lo
      shutdown.</para>

      <para>
        <emphasis role="bold">Nuova sintassi</emphasis>
      </para>

      <programlisting>
      gfix &lt;comando&gt; [&lt;stato&gt;] [&lt;opzioni&gt;]

  &lt;comando&gt; ::= {-shut | -online}
  &lt;stato&gt; ::= {normal | multi | single | full}
  &lt;opzioni&gt; ::= {-force &lt;timeout&gt; | -tran | -attach}
     </programlisting>

      <para>- stato <quote>normal</quote> = database online</para>

      <para>- stato <quote>multi</quote> = modo shutdown multi-utenza (quello
      compatibile, permesse connessioni illimitate da
      SYSDBA/proprietario)</para>

      <para>- stato <quote>single</quote> = shutdown in singola-utenza (solo
      una connessione permessa, usato dal processo di restore)</para>

      <para>- stato <quote>full</quote> = shutdown completo o esclusivo (non
      sono permesse connessioni)</para>

      <note>
        <para><quote>Multi</quote> è lo stato di default per il comando -shut,
        <quote>normal</quote> invece quello del comando -online.</para>
      </note>

      <para>I modi possono essere modificati sequenzialmente secondo questo
      ordine:</para>

      <blockquote>
        <para>normal &lt;-&gt; multi &lt;-&gt; single &lt;-&gt; full</para>
      </blockquote>

      <para>
        <emphasis role="bold">Esempi</emphasis>
      </para>

      <programlisting>
  gfix -shut single -force 0
  gfix -shut full -force 0
  gfix -online single
  gfix -online
      </programlisting>

      <para>Non si può usare <function>-shut</function> per far salire un
      database di un livello <quote>più in linea</quote> e non si può usare
      <function>-online</function> per rendere un database più protetto (viene
      dato un errore).</para>

      <para>Queste sequenze sono pertanto proibite:</para>

      <programlisting>
  gfix -shut single -force 0
  gfix -shut multi -force 0

  gfix -online
  gfix -online full

  gfix -shut -force 0
  gfix -online single
      </programlisting>
    </section>
  </section>

  <section id="rnfb21-impr-blds">
    <title>Pacchetti e installazioni</title>

    <section id="rnfb21-impr-instname">
      <sectioninfo>
        <title>Aggiunto a instsvc.exe un parametro per il nome
        dell'istanza</title>

        <author>
          <firstname>D.</firstname>

          <surname>Yemanov</surname>
        </author>
      </sectioninfo>

      <para>
        <ulink url="http://tracker.firebirdsql.org/browse/CORE-673">Richiesta
        CORE-673</ulink>
      </para>

      <para><emphasis role="bold">(V.2.1)</emphasis>
      <filename>instsvc.exe</filename> adesso permette installazioni multi
      istanza.</para>
    </section>

    <section id="rnfb21-impr-instdoc">
      <sectioninfo>
        <title>Revisionata la documentazione di instalzzazione su
        Win32</title>

        <author>
          <firstname>P.</firstname>

          <surname>Reeves</surname>
        </author>
      </sectioninfo>

      <para><emphasis role="bold">(V.2.1)</emphasis> La documentazione per
      l'installazione a linea di comando su Windows è stata rivista. Vedere
      <filename>doc/install_windows_manually.txt</filename>.</para>

      <section id="rnfb21-impr-wininst">
        <title>Aiuto sugli switch a linea di comando</title>

        <para>
          <ulink
          url="http://tracker.firebirdsql.org/browse/CORE-548">Richiesta
          CORE-548</ulink>
        </para>

        <para><emphasis role="bold">(V.2.1)</emphasis> L'aiuto in linea è
        disponibile sugli switch dell'installazione a linea di comando su
        Windows.</para>
      </section>
    </section>

    <section id="rnfb21-impr-gentoo">
      <sectioninfo>
        <title>Riconoscimento di Gentoo/FreeBSD durante
        l'installazione</title>

        <author>
          <firstname>A.</firstname>

          <surname>Peshkov</surname>
        </author>
      </sectioninfo>

      <para>
        <ulink url="http://tracker.firebirdsql.org/browse/CORE-1047">Richiesta
        CORE-1047</ulink>
      </para>

      <para>Durante la configurazione sono ora riconosciuti sia Gentoo che
      FreeBSD, facendo in modo che l'installazione possa funzionare con
      successo su queste piattaforme.</para>
    </section>
  </section>
</chapter>