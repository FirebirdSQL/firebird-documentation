<?xml version="1.0" encoding="UTF-8"?>
<article id="docbuildhowto-ru" lang="ru">
  <articleinfo>
    <title>Извлечение исходных файлов и построение документации СУБД Firebird (модуль manual)</title>

    <titleabbrev>Как сгенерировать документацию Firebird</titleabbrev>

    <author>
      <firstname>Paul</firstname>

      <surname>Vinkenoog</surname>
    </author>

    <edition>12 декабря 2006 – Версия документа 1.4-ru</edition>

    <othercredit class="translator">
      <firstname>Василий</firstname>
      <surname>Овчинников</surname>
      <contrib>Перевод документа на русский язык</contrib>
    </othercredit>
  </articleinfo>

  <section id="docbuildhowto-intro-ru">
    <title>Введение: цель данного руководства</title>

    <para>Здесь приведены пошаговые инструкции для извлечения и сборки модуля
    документации с сайта Firebird Project на сервере SourceForge.</para>

    <section id="docbuildhowto-intro-what-ru">
      <title>Что же это такое - "модуль документации"?</title>

      <para>Модуль документации - это часть проекта Firebird на сервере SourceForge.
      Это результат коллективного творчества, имеющий своей целью создание
      наиболее полного комплекта документации по СУБД Firebird (система уравления
      базами данных).</para>

      <para>Необходимо понимать, что модуль документации содержит документы не
      в законченном виде, а <emphasis>исходные тексты</emphasis> этих
      документов. Если быть более точным, то исходные тексты в формате Docbook
      XML. Для получения документации в удобочитаемой форме, в которой она
      может быть опубликована в Интернете, эти исходные тексты нуждаются в
      предварительной обработке (<firstterm>сборке,
      генерации, построению</firstterm>).</para>
    </section>

    <section id="docbuildhowto-intro-otherdocs-ru">
      <title>Существует ли еще какая-нибудь документация по Firebird кроме
      указанного модуля документации?</title>

      <para>Да! В настоящее время существует много полезных документов вне
      модуля документации СУБД Firebird. Еще по-прежнему далек тот момент, когда
      можно будет сказать, что модуль документации завершен и туда больше
      нечего добавить. В действительности, одной из причин написания данного
      руководства является то, что оно может помочь потенциальным техническим
      писателям (авторам) преодолеть свой первый рубеж и присоединиться к подпроекту
      документации.</para>

      <para>Если вам нужна уже готовая и подробная документация по СУБД Firebird,
      вы можете найти ее по следующим адресам в Интернете:</para>

      <itemizedlist>
        <listitem>
          <para><ulink
          url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink> –
          сайт IBPhoenix.</para>

          <para>Следуйте по ссылке <literal>Downloads -&gt; Main
          Downloads</literal> и <literal>Development -&gt; General
          Documentation</literal>.</para>
        </listitem>

        <listitem>
          <para><ulink
          url="http://www.firebirdsql.org/index.php?op=doc">http://www.firebirdsql.org/index.php?op=doc</ulink>
          – страница документации проекта СУБД Firebird.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="docbuildhowto-intro-readydocs-ru">
      <title>Нужно ли мне генерировать документацию из
      исходных файлов? Существует ли более простой путь?</title>

      <para>Конечно, такой более простой путь существует. Как только
      определенная часть документации признаётся соответствующей
      действительности и не содержащей ошибок, а, как правило, это происходит
      после нескольких правок и обновлений, ее публикуют на сайте СУБД Firebird в
      формате PDF и HTML. Все документы, которые мы опубликовали, можно
      скачать по ссылкам для версий HTML и PDF:</para>

      <blockquote>
        <para><ulink
        url="http://www.firebirdsql.org/manual/">http://www.firebirdsql.org/manual/</ulink></para>

        <para><ulink
        url="http://www.firebirdsql.org/pdfmanual/">http://www.firebirdsql.org/pdfmanual/</ulink></para>
      </blockquote>

      <para>Или посетив домашнюю страницу подпроекта документации
      (Documentation Subproject):</para>

      <blockquote>
        <para><ulink
        url="http://www.firebirdsql.org/index.php?op=devel&amp;sub=doc">http://www.firebirdsql.org/index.php?op=devel&amp;sub=doc</ulink></para>
      </blockquote>

      <para>Вам может понадобиться извлечь модуль документации и сгенерировать документы на
      его основе самостоятельно тогда, и только тогда, когда:</para>

      <itemizedlist>
        <listitem>
          <para>вы хотите изучить документацию в ее текущем состоянии (будьте
          осторожны, так как самая последняя версия конкретного документа может
          быть еще неопубликована, в том числе и по причине присутствия в ней
          ошибок);</para>
        </listitem>

        <listitem>
          <para>вы желаете предложить свою помощь в написании документации;</para>
        </listitem>

        <listitem>
          <para>вам интересно разобраться в процедуре генерации документов из
          исходных текстов и/или вам не интересно просто скачивать их в
          готовом виде.</para>
        </listitem>
      </itemizedlist>

      <para>Если хотя бы один из вышеперечисленных пунктов вам подходит, то
      это руководство для вас.</para>
    </section>
  </section>

  <section id="docbuildhowto-getting-the-module-ru">
    <title>Извлекаем модуль документации с сервера SourceForge</title>

    <titleabbrev>Извлекаем модуль с SF</titleabbrev>

    <para>Модуль документации - это часть хранилища Firebird CVS на сервере
    SourceForge. Для его извлечения вам необходим так называемый
    <firstterm>клиент CVS</firstterm>. Этот раздел содержит описания, где его
    найти и как впоследствии извлечь с его помощью модуль документации.
    Собственно сам процесс сборки документации описан далее в разделе
    <xref linkend="docbuildhowto-building-the-docs-ru" />.</para>

    <section id="docbuildhowto-whatiscvs-ru">
      <title>Что такое CVS?</title>

      <para>CVS - это Concurrent Versions System (система контроля версий).
      Это инструмент управления разработкой программного обеспечения,
      применимый как для одного разработчика, так и для коллектива
      разработчиков. Практически все проекты на SourceForge используют CVS для
      хранения исходных кодов и работой над ними. Дерево Firebird CVS
      разделено на несколько так называемых <firstterm>модулей</firstterm>,
      одним из которых и является модуль документации (manual).</para>
    </section>

    <section id="docbuildhowto-cvs-clients-ru">
      <title>Клиенты CVS</title>

      <para>Для того, чтобы извлечь какой-либо модуль из хранилища CVS, вам
      необходим клиент CVS. Таковых существует великое множество, и вы можете найти
      клиента для работы в среде практически любой операционной системы. Вот
      список ссылок на клиентов CVS для наиболее популярных ОС:</para>

      <itemizedlist>
        <listitem>
          <para>Linux, BSD и прочие Unix</para>

          <itemizedlist>
            <listitem>
              <para>Клиент CVS для работы из командной строки, как правило,
              уже входит в состав ОС. Если нет, то используйте инструменты
              администрирования для его установки. Обычно CVS относят к
              категории инструментов разработки. Если у вас не получилось установить клиент, то
              скачайте его отсюда: <ulink
              url="http://www.cvshome.org/">http://www.cvshome.org</ulink> (на английском языке),
              <ulink
              url="http://ru.wikipedia.org/wiki/CVS">http://ru.wikipedia.org/wiki/CVS</ulink> (на русском
              языке)</para>
            </listitem>

            <listitem>
              <para>gCvs – графический интерфейс для CVS, скачать можно здесь:
              <ulink
              url="http://cvsgui.sourceforge.net/download.html">http://cvsgui.sourceforge.net/download.html</ulink></para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Windows</para>

          <itemizedlist>
            <listitem>
              <para>Клиент CVS с интерфейсом командной строки: <ulink
              url="http://www.cvshome.org/">http://www.cvshome.org</ulink> (на английском языке),
              <ulink
              url="http://ru.wikipedia.org/wiki/CVS">http://ru.wikipedia.org/wiki/CVS</ulink>
              (на русском языке)</para>
            </listitem>

            <listitem>
              <para>WinCVS: многофункциональный, но, возможно, немного сложный
              в освоении для начинающих клиент. <ulink
              url="http://cvsgui.sourceforge.net/download.html">http://cvsgui.sourceforge.net/download.html</ulink></para>
            </listitem>

            <listitem>
              <para>TortoiseCVS: плагин (расширение) для Windows Explorer. Замечательный,
              интуитивно понятный интерфейс. В нем не реализованы многие
              продвинутые функции CVS, но, быть может, это как раз именно то,
              что вам нужно. <ulink
              url="http://tortoisecvs.sourceforge.net/download.shtml">http://tortoisecvs.sourceforge.net/download.shtml</ulink></para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Mac OS X</para>

          <itemizedlist>
            <listitem>
              <para>Mac OS X имеет в своем составе клиент CVS для командной
              строки.</para>
            </listitem>

            <listitem>
              <para>Fink (инструменты Unix для OS X) содержит более новую версию
              клиента CVS. <ulink
              url="http://fink.sourceforge.net/download/index.php">http://fink.sourceforge.net/download/index.php</ulink></para>
            </listitem>

            <listitem>
              <para>MacCvsX по ссылке <ulink
              url="http://cvsgui.sourceforge.net/download.html">http://cvsgui.sourceforge.net/download.html</ulink>
              – то же самое, что и gCvs и WinCvs. Замечание: версия для OS X
              все еще является бета-версией.</para>
            </listitem>

            <listitem>
              <para>MacCVS Pro по ссылке <ulink
              url="http://sourceforge.net/projects/maccvspro/">http://sourceforge.net/projects/maccvspro/</ulink></para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Mac Classic</para>

          <itemizedlist>
            <listitem>
              <para>MacCvs по ссылке <ulink
              url="http://cvsgui.sourceforge.net/download.html">http://cvsgui.sourceforge.net/download.html</ulink>
              – то же самое, что и gCvs и WinCvs</para>
            </listitem>

            <listitem>
              <para>MacCVS Pro по ссылке <ulink
              url="http://sourceforge.net/projects/maccvspro/">http://sourceforge.net/projects/maccvspro/</ulink></para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para>Прочие ОС</para>

          <itemizedlist>
            <listitem>
              <para>Попробуйте поискать на сайтах <ulink
              url="http://www.cvshome.org/">http://www.cvshome.org</ulink>,
              <ulink url="http://www.google.com">google</ulink>, или задайте
              вопрос в группе новостей gnu.cvs.help или в почтовой конференции
              firebird-docs.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </itemizedlist>

      <para>Скачайте один из вышеперечисленных клиентов CVS и установите его
      согласно прилагаемым инструкциям. После этого вы готовы к извлечению
      модуля документации с сервера SourceForge.</para>
    </section>

    <section id="docbuildhowto-checking-out-ru">
      <title>Извлечение модуля документации</title>

      <para>Вы можете извлечь модуль документации двумя путями: как анонимный
      пользователь или с помощью вашего регистрационного имени на сервере SourceForge.
      Второй способ называют также SSH-извлечение, поскольку он использует SSH
      (Secure SHell - безопасная оболочка команд), или EXT-извлечение, поскольку
      SSH используется как внешний (EXTernal) протокол.</para>

      <para>Анонимно извлекать модули может любой пользователь.
      Участники проекта СУБД Firebird могут дополнительно указать при извлечении
      свое регистрационное имя на сервере SourceForge. (Если вы зарегистрированы на SF,
      но не являетесь участником проекта СУБД Firebird, то вы можете извлекать
      модули только как анонимный пользователь.)</para>

      <para>Если вы являетесь участником проекта, возможно вы пожелаете
      извлекать модули используя логин SF, так как</para>

      <orderedlist numeration="loweralpha">
        <listitem>
          <para>при анонимном извлечении вы не всегда получаете самые
          последние версии файлов (задержка может составлять от нескольких
          часов до нескольких дней);</para>
        </listitem>

        <listitem>
          <para>если вы хотите вносить изменения, то вы
          <emphasis>обязаны</emphasis> выполнять извлечение как
          зарегистрированный пользователь SF, иначе вы не получите возможности
          сохранять изменения на сервере (или, другими словами, загружать измененные файлы на
          сервер).</para>
        </listitem>
      </orderedlist>

      <para>Мы опишем оба варианта в соответствующих подразделах, но начнем с
      анонимного. <link linkend="docbuildhowto-ssh-checkout-ru">Нажмите
      сюда</link> для перехода к подразделу, описывающему
      SSH-извлечение.</para>

      <warning>
        <para>Убедитесь, что ваш брандмауэр (firewall) разрешает соединения TCP, порт 2401. Иначе вы
        не сможете установить соединение с хранилищем CVS, и при попытке подключения
        будете получать сообщение об истечении времени ожидания (time-out)
        для соединения.</para>
      </warning>

      <section id="docbuildhowto-anon-checkout-ru">
        <title>Анонимное извлечение</title>

        <para>Конкретная процедура извлечения зависит от используемого
        CVS-клиента. Мы приведем подробные рекомендации для клиентов CVS
        с интерфейсом командной строки, и дадим общие рекомендации для прочих
        CVS-клиентов.</para>

        <section id="docbuildhowto-anon-checkout-commandline-ru">
          <title>Анонимное извлечение с использованием CVS-клиента командной
          строки</title>

          <orderedlist>
            <listitem>
              <para>Если вы работаете в графической среде, откройте окно
              сеанса командной строки.</para>
            </listitem>

            <listitem>
              <para>Во-первых, необходимо выполнить проверку пароля на сервере
              и сохранить пароль локально. Наберите следующую команду:</para>

              <blockquote>
                <para><command>cvs
                -d:pserver:anonymous@firebird.cvs.sourceforge.net:/cvsroot/firebird
                login</command></para>
              </blockquote>

              <para>Когда будет запрошен ввод пароля, то просто нажмите клавишу
              <keysym>Enter</keysym>, так как пароль для пользователя "anonymous"
              не определен. Ваш CVS-клиент запомнит пароль для дальнейшего
              использования, так что вы можете пропускать этот шаг в
              дальнейшем, если только не будете пользоваться доступом к другим
              CVS и/или использовать другое имя/пароль для доступа.</para>
            </listitem>

            <listitem>
              <para>Теперь можно сделать запрос на извлечение модуля
              документации. Наберите команду (в одной в строке):</para>

              <blockquote>
                <para><command>cvs -z6
                -d:pserver:anonymous@firebird.cvs.sourceforge.net:/cvsroot/firebird
                checkout manual</command></para>
              </blockquote>

              <para>Если все пройдет нормально, то в вашем текущем каталоге
              появится подкаталог с именем <filename>manual</filename>, а в
              нем будут размещены исходные файлы (тексты) модуля. Теперь можно
              приступить к сборке документации – читайте далее раздел <link
              linkend="docbuildhowto-building-the-docs-ru"><citetitle>Генерация
              документации Firebird</citetitle></link>.</para>
            </listitem>
          </orderedlist>
        </section>

        <section id="docbuildhowto-anon-checkout-otherclients-ru">
          <title>Анонимное извлечение с использованием других
          CVS-клиентов</title>

          <para>Практически невозможно дать точные инструкции для каждого из
          CVS-клиентов - их очень много. Обратитесь к документации
          используемого вами CVS-клиента. Перечень полей, необходимых к
          заполнению на этапе настройки, скорее всего будет выглядеть примерно
          так:</para>

          <variablelist>
            <varlistentry>
              <term>protocol (протокол)</term>

              <listitem>
                <para>должен быть установлен как pserver (сервер
                паролей)</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>authentication method (метод авторизации)</term>

              <listitem>
                <para>такой же, как и протокол</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>server (сервер)</term>

              <listitem>
                <para>firebird.cvs.sourceforge.net</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>repository (хранилище CVS)</term>

              <listitem>
                <para>/cvsroot/firebird</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>user name (имя пользователя)</term>

              <listitem>
                <para>anonymous</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>module name (имя модуля)</term>

              <listitem>
                <para>manual</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>cvsroot</term>

              <listitem>
                <para>обычно это комбинация параметров server (сервер) и repository (хранилище),
                может формироваться автоматически, иногда указывается имя
                пользователя (как в WinCvs):
                <literal>firebird.cvs.sourceforge.net:/cvsroot/firebird</literal>
                или
                <literal>anonymous@firebird.cvs.sourceforge.net:/cvsroot/firebird</literal></para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para>Заполните необходимые данные и дайте клиенту команду
          извлечения. Если все пройдет нормально, то вы получите копию
          модуля на своем компьютере, и теперь можете приступать к сборке
          (генерации) документации. Читайте далее раздел <link
          linkend="docbuildhowto-building-the-docs-ru"><citetitle>Генерация
          документации Firebird</citetitle></link>.</para>
        </section>
      </section>

      <section id="docbuildhowto-ssh-checkout-ru">
        <title>SSH-извлечение (с использованием регистрационного имени
        SourceForge)</title>

        <para>Для SSH-извлечения необходимо наличие в системе установленного
        SSH-клиента. В большинстве вариантов ОС Unix, также и в Mac OS X,
        <application>OpenSSH</application> присутствует по умолчанию. Если он
        не установлен, то выполните его установку из используемого вами
        дистрибутива ОС, или скачайте с сайта <ulink
        url="http://www.openssh.com">http://www.openssh.com</ulink>. На этом
        сайте вы также найдете ссылки на другие реализации SSH для ОС, не
        поддерживаемых OpenSSH. Имейте в виду, что установка и настройка SSH на
        некоторых платформах (в том числе и Windows) является весьма непростой
        задачей. Вы можете существенно облегчить себе жизнь, выбрав
        CVS-клиента со встроенной поддержкой SSH, такого как
        <application>TortoiseCVS</application> для Windows.</para>

        <para>Как и в случае анонимного извлечения, конкретная процедура
        SSH-извлечения отличается для различных CVS-клиентов. Снова мы
        приведем подробные рекомендации для клиентов CVS с интерфейсом командной
        строки и дадим общие рекомендации для прочих CVS-клиентов.</para>

        <warning>
          <para>Вам может потребоваться время от времени менять свой пароль на
          SourceForge. В этом случае при установлении соединения вы получите
          сообщение об ошибке 'Permission denied, please try again' (Доступ
          запрещен, пожалуйста, попробуйте еще раз). Если это произошло и вы
          уверены в правильности пароля, то зайдите на страницу
          SourceForge.org <ulink
          url="http://sourceforge.net/index.php">http://sourceforge.net/index.php</ulink>
          и попытайтесь зарегистрироваться со своим именем и паролем,
          использованным вами при подключении к CVS-хранилищу. Если срок
          действия вашего пароля истек, то вам будет предложено изменить
          его.</para>

          <para>После изменения пароля на SourceForge необходимо завершить
          текущий сеанс SSH и начать новый, иначе вы по-прежнему не
          сможете подключиться, даже с новым паролем.</para>
        </warning>

        <section id="docbuildhowto-ssh-checkout-commandline-ru">
          <title>SSH-извлечение с использованием CVS-клиента командной строки</title>

          <orderedlist>
            <listitem>
              <para>Если вы работаете в графической среде, откройте окно
              сеанса командной строки.</para>
            </listitem>

            <listitem>
              <para>Во-первых, убедитесь, что существует переменная окружения
              <envar>CVS_RSH</envar> и что она имеет значение
              <quote>ssh</quote> (или иное, соответствующее вашему
              SSH-клиенту). Конкретная команда, выполняемая для этого, зависит
              от используемой ОС. В случае использования командной строки
              DOS/Windows наберите <command>set CVS_RSH=ssh</command>. В
              случае с Linux/bash: <command>export
              CVS_RSH=ssh</command>.</para>

              <para>Если захотите, чтобы эта переменная окружения
              присутствовала в системе постоянно, то ваши действия будут
              зависеть от того, под упралением какой ОС вы работаете.
              Обратитесь, в случае необходимости, к документации по
              используемой вами ОС.</para>
            </listitem>

            <listitem>
              <para>Сделайте запрос на извлечение модуля документации следующей
              командой (в одной строке, вместо
              <replaceable>username</replaceable> укажите ваше регистрационное
              имя на сервере SourecForge):</para>

              <blockquote>
                <para><command>cvs -z6
                -d:ext:<replaceable>username</replaceable>@firebird.cvs.sourceforge.net:/cvsroot/firebird
                checkout manual</command></para>
              </blockquote>

              <para>По запросу введите пароль.</para>

              <para>Если все пройдет нормально, то в вашем текущем каталоге
              появится подкаталог с именем <filename>manual</filename>, а
              исходные файлы (тексты) модуля будут размещены в нем. Теперь можно
              приступить к сборке (генерации) документации – читайте далее раздел <link
              linkend="docbuildhowto-building-the-docs-ru"><citetitle>Генерация
              документации Firebird</citetitle></link>.</para>
            </listitem>
          </orderedlist>
        </section>

        <section id="docbuildhowto-ssh-checkout-otherclients-ru">
          <title>SSH-извлечение с использованием других CVS-клиентов</title>

          <para>Практически невозможно дать точные инструкции для каждого из
          CVS-клиентов - их очень много. Обратитесь к документации
          используемого вами CVS-клиента. Перечень полей, необходимых к
          заполнению на этапе настройки, скорее всего, будет выглядеть
          примерно так:</para>

          <variablelist>
            <varlistentry>
              <term>protocol (протокол)</term>

              <listitem>
                <para>должен иметь значение ext (или SSH, или SSL)</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>authentication method (метод авторизации)</term>

              <listitem>
                <para>такой же, как и протокол</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>server (сервер)</term>

              <listitem>
                <para>firebird.cvs.sourceforge.net</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>repository (хранилище CVS)</term>

              <listitem>
                <para>/cvsroot/firebird</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>user name (имя пользователя)</term>

              <listitem>
                <para>ваше имя пользователя для сервера SourceForge</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>module name (имя модуля)</term>

              <listitem>
                <para>manual</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>cvsroot</term>

              <listitem>
                <para>обычно это комбинация параметров server (сервер) и repository (хранилище),
                может формироваться автоматически, иногда даже с указанием
                имени пользователя (как в WinCvs):
                <literal>firebird.cvs.sourceforge.net:/cvsroot/firebird</literal>
                или
                <literal>anonymous@firebird.cvs.sourceforge.net:/cvsroot/firebird</literal></para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para>Заполните необходимые данные и дайте клиенту команду
          извлечения. Если все пройдет нормально, то вы получите копию
          модуля на своем компьютере, и теперь можете приступать к сборке
          документации. Читайте далее раздел <link
          linkend="docbuildhowto-building-the-docs-ru"><citetitle>Генерация
          документации Firebird</citetitle></link>.</para>
        </section>
      </section>
    </section>
  </section>

  <section id="docbuildhowto-building-the-docs-ru"
           xreflabel="Генерация документации Firebird">
    <title>Генерация документации Firebird</title>

    <titleabbrev>Генерация документации</titleabbrev>

    <para>Для генерации документов в формате HTML и PDF из исходных текстов в формате
    DocBook XML используются средства, написанные на языке Java. Поэтому перед
    началом работы вам необходимо, если вы по каким-либо причинам не сделали
    этого ранее, установить последнюю версию Java 2.</para>

    <para>Ниже будет сказано о следующем:</para>

    <orderedlist spacing="compact">
      <listitem>
        <para>Где взять Java 2</para>
      </listitem>

      <listitem>
        <para>Где взять необходимые для сборки документации
        Java-инструменты</para>
      </listitem>

      <listitem>
        <para>Как подготовить среду для сборки документации</para>
      </listitem>

      <listitem>
        <para>Как сгенерировать из исходных текстов документацию в форматах
        HTML и PDF</para>
      </listitem>
    </orderedlist>

    <para>Если вы уже установили на своем компьютере последнюю версию Java 2,
    то <link linkend="docbuildhowto-setup-build-env-ru">пропустите этот
    шаг</link>.</para>

    <section id="docbuildhowto-get-java2-ru" xreflabel="Где взять Java 2">
      <title>Где взять Java 2</title>

      <para>Скачайте и установите <emphasis>только что-то одно</emphasis> из
      нижеперечисленного:</para>

      <itemizedlist>
        <listitem>
          <para>Java 2 Runtime Environment, Standard Edition (часто сокращенно
          называется J2RE SE).</para>

          <para>На сайте <ulink
          url="http://www.java.com/">http://www.java.com/</ulink> по ссылкам
          перейдите на страницу загрузки. Скачивайте версию для своей операционной
          системы. По ссылке "Download" или "Get it now" может появиться
          всплывающее окно для подтверждения выполнения установки и
          практически все, что необходимо, Sun Microsystems установит
          автоматически. Если вы не желаете воспользоваться автоматической
          установкой, то можете скачать программу установки и запустить ее
          самостоятельно.</para>
        </listitem>

        <listitem>
          <para>Java 2 Software Development Kit, Standard Edition (или J2SDK
          SE).</para>

          <para>Этот пакет гораздо больше по размеру и имеет в своем составе
          J2RE SE. Если вам нужен SDK, то идите на сайт <ulink
          url="http://java.sun.com/j2se/">http://java.sun.com/j2se/</ulink> и
          скачивайте последнюю стабильную версию. Если вы не знаете, что
          именно выбрать, JRE или SDK, то скачивайте SDK. (Да, в этом случае
          вы также получите и J2RE, но по первой ссылке сделать это будет
          быстрее и проще.) Скачайте программу установки и запустите
          ее.</para>
        </listitem>
      </itemizedlist>

      <para>Если вы не знаете, чем предложенные варианты отличаются друг от
      друга, то выбирайте первый вариант - Java 2 Runtime Environment. SDK для
      генерации документации СУБД Firebird вам не понадобится.</para>

      <!--Um - maybe we do. It seems that otherwise tools.jar is missing. Investigate.-->
    </section>

    <section id="docbuildhowto-get-tools-ru">
      <title>Где взять необходимые для генерации документации
      Java-инструменты</title>

      <para>Инструменты, необходимые для генерации документации в форме HTML и
      PDF, существуют в виде Java <filename
      class="libraryfile">JAR-файлов</filename>, и они находятся в хранилище
      CVS в составе модуля документации. Так что при извлечении модуля
      извлекаются и эти инструменты. Однако, считается дурным тоном хранить
      где-то скомпилированные модули, в то время как исходные тексты
      поддерживаются в другом месте и кем-то другим (все упомянутые
      инструменты существуют в открытом исходном коде). Так что теперь мы
      перестали включать последние версии Java-инструментария в свой CVS, а
      просто разместили его для скачивания на сайте СУБД Firebird.</para>

      <para>После извлечения модуля документации в каталоге <filename
      class="directory">manual/lib</filename> в файле
      <filename>_readme_libs.txt</filename> вы сможете найти подробные инструкции по
      скачиванию и установке недостающих библиотек.</para>
    </section>

    <section id="docbuildhowto-setup-build-env-ru">
      <title>Настройка рабочей среды перед генерацией документации</title>

      <para>Скрипты, с помощью которых выполняется генерация документации,
      используют переменную окружения <envar>JAVA_HOME</envar>, которая
      содержит имя каталога, в который установлена система Java 2.</para>

      <itemizedlist>
        <listitem>
          <para>Для Windows это, например, может быть <filename>C:\Program
          Files\Java\j2re1.4.2_01</filename>. Проверьте наличие этого
          каталога, а в нем подкаталога <filename>bin</filename>, в
          котором должен быть файл <filename>java.exe</filename>.</para>
        </listitem>

        <listitem>
          <para>Для Linux, быть может, возможны каталоги
          <filename>/usr/lib/java/jre</filename> или
          <filename>/usr/java/j2sdk</filename>, или... множество других
          вариантов. Делайте те же самые проверки, что и в случае с Windows: в
          структуре каталога должен быть подкаталог <filename>bin</filename>,
          содержащий исполняемый файл <filename>java</filename> (в этом случае без расширения
          <filename>.exe</filename>).</para>
        </listitem>
      </itemizedlist>

      <para>Возможно, переменная окружения <envar>JAVA_HOME</envar> уже
      определена и содержит правильное значение. Если это не так, то вы должны
      определить ее значение самостоятельно, то есть для Windows командой
      <command>set JAVA_HOME=C:\Program Files\Java\j2re1.4.2_01</command>,
      для Linux/bash командой <command>export
      JAVA_HOME=/usr/lib/java/jre</command>. (Примечание: имена каталогов
      приведены для примера и могут отличаться от используемых в вашей
      системе.)</para>

      <para>Рекомендация: сделайте так, чтобы переменная окружения
      <envar>JAVA_HOME</envar> постоянно присутствовала в рабочем окружении
      ОС, чтобы не определять ее значение каждый раз перед началом генерации
      документации. Последовательность ваших действий будет зависеть от
      используемой ОС. При необходимости обратитесь к документации на вашу
      операционную систему.</para>
    </section>

    <section id="docbuildhowto-buidling-output-docs-ru">
      <title>Генерация документации в формате HTML и PDF</title>

      <para>Итак, вы готовы приступить к генерации документации.
      Последовательность дальнейших действий такова:</para>

      <orderedlist>
        <listitem>
          <para>Если вы еще не сделали этого, то самое время прочитать файл
          <filename>ReadMe</filename> в каталоге <filename>manual</filename>.
          Он может содержать информацию, которая не содержится в этом
          руководстве.</para>
        </listitem>

        <listitem>
          <para>Если вы работаете в графической среде, откройте окно сеанса
          командной строки.</para>
        </listitem>

        <listitem>
          <para>Если даже в файле <filename>ReadMe</filename> написано иное,
          переходите в каталог <filename>manual/src/build</filename> и
          набирайте команды</para>

          <blockquote>
            <para><command>build</command> (для Windows) или</para>

            <para><command>./build.sh</command> (для Linux)</para>
          </blockquote>

          <para>Если все подготовительные действия выполнены правильно, на
          экране начнут появляться строки, заканчивающиеся на <literal>BUILD
          SUCCESSFUL</literal> и содержащие упомининания о <firstterm>build
          targets</firstterm> (то есть о целях сборки - о том, сборка чего
          сейчас выполняется).</para>
        </listitem>

        <listitem>
          <para>Теперь можно выполнить сборку конкретных вариантов
          документации:</para>

          <blockquote>
            <para><command>build html</command> или</para>

            <para><command>build pdf</command> или</para>

            <para><command>build docs</command></para>
          </blockquote>

          <para>В любом случае все, что сгенерируется, будет помещено в
          каталог <filename>manual/dist</filename>.</para>

          <note>
            <itemizedlist>
              <listitem>
                <para>При генерации PDF на экран выводится огромное количество
                ошибок. Вы можете не обращать на них внимания, если одна из
                последних строк будет содержать фразу <literal>BUILD
                SUCCESSFUL</literal>.</para>
              </listitem>

              <listitem>
                <para>По причине ограничений, накладываемых программами
                сборки, большинство результирующих PDF-файлов нуждаются в
                последующей ручной (и достаточно нудной) доводке для того,
                чтобы получить документы в пригодной для публикации форме.
                Если вы хотите "довести дело до конца", то обратитесь к
                разделу, посвященному улучшению PDF-документов, в конце
                этого руководства. Однако, если вы генерируете документацию
                для себя, то в этом нет необходимости, поскольку вся информация в
                документе уже присутсвует.</para>
              </listitem>
            </itemizedlist>
          </note>
        </listitem>
      </orderedlist>

      <section>
        <title>Генерация документации на национальных языках с
        использованием ключа <parameter>-Dsfx</parameter></title>

        <para>Для генерации неанглоязычной документации (при наличии таковой)
        используйте аргумент командной строки <parameter>-Dsfx</parameter> и
        укажите код языка, на котором написана соответствующая документация.
        Например, для испанского и французского языков соответственно:</para>

        <blockquote>
          <para><command>build pdf -Dsfx=es</command></para>

          <para><command>build html -Dsfx=fr</command></para>
        </blockquote>

        <para>Результирующие документы в этом случае будут помещены в каталоги
        <filename>manual/dist/pdf/es</filename>,
        <filename>manual/dist/html/fr</filename> и так далее.</para>

        <para>Если вы не определите ключ <parameter>-Dsfx</parameter>, то
        будет выполнена генерация англоязычной документации.</para>

        <warning>
          <para>Не все национальные наборы исходных файлов содержат одинаковое количество
          документов. Их количество и состав зависят от работы авторов и
          переводчиков. Как правило, англоязычный набор содержит самую полную
          и точную документацию.</para>
        </warning>
      </section>

      <section>
        <title>Генерация определенных разделов с использованием ключа
        <parameter>-Drootid</parameter></title>

        <para>Все вышеприведенные примеры предназначались для генерации
        полного набора документации (для какого-то одного языка). Если вы
        хотите выполнить генерацию только части документации (конкретной книги или
        статьи), то используйте аргумент командной строки
        <parameter>-Drootid</parameter>. Это особенно удобно в случае сборки
        PDF-документации, потому что иначе вся документация будет
        собрана в один огромный файл.</para>

        <para>Для аргумента <parameter>-Drootid</parameter> вы должны
        определить идентификатор (ID) того элемента документации, генерацию
        которого вы хотите осуществить, например:</para>

        <blockquote>
          <para><command>build pdf -Drootid=fbutils</command></para>

          <para><command>build pdf -Dsfx=fr -Drootid=qsg15-fr</command></para>
        </blockquote>

        <para>Как узнать нужный идентификатор? Он находится в исходных файлах DocBook
        XML. Об этом говорится в руководстве по созданию документации СУБД Firebird
        - <citetitle>Firebird Docwriting Howto</citetitle>. Аргумент
        <parameter>-Drootid</parameter> обычно используется авторами
        документов, а не обычными пользователями, генерирующими документацию
        для своих нужд.</para>

        <para>Как показано в последнем примере, вы можете комбинировать
        аргументы командной строки.</para>
      </section>

      <section>
        <title>Генерация различных базовых наборов документов с использованием
        ключа <parameter>-Dbasename</parameter></title>

        <para>Начиная с января 2006 года документы <quote>Информация по версии Firebird</quote>
        (<quote>Firebird Release Notes</quote>) были включены
        в состав модуля документации, но как самостоятельный набор
        документации, наравне с основным набором
        <quote><literal>firebirddocs</literal></quote>. Поэтому появилась
        необходимость в еще одном параметре командной строки
        <parameter>-Dbasename</parameter>, указав для которого значение
        <quote><literal>rlsnotes</literal></quote>, можно выполнить генерацию
        документа <quote>Информация по версии</quote>:</para>

        <blockquote>
          <para><command>build pdf -Dbasename=rlsnotes</command></para>

          <para><command>build pdf -Dbasename=rlsnotes
          -Drootid=rlsnotes20</command></para>

          <para><command>build pdf -Dbasename=rlsnotes
          -Dsfx=fr</command></para>
        </blockquote>

        <para>Возможно, в будущем будут созданы и другие базовые наборы
        документации.</para>

        <para>Результирующие документы альтернативных базовых наборов
        формируются в таких же по структуре каталогах, как в случае сборки
        набора по умолчанию, за одним исключением: многофайловая
        <systemitem>html-документация</systemitem> формируется в каталоге
        <filename>manual/dist/html-&lt;basename&gt;</filename>, для того,
        чтобы не путать документы различных базовых наборов и избежать
        перезаписи соответствующих им одноименных файлов
        <filename>index.html</filename>. Наборы документации на национальных
        языках помещаются в каталоги
        <filename>manual/dist/html-&lt;basename&gt;/&lt;sfx&gt;</filename>.
        Например, англоязычный вариант HTML Release Notes помещается в каталог
        <filename>manual/dist/html-rlsnotes</filename>, а тот же самый на
        французском языке - в каталог
        <filename>manual/dist/html-rlsnotes/fr</filename>.</para>

        <para>Генерация документации в виде однофайловых
        <systemitem>monohtml</systemitem> и <systemitem>pdf</systemitem> в
        одном и том же каталоге не приводит к каким-либо проблемам, поскольку в
        результате формируются файлы с уникальными именами.</para>
      </section>

      <section>
        <title>Установка значений по умолчанию в файле
        <filename>build.xml</filename></title>

        <para>Если вам часто приходится генерировать из исходных текстов один
        и тот же базовый набор документов, вариант на национальном языке и/или
        одни и те же разделы, то можно установить параметры по умолчанию для
        вашего случая в файле <filename>build.xml</filename>, чтобы не вводить
        их каждый раз в командной строке. Необходимые инструкции приведены в
        начале файла <filename>build.xml</filename>, в самом начале узла
        <systemitem>target</systemitem> с именем <systemitem>init</systemitem>.</para>

        <para>Если вы пользуетесь данной возможностью, то все равно имеете
        возможность генерировать любую документацию, переопределив значения
        параметров в командной строке. Например, если вы установили для
        параметра с названием базового набора <parameter>basename</parameter>
        как <literal>rlsnotes</literal>, собрать основной набор документов
        можно, выполнив команду:</para>

        <blockquote>
          <para><command>build html -Dbasename=firebirddocs</command></para>
        </blockquote>
      </section>

      <section>
        <title>Генерация документации – заключение</title>

        <para>Итак, примите поздравления! Вы стали сертифицированным
        специалистом по генерации документации СУБД Firebird.</para>

        <para>Если вы желаете самостоятельно писать или выполнять перевод
        документации СУБД Firebird, то рекомендуем изучить <ulink
        url="http://www.firebirdsql.org/manual/docwritehowto.html">Руководство
        по созданию документации СУБД Firebird (Firebird Docwriting
        Guide)</ulink>.</para>

        <!--Add sth. like "if you want to improve the PDF, read the advanced topic etc."-->
      </section>
    </section>
  </section>

  <section id="docbuildhowto-cvs-update-ru">
    <title>Поддержка модуля документации (manual) в акутальном состоянии</title>

    <titleabbrev>Поддержка актуальности модуля manual</titleabbrev>

    <para>Работа над модулем документации продолжается. Участники проекта
    постоянно вносят в него изменения. Через некоторое время ваша локальная
    копия модуля начинает устаревать в сравнении с хранилищем CVS на сервере
    SourceForge. Несомненно, было бы слишком расточительно извлекать снова и
    снова весь модуль документации целиком только для того, чтобы обновить те
    несколько файлов, которые обновились с момента последнего извлечения
    модуля. Более того, это могло бы привести к потере изменений, которые вы
    сделали в своей локальной копии. По этой причине в CVS имеется команда для
    выполнения обновления <command>update</command>. C помощью команды
    <command>update</command> вы извлекаете с сервера <emphasis>только
    изменения</emphasis>, без потери своих локальных изменений. (В случае,
    когда другой участник внес изменения в том же самом месте, в котором это
    сделали вы, будет сообщено об ошибке и вам придется отредактировать этот
    файл соответствующим образом для разрешения конфликта обновления.)</para>

    <para>Выполнить обновление очень просто. В случае использования CVS-клиента
    с интерфейсом командной строки, перейдите в каталог <filename
    class="directory">manual</filename> и наберите команду:</para>

    <blockquote>
      <para><command>cvs -z6 update -d</command></para>
    </blockquote>

    <para>Эта команда используется как для анонимно извлеченного модуля, так и для модуля,
    извлеченного с имененм и паролем пользователя сервера SourceForge. CVS-клиент знает,
    к какому серверу обращаться и какие параметры авторизации использовать, так как эта
    информация хранится в подкаталоге <filename
    class="directory">manual/CVS</filename>, который создается
    автоматически при первом извлечении модуля. Единственным отличием является
    то, что при выполнении команды <command>update</command> с использованием логина у
    вас будет запрошен пароль.</para>

    <para>Если вы используете иной CVS-клиент, то ищите в его меню команду
    <command>update</command>.</para>
  </section>

  <section id="docbuildhowto-troubleshooting-ru">
    <title>Если что-то пошло не так</title>

    <para>Всегда используйте последнюю версию Java 2. Иначе процесс генерации
    может завершиться с ошибкой. Обратитесь к разделу <xref
    linkend="docbuildhowto-get-java2-ru" /> для получения подробной
    информации.</para>

    <para>Если же сообщение об ошибке содержит упоминание об отсутствии класса
    (class not being found) или описания класса (class definition not being
    found), то, возможно, вы установили не все необходимые библиотеки.
    Обратитесь к файлу <filename>manual/lib/_readme_libs.txt</filename> и следуйте
    приведенным там инструкциям.</para>

    <para>Если возникла какая-то иная ошибка, и вы не можете понять причину ее
    возникновения, задавайте вопрос в почтовой конференции firebird-docs.
    Просим вас приводить подробное описание своей проблемы для более полного
    понимания ее сути участниками конференции. По вопросам подписки на участие
    в конференции firebird-docs обращайтесь по ссылке <ulink
    url="https://lists.sourceforge.net/lists/listinfo/firebird-docs">https://lists.sourceforge.net/lists/listinfo/firebird-docs</ulink>.</para>
  </section>

  <section id="docbuildhowto-pdfimprove-ru">
    <title>Задание повышенной трудности: улучшаем PDF</title>

    <titleabbrev>Улучшаем PDF</titleabbrev>

    <para>Из-за ограничений, накладываемых инструментами генерации, вид
    документов PDF может содержать некоторые неточности, такие как:</para>

    <itemizedlist>
      <listitem>
        <para><quote>Висящие</quote> заголовки (появляются в конце страницы, в то время
        как связанный блок текста начинается на следующей).</para>
      </listitem>

      <listitem>
        <para>Пробелы в длинных именах файлов, URL и так далее.</para>
      </listitem>

      <listitem>
        <para>Строки таблиц попадают на разрыв страницы</para>
      </listitem>

      <listitem>
        <para>Слишком широкие разрывы между словами при выравнивании текста
        по ширине страницы</para>
      </listitem>
    </itemizedlist>

    <para>Этот раздел содержит рекомендации по исправлению этих ошибок, если у
    вас возникла в этом необходимость.</para>

    <section id="docbuildhowto-pdfimprove-howpdf-ru">
      <title>Как из исходных текстов генерируется документ PDF</title>

      <para>Во-первых, разберемся с тем, как же выполняется генерация PDF. В
      отличие от генерации HTML, это двухпроходный процесс:</para>

      <procedure>
        <step>
          <para>Исходный текст DocBook XML преобразуется в файл Formatting
          Objects (FO, объекты форматирования). FO, формально называемый
          <firstterm>XSL-FO</firstterm>, относится к семейству XML, но, в
          отличие от DocBook, он ориентирован на представление инфомации. Этот
          шаг выполняется с помощью <firstterm>XSL-преобразователя</firstterm>
          под названием <application>Saxon</application>. Результом его работы
          являются файлы
          <filename>manual/inter/<replaceable>filename</replaceable>.fo</filename>.</para>
        </step>

        <step>
          <para>Другой инструмент, <application>Apache FOP</application>
          (<firstterm>Formatting Objects Processor</firstterm>, обработчик
          объектов форматирования), преобразует файлы
          <filename><replaceable>filename</replaceable>.fo</filename> в
          <filename><replaceable>filename</replaceable>.pdf</filename>,
          который сохраняется в каталог <filename>manual/dist/pdf</filename>.</para>
        </step>
      </procedure>

      <para>Если вы даете команду <command>build pdf</command>, то на самом деле
      последовательно обрабатываются обе сборки:
      <command>fo</command> и <command>fo2pdf</command>, соответствующие двум
      описанным шагам. Однако, вы можете их вызвать и по отдельности из командной строки.
      Например,</para>

      <blockquote>
        <para><command>build fo -Drootid=qsg15</command></para>
      </blockquote>

      <para>...преобразует исходный текст Quick Start Guide 1.5 в файл
      <filename>manual/inter/qsq15.fo</filename>. А команда:</para>

      <blockquote>
        <para><command>build fo2pdf -Drootid=qsg15</command></para>
      </blockquote>

      <para>...формирует PDF из FO-файла (который, конечно же, должен
      присутствовать на момент выполнения этой команды).</para>

      <para>В действительности, <command>build pdf</command> - просто
      сокращение для последовательного вызова команд <command>build
      fo</command> и последующего <command>build fo2pdf</command>.</para>

      <para>Эта возможность позволяет нам производить ручное изменение
      файла FO перед тем, как сгенерировать окончательный выходной
      документ PDF. И именно так мы собираемся избавиться от всех этих
      проблем, портящих вид нашего документа PDF.</para>
    </section>

    <section id="docbuildhowto-pdfimprove-scheme-ru">
      <title>Общая схема исправления</title>

      <para>Основные процедуры по улучшению вида выходного документа PDF
      посредством редактирования файла FO таковы:</para>

      <procedure>
        <step>
          <para>Выполните генерацию PDF один раз, как обычно, командой
          <command>build pdf
          <replaceable>[аргументы]</replaceable></command>.</para>
        </step>

        <step>
          <para>Откройте PDF в программе просмотра, и найдите первый проблемный
          участок.</para>
        </step>

        <step>
          <para>Откройте файл FO в текстовом или XML-редакторе.</para>
        </step>

        <step>
          <para>Найдите место в файле FO, соответствующее неверно отображаемому
          фрагменту (об этом будет сказано ниже).</para>
        </step>

        <step>
          <para>Поправьте его соответствующим образом для исправления
          ошибки (об этом будет сказано ниже), и сохраните.</para>
        </step>

        <step>
          <para>Закройте файл PDF, если он открыт для просмотра, и снова
          выполните генерацию PDF, но в этот раз используйте команду
          <command>build fo2pdf
          <replaceable>[аргументы]</replaceable></command>. Если использовать
          обычную команду, то исправленный вами файл FO будет перезаписан
          вновь сформированным файлом FO. В результате вы снова получите PDF со всеми
          первоначальными ошибками, и вам придется все начинать
          сначала.</para>
        </step>

        <step>
          <para>Просмотрите заново сгенерированный документ PDF, убедитесь, что
          проблема решена, и переходите к поиску следующего проблемного места в
          документе PDF.</para>
        </step>

        <step>
          <para>Повторяйте шаги 4–7 пока весь документ PDF, от начала до конца, не
          будет проверен и исправлен.</para>
        </step>
      </procedure>

      <note>
        <itemizedlist>
          <listitem>
            <para>Вам может показаться, что ручное исправление файлов FO
            свидетельствует о том, что ошибки кроются именно в этих файлах, однако это
            не так. С файлами FO все в порядке. Просто <application>Apache
            FOP</application> пока не поддерживает всего разнообразия
            возможностей спецификации XSL-FO. Редактируя файл FO вручную, мы
            просто направляем процесс генерации PDF в нужное русло.</para>
          </listitem>

          <listitem>
            <para>Важно исправлять проблемы отображения <emphasis>в порядке их
            обнаружения в документе от начала к концу</emphasis>. Редактируя файл FO в конкретном
            месте, вы меняете в соответствующем месте вид результирующего
            документа PDF, строк становится больше или меньше, вставляются
            разрывы страниц и так далее. Эти изменения влияют на всю последующую
            часть документа.</para>

            <para>По этой же причине вы должны приступать к устранению
            следующей проблемы <emphasis>после</emphasis> устранения
            предыдущей. Например, совершенно незачем выписывать за раз все
            <quote>висящие</quote> заголовки, а затем проводить коррекцию сразу всех
            проблемных участков кода в файле FO. Исправление первого такого
            заголовка приведет к смещению всего дальнейшего текста, и может
            привести как к исправлению всех остальных заголовков, так и к
            появлению новых.</para>
          </listitem>

          <listitem>
            <para>Ничто не мешает вам держать файл FO открытым во время
            генерации документа PDF. Только не забывайте сохранять изменения перед
            началом процесса сборки. Но корректируемый и просматриваемый
            документ PDF необходимо закрывать, так как, будучи открытым в Adobe
            (даже в Adobe <emphasis>Reader</emphasis>), другие процессы
            доступа для записи к нему не имеют.</para>
          </listitem>

          <listitem>
            <para>Весь процесс исправления документа PDF может занимать достаточно
            продолжительное время. Поэтому не кидайтесь исправлять все
            замеченные мелкие неточности отображения. В особенности, если вы
            не имеете прочных навыков работы с файлами FO. Обычно сильнее всего в
            глаза бросаются неопрятные <quote>висящие</quote>
            заголовки в конце страниц.</para>
          </listitem>
        </itemizedlist>
      </note>

      <para>Следующий раздел посвящается возможным проблемам и способам их
      решения.</para>
    </section>

    <section id="docbuildhowto-pdfimprove-solutions-ru">
      <title>Общие проблемы отображения PDF и их исправление</title>

      <titleabbrev>Общие проблемы и их исправление</titleabbrev>

      <section>
        <title><quote>Висящие</quote> заголовки</title>

        <para><emphasis>Проблема.</emphasis> Заголовки разделов располагаются
        в нижней части страниц.</para>

        <para><emphasis>Причина.</emphasis> Apache FOP пока не поддерживает
        атрибут <sgmltag class="attribute">keep-with-next</sgmltag>, кроме
        случая со строками таблиц.</para>

        <para><emphasis>Решение.</emphasis> Принудительно вставьте разрыв
        страницы перед нужным элементом (обычно перед разделом, хотя это может
        быть список, таблица или любой другой элемент), к которому принадлежит
        такой заголовок.</para>

        <para><emphasis>Как это сделать?</emphasis> Если у элемента есть
        атрибут <sgmltag class="attribute">id</sgmltag> (это видно в исходном
        файле DocBook), ищите этот id в файле FO. Например, вы только что
        сгенерировали <citetitle>Firebird 2 Quick Start Guide</citetitle> и
        обнаружили, что заголовок <emphasis>Creating a database using
        isql</emphasis> располагается в конце страницы. В исходном тексте
        DocBook XML вы видете, что у заголовка этого раздела есть id <sgmltag
        class="attvalue">qsg2-databases-creating</sgmltag>. Выполнив поиск
        строки <literal>qsg2-databases-creating</literal> с начала файла FO, вы
        сначала увидите что-то вроде такого текста:</para>

        <programlisting>&lt;fox:outline internal-destination="<emphasis
            role="bold">qsg2-databases-creating</emphasis>"&gt;</programlisting>

        <para>Элементы <sgmltag class="element">fox:outline</sgmltag>
        соответствуют связям в навигационной панели с левой стороны при отображении PDF. Но
        это не сам раздел, ищем по тексту дальше и находим:</para>

        <programlisting>&lt;fo:block text-align-last="justify" end-indent="24pt"
          last-line-end-indent="-24pt"&gt;&lt;fo:inline
   keep-with-next.within-line="always"&gt;&lt;fo:basic-link
   internal-destination="<emphasis role="bold">qsg2-databases-creating</emphasis>"&gt;Creating a database...</programlisting>

        <para>Здесь видим, что id является значением одного из атрибутов тэга
        <sgmltag class="element">fo:basic-link</sgmltag>. Это оглавление. Нам
        все еще не сюда.</para>

        <para>Третий и четвертый результаты поиска обычно располагаются на
        пару строк ниже второго, с их помощью описаны ссылки по щелчку <quote>мыши</quote> на
        номере строки в оглавлении. А вот пятый результат поиска - это обычно
        то, что нам нужно (если, конечно, ссылок на этот элемент больше
        нет):</para>

        <programlisting>&lt;fo:block id="<emphasis role="bold">qsg2-databases-creating</emphasis>"&gt;</programlisting>

        <para>Вот оно! Большинство средне- и низкоуровневых иерархических
        элементов в DocBook (<sgmltag class="element">preface</sgmltag>,
        <sgmltag class="element">section</sgmltag>, <sgmltag
        class="element">appendix</sgmltag>, <sgmltag
        class="element">para</sgmltag> и так далее) выглядят в файле FO как
        <sgmltag class="element">fo:block</sgmltag>. Теперь мы должны дать
        указание Apache FOP, что этот раздел надо начать с новой страницы.
        Поправьте строку таким образом:</para>

        <programlisting>&lt;fo:block id="qsg2-databases-creating" <emphasis
            role="bold">break-before="page"</emphasis>&gt;</programlisting>

        <para>Сохраните изменения и заново сгенерируйте PDF (помните:
        используйте команду <command>build fo2pdf</command>, а не <command>build
        pdf</command>). Заголовок раздела теперь будет располагаться на новой
        странице и вы можете переходить к поиску следующего места в документе PDF,
        требующего вашего вмешательства.</para>

        <para>А что делать, если элемент DocBook не имеет атрибута id (идентификатора)?
        В таком случае надо искать в тексте сам заголовок (или его часть).
        Порой поиск может стать непростой задачей: в файле FO заголовок
        может быть разорван переносом строки, поэтому поиск по полному
        соответствию не даст результата; или у заголовка есть несколько
        дочерних элементов (таких как <sgmltag class="element">quote</sgmltag>
        или <sgmltag class="element">emphasis</sgmltag>). В этом случае
        заголовок целиком вы тоже не найдете. С другой стороны, сужая условие
        поиска, вы рискуете получить некоторые не относящиеся к делу
        вхождения такой урезанной строки. И только вы, принимая решение в
        каждом конкретном случае, сможете найти нужное вам место, опираясь на
        предшествующие или на последующие участки текста файла FO.</para>

        <para>Неважно каким образом, как только вы нашли нужный вам заголовок,
        ищите выше по тексту начало раздела, который обычно имеет
        автоматически сформированный идентификатор FO (id):</para>

        <programlisting>&lt;/fo:block&gt;
<emphasis role="bold">&lt;fo:block id="d0e2340"&gt;</emphasis>
  &lt;fo:block&gt;
    &lt;fo:block&gt;
      &lt;fo:block keep-together="always" margin-left="0pc"
                font-family="sans-serif,Symbol,ZapfDingbats"&gt;
        &lt;fo:block keep-with-next.within-column="always"&gt;
          &lt;fo:block font-family="sans-serif" font-weight="bold"
                    keep-with-next.within-column="always"
                    space-before.minimum="0.8em" space-before.optimum...
                    space-before.maximum="1.2em" color="#404090" hyph...
                    text-align="start"&gt;
            &lt;fo:block font-size="11pt" font-style="italic"
                      space-before.minimum="0.88em" space-before.opti...
                      space-before.maximum="1.32em"&gt;<emphasis role="bold">The DISTINCT keyword
              comes to the rescue!</emphasis>&lt;/fo:block&gt;</programlisting>

        <para>Как видите, между заголовком и началом раздела присутствуют
        несколько строк. Посмотрите также, как заголовок разбит на две строки
        в этом примере.</para>

        <para>Как только вы нашли соответствующий началу раздела тэг <sgmltag
        class="element">fo:block</sgmltag>, укажите для него атрибут <sgmltag
        class="attribute">break-before="page"</sgmltag> точно также, как это
        показано в предыдущем случае.</para>

        <para>Вы можете спросить, зачем нам искать начало раздела, а не
        вставить разрыв строки <sgmltag
        class="attribute">break-before</sgmltag> прямо в тэге <sgmltag
        class="element">fo:block</sgmltag>, ограничивающем заголовок? Да
        потому, что в то время, как мы увидим заголовок перенесенным на начало
        следующей страницы, ссылки из него в левом ссылочном поле и в
        оглавлении будут указывать на предыдущую страницу, так как невидимое
        начало раздела (тэг, имеющий в своих параметрах значение id) находится
        ДО разрыва страницы.</para>
      </section>

      <section>
        <title>Пробелы в именах файлов, URL и так далее</title>

        <para><emphasis>Проблема.</emphasis> В определенных позициях имен
        файлов (и подобное) видны пробелы переменной длины.</para>

        <para><emphasis>Причина.</emphasis> В файле FO эти элементы содержат
        символы пробелов нулевой длины (zero-width space characters, или ZWSP
        с 16-тиричном кодом Unicode 200B) в качестве указателей, где текст
        может быть разорван в процессе переноса строк. К сожалению, Apache FOP
        использует эти пробелы и с целью выравнивания строк.</para>

        <para><emphasis>Решение.</emphasis> Если такие пробелы в тексте сильно
        мешают восприятию, удалите соответствующие симолы ZWSP за исключением
        тех, которые все же отвечают за необходимые переносы.</para>

        <para><emphasis>Как это сделать?</emphasis> Поиск полного имени файла
        или URL может не привести к положительному результату по причине
        присутствия в тексте символов ZWSP! Если строка содержит уникальный или редко
        встречающийся в тексте элемент (например
        <literal>hababarulala</literal> в имени файла
        <filename>C:\Strips\Pintoplaneet\hababarulala.txt</filename>), вы
        можете опереться в поиске на него. Иначе ищите вхождения соседствущего
        текста. (Вам также может показаться, что обычный просмотр файла FO
        слишком утомителен, поскольку его текст сильно перегружен элементами
        XSL-FO.)</para>

        <para>Как только нашли нужную строку, определите, действительно ли вы
        видите символ ZWSP. Некоторые редакторы их не отображают, раз это символы
        нулевой длины. Однако даже в этом случае вы можете их обнаружить,
        перемещаясь по строке клавишами управления курсором. Если вы нажимаете
        стрелку влево или вправо, а курсор остается на месте (но продолжает
        движение при следующем нажатии), то в этом месте присутствует символ ZWSP.
        Некоторые редакторы отображают их в виде символа, а другие (ConText)
        как три <quote>странных</quote> символа: <literal>â€‹</literal>. Эти
        символы есть трехбайтное представление для пробела нулевой длины в
        кодировке UTF-8.</para>

        <para>Если вы нашли место расположения пробелов нулевой длины, можно
        удалить их. Только внимательно сверяйтесь с файлом PDF, и не удалите
        действительно необходимые символы ZWSP для переноса строк в документе
        PDF.</para>
      </section>

      <section>
        <title>Разрывы строк таблиц</title>

        <para><emphasis>Проблема.</emphasis> Строки таблицы разбиваются разрывом
        страницы.</para>

        <para><emphasis>Причина.</emphasis> Ничего особенного – нет причин
        запрещать разрыв страницы в строке таблицы.</para>

        <para><emphasis>Решение.</emphasis> Если вы хотите видеть строку
        таблицы на одной странице, вставьте принудительный разрыв страницы в
        начале разрывающейся строки.</para>

        <para><emphasis>Как это сделать?</emphasis> Найдите нужную строку
        таблицы по тексту в ее начале или предшествующему ей. Надо определить
        местоположение нужного элемента <sgmltag
        class="element">fo:table-row</sgmltag>, но не используйте название
        тэга в качестве условия поиска, так как многие элементы DocBook (не
        только табдицы <sgmltag class="starttag">table</sgmltag>) используют
        тэги <sgmltag class="element">fo:table</sgmltag>, и потому также
        содержат тэги <sgmltag class="element">fo:table-row</sgmltag>.</para>

        <para>Как только вы нашли начало разорванной строки, вставьте
        принудительный разрыв строки, то есть добавьте атрибут <sgmltag
        class="attribute">break-before</sgmltag>, как и в случае с
        <quote>висящими</quote> заголовками:</para>

        <programlisting>&lt;fo:table-row <emphasis role="bold">break-before="page"</emphasis>&gt;</programlisting>

        <para>К такому же результату приведет добавление атрибута <sgmltag
        class="attribute">break-after</sgmltag> в тэге, относящемся к
        предыдущей строке таблицы.</para>
      </section>

      <section>
        <title>Слишком широкие выравнивающие пробелы</title>

        <para><emphasis>Проблема.</emphasis> Очень широкие выравнивающие
        пробелы в строках, предшествующих длинной строке текста без пробелов (при
        выравнивании текста по ширине страницы). Обычно
        такие длинные строки печатаются моноширинным шрифтом:</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="images/bigspace.png"
                       format="PNG" />
          </imageobject>
        </mediaobject>

        <para><emphasis>Причина.</emphasis> Apache FOP часто не разделяет
        такие строки знаками переноса. Поэтому, если строка текста целиком не
        помещается в строке документа, то она должна быть целиком перенесена
        на следующую строку. В результате в предыдущей строке остается слишком
        мало текста и в нее добавляются выравнивающие пробелы. Заметьте, что в
        вышеприведенном примере пробелы в верхней строке отображаются не
        потому, что они там реально есть, а потому, что они были добавлены в
        результате преноса части текста в нижнюю строку.</para>

        <para><emphasis>Решение.</emphasis> Вы можете посчитать вполне
        приемлимым, что длинный фрагмента текста без пробелов был перенесен на
        отдельную строку. В этом случае примите появление выравнивающих
        пробелов как данное. Иначе вставьте пробел или знак переноса и пробел в том
        месте, где вы хотите выполнить перенос строки.</para>

        <para><emphasis>Как это сделать?</emphasis> Во-первых, определите
        местоположение этой строки в файле FO, выполнив поиск по ее
        содержимому (или части). В случае моноширинного отображения в PDF, вы
        всегда найдете эту строку внутри тэга <sgmltag
        class="element">fo:inline</sgmltag>. Затем взгляните на документ PDF и примерно
        определите, какая часть строки может заполнить возникший пробел в
        верхней строке. В файле FO в нужном месте, где вы желаете видеть
        перенос строки, вставьте пробел (или знак переноса и пробел). Сгенерируйте документ PDF
        заново (<command>build fo2pdf</command>!) и проверьте, что получилось
        в результате. Если вы не рассчитали и оперделили место переноса правее,
        чем необходимо, то проблемный текст по-прежнему будет перенесен на
        следующую строку целиком. Если левее, то выравнивающие пробелы будут
        казаться все еще достаточно широкими. Опытным путем найдите нужное
        место переноса, которое вас устроит, редактируя файл FO и пересобирая
        документ PDF.</para>

        <para>Определяя место переноса, вы можете столкнуться с одним
        интересным эффектом, когда после того, как вы вставили симолы в месте
        желаемого переноса, Apache FOP вдруг начинает считать, что со строкой
        стало все нормально и ее можно разбить знаками переноса. В
        результате вы получаете на первой строке часть строки с вашими
        вставленными для переноса символами, но после них строка продолжается.
        Вам ничего не останется, как удалить вставленные вами символы и
        разбить строку в месте, где это решил сделать Apache.</para>

        <section>
          <title>Вставка пробелов нулевой длины</title>

          <para>Альтернативный способ решения проблемы широких выравнивающих
          пробелов состоит во вставке пробелов нулевой длины в местах
          предполагаемого переноса, оставляя решение вопроса о пригодности
          каждого из них на Apache FOP. Это сработает с первого раза,
          но:</para>

          <itemizedlist>
            <listitem>
              <para>это пригодно к использованию только при наличии редактора,
              позволяющего легко вставлять символ ZWSP;</para>
            </listitem>

            <listitem>
              <para>это можно использовать только в случае, когда допустим
              перенос без знака переноса;</para>
            </listitem>

            <listitem>
              <para>это может привести к возникновению длинных выравнивающих
              пустых полей в позициях символов ZWSP (смотри предыдущую проблему), что
              заставит вас удалить все лишние символы ZWSP, кроме того, который
              приводит к нужному результату.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
    </section>

    <section id="docbuildhowto-pdfimprove-links-ru">
      <title>Ссылки на тему XSL-FO</title>

      <para>Официальная страница XSL-FO (Formatting Objects) в Интернете:
      <ulink
      url="http://www.w3.org/TR/xsl/">http://www.w3.org/TR/xsl/</ulink></para>

      <para>Домашняя страница Apache FOP: <ulink
      url="http://xmlgraphics.apache.org/fop/">http://xmlgraphics.apache.org/fop/</ulink></para>

      <para>Описание совместимостей Apache FOP: <ulink
      url="http://xmlgraphics.apache.org/fop/compliance.html">http://xmlgraphics.apache.org/fop/compliance.html</ulink>.
      Эта страница содержит большую таблицу совместимости объектов, где вы
      можете проверить, какие объекты и свойства объектов XSL-FO
      поддерживаются Apache FOP. Изучая таблицу, помните, что мы используем
      Apache FOP 0.20.5.</para>
    </section>
  </section>

  <appendix id="docbuildhowto-dochist">
    <title>История оригинального документа</title>

    <para>Полная история документа приведена в модуле <filename
    class="directory">manual</filename> нашего дерева CVS; смотрите <ulink
    url="http://sourceforge.net/cvs/?group_id=9028">http://sourceforge.net/cvs/?group_id=9028</ulink></para>

    <para><revhistory>
        <revision>
          <revnumber>0.1</revnumber>

          <date>2 ноя 2003</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Первый черновой вариант был опубликован под заголовком
            <citetitle>How to get and build the Firebird manual
            module</citetitle>.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>0.2</revnumber>

          <date>31 янв 2004</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Включен в дерево исходных текстов CVS.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.0</revnumber>

          <date>8 мар 2004</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Первый официальный выпуск на сайте СУБД Firebird.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.1</revnumber>

          <date>26 фев 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para><emphasis>В период между мартом 2004 и февралем 2005 были
            выполнены следующие изменения:</emphasis></para>

            <para>Добавлены замечания по поводу сборки PDF.</para>

            <para>Добавлены замечания по генерации отдельных разделов
            документации на национальных языках.</para>

            <para>Добавлено замечание о необходимости последующей доработки
            вида документов PDF.</para>

            <para>Название документа изменено на <citetitle>Getting and
            building the Firebird manual module</citetitle>.</para>

            <para>Некоторые малозначимые изменения.</para>

            <para>Добавлена история документа и номер ревизии.</para>

            <para>Выполнено лицензирование данной работы в форме Public
            Documentation License.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.1.1</revnumber>

          <date>8 апр 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Добавлено несколько сокращенных наименований заголовков. В
            текст изменения не вносились.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.2</revnumber>

          <date>9 фев 2006</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Из заголовка 2-го раздела удалено слово
            <quote>Firebird</quote>.</para>

            <para>Добавлена информация о том, где можно скачать библиотеки
            для генерации документации, потому что мы исключили их из
            дерева CVS.</para>

            <para>Созданы подразделы для описания параметров генерации;
            добавлена информация о генерации других наборов документации и
            установке параметров в файле <filename>build.xml</filename>.</para>

            <para>Изменены тэги docwritehowto <sgmltag
            class="element">link</sgmltag> на <sgmltag
            class="element">ulink</sgmltag> так, чтобы документы теперь
            находились в разных PDF.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.2.1</revnumber>

          <date>15 май 2006</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Ссылки на <systemitem
            class="systemname">cvs.sf.net</systemitem> (3x) и <systemitem
            class="systemname">cvs.sourceforge.net</systemitem> (6x) заменены
            на <systemitem
            class="systemname">firebird.cvs.sourceforge.net</systemitem> из-за
            нововведений на сервере SF. Добавлена фраза <quote>on one line</quote>
            перед двумя примерами переноса строки в документе PDF.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.3</revnumber>

          <date>17 янв 2006</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Все элементы <sgmltag
            class="element">sect<replaceable>N</replaceable></sgmltag>
            заменены на <sgmltag class="element">section</sgmltag>.</para>

            <para>Сокращен идентификатор раздела <quote>Введение</quote> и
            назначены идентификаторы дочерним разделам.</para>

            <para>Исправлены опечатки: RDMS -&gt; RDBMS, parallell -&gt;
            parallel, OS'es -&gt; OSes, CD's -&gt; CDs, wil -&gt; will, envvar
            -&gt; envar, linewrapped -&gt; line-wrapped.</para>

            <para>В разделе <citetitle>SSH checkout using command line
            CVS</citetitle> в третьем элементе списка тэг <sgmltag
            class="starttag">quote</sgmltag> вокруг <quote>username</quote> заменен на тэг
            <sgmltag class="starttag">replaceable</sgmltag>, изменено
            <quote>SF username</quote> на <quote>SF user name</quote>, и также
            <quote>username</quote> в примере командной строки обрамлен тэгом
            <sgmltag class="starttag">replaceable</sgmltag>.</para>

            <para>В разделе <citetitle>SSH checkout using other
            clients</citetitle> в пункте cvsroot <quote>username</quote>
            обрамлен тэгом <sgmltag class="starttag">replaceable</sgmltag>.</para>

            <para>Замечанию <citetitle>Building the HTML and PDF
            docs</citetitle> дан заголовок, и добавлено предложение во втором
            пункте списка.</para>

            <para>Исправлена дата ревизии 1.1.1 в истории документа: 2004
            -&gt; 2005.</para>

            <para>Добавлен большой раздел по улучшению внешнего вида
            документов PDF.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.4</revnumber>

          <date>3 авг 2006</date>

          <authorinitials>ND</authorinitials>

          <revdescription>
            <para>Добавлены предупреждения по поводу брандмауэров (firewalls) и порта TCP 2401, а
            также о действиях в случае изменения вашего пароля самим сервером
            SourceForge.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.4-ru</revnumber>

          <date>12 дек 2006</date>

          <authorinitials>VO</authorinitials>

          <revdescription>
            <para>Документ переведен на русский язык.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.4-ru</revnumber>

          <date>17 дек 2006</date>

          <authorinitials>PM</authorinitials>

          <revdescription>
            <para>Корректировка перевода на русский язык.</para>
          </revdescription>
        </revision>
      </revhistory></para>
  </appendix>

  <appendix id="docbuildhowto-license">
    <title>О лицензии</title>

    <para>Содержимое данного Документа является объектом Public Documentation
    License версии 1.0 (<quote>Лицензия</quote>); вы можете пользоваться
    данным Документом только в случае, если вы согласны с условиями Лицензии.
    Копия лицензии доступна по ссылкам <ulink
    url="http://www.firebirdsql.org/pdfmanual/pdl.pdf">http://www.firebirdsql.org/pdfmanual/pdl.pdf</ulink>
    (PDF) и <ulink
    url="http://www.firebirdsql.org/manual/pdl.html">http://www.firebirdsql.org/manual/pdl.html</ulink>
    (HTML).</para>

    <para>Оригинальное название документа: <citetitle>Getting and building the
    Firebird manual module</citetitle>.</para>

    <para>Автор исходного документа: Paul Vinkenoog.</para>

    <para>Copyright (C) 2003-2006. Все права защищены. Адрес электронной почты для
    контакта с автором: paulvink at users dot sourceforge dot net.</para>

    <para>Соавтор: Norman Dunbar – см. <link
    linkend="docbuildhowto-dochist">историю документа</link>.</para>

    <para>Части документа, созданные Norman Dunbar: Copyright (C) 2006. Все
    права защищены. Контактный адрес электронной почты:
    normandunbar at users dot sourceforge dot net.</para>

    <para>Перевод на русский язык: Василий Овчинников.</para>

    <para>Copyright (C) 2006. Все права защищены. Контактный адрес электронной
    почты: ova at tula dot net.</para>

    <para>Корректор перевода: Павел Меньщиков.</para>

    <para>Copyright (C) 2006. Все права защищены. Контактный адрес электронной
    почты: developer at ls-software dot ru.</para>
  </appendix>
</article>