<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../../../tools/docbook-dtd/docbookx.dtd">
<appendix id="fblangref25-appx05-montables">
  <title>Monitoring Tables</title>
  <para>The Firebird engine can monitor activities in a database and make them available
  for user queries via the monitoring tables. The definitions of these tables are always present
  in the database, all named with the prefix MON$.  The tables are virtual: &nbsp;they
  are populated with data only at the moment when the user queries them.  That is also one good reason
  why it is no use trying to create triggers for them!</para>
  <para>The key notion in understanding the monitoring feature is an <emphasis>activity snapshot</emphasis>.
  The activity snapshot represents the current state of the database at the start of the transaction in 
  which the monitoring table query runs.  It delivers a lot of information about the database itself, 
  active connections, users, transactions prepared, running queries and more.</para>
  <para>The snapshot is created when any monitoring table is queried for the first time.  It is preserved 
  until the end of the current transaction to maintain a stable, consistent view for queries across multiple
  tables, such as a master-detail query. In other words, monitoring tables always behave as though they
  were in <database>SNAPSHOT TABLE STABILITY</database> (<quote>consistency</quote>) isolation, even if the 
  current transaction is started with a lower isolation level.</para>
  <para>To refresh the snapshot, the current transaction must be completed and the monitoring tables must be
  re-queried in a new transaction context.</para>
  <para><emphasis role="bold">Access Security</emphasis>
    <itemizedlist spacing="compact">
      <listitem>SYSDBA and the database owner have full access to all information available from the
      monitoring tables</listitem>
      <listitem>Regular users can see information about their own connections; other connections are 
      not visible to them</listitem>
    </itemizedlist>
  </para>
  <warning>
    <para>In a highly loaded environment, collecting information via the monitoring tables could have
    a negative impact on system performance.</para>
  </warning>
  <table id="fblangref25-appx05-tbl-montables">
  <?dbfo keep-together='auto'?>
    <title>List of Monitoring Tables</title>
    <tgroup cols="2">
      <colspec colname="colTable" colwidth="2*"></colspec>
      <colspec colname="colDesc" colwidth="3*"></colspec>
      <thead>
        <row valign="middle">
          <entry align="center">System Table</entry>
          <entry align="center">Contents</entry>
        </row>
      </thead>
      <tbody>
        <row valign="middle">
          <entry align="left"><database>MON$ATTACHMENTS</database></entry>
          <entry align="left">Information about active attachments to the database</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$CALL_STACK</database></entry>
          <entry align="left">Calls to the stack by active queries of stored procedures and triggers</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$CONTEXT_VARIABLES</database></entry>
          <entry align="left">Information about custom context variables</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$DATABASE</database></entry>
          <entry align="left">Information about the database to which the CURRENT_CONNECTION is
          attached</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$IO_STATS</database></entry>
          <entry align="left">Input/output statistics</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$MEMORY_USAGE</database></entry>
          <entry align="left">Memory usage statistics</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$RECORD_STATS</database></entry>
          <entry align="left">Record-level statistics</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$STATEMENTS</database></entry>
          <entry align="left">Statements prepared for execution</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$TRANSACTIONS</database></entry>
          <entry align="left">Started transactions</entry>
        </row>
      </tbody>
    </tgroup>
  </table>

  <section id="fblangref-appx05-monattach">
    <title>MON$ATTACHMENTS</title>
    <para>MON$ATTACHMENTS displays information about active attachments to the database.</para>
    <informaltable id="fblangref25-appx05-tbl-monattach" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Connection identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SERVER_PID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Server process identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Connection state:
              <simplelist type="horiz" columns="1">
                <member>0 - idle</member>
                <member>1 - active</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_NAME</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Connection string&mdash;the file name and full path to the
            primary database file</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$USER</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">The name of the user who is using this connection</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ROLE</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">The role name specified when the connection was established.
            If no role was specified when the connection was established, the field contains
            the text NONE</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PROTOCOL</database></entry>
            <entry align="center"><database>VARCHAR(10)</database></entry>
            <entry align="left">Remote protocol name</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_ADDRESS</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Remote address (address and server name)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Remote client process identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CHARACTER_SET_ID</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Connection character set identifier (see RDB$CHARACTER_SET
            in system table RDB$TYPES)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">The date and time when the connection was started</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$GARBAGE_COLLECTION</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Garbage collection flag (as specified in the attachment's DPB): 
            1=allowed, 0=not allowed</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PROCESS</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">The full file name and path to the executable file that
            established this connection</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section id="fblangref-appx05-monattach-kill">
      <title>Using MON$ATTACHMENTS to Kill a Connection</title>
      <para>Monitoring tables are read-only. However, the server has a built-in mechanism for
      deleting (and only deleting) records in the MON$ATTACHMENTS table, which makes it possible
      to close a connection to the database.
        <note>
          <title>Notes</title>
          <itemizedlist>
            <listitem>All the current activity in the connection being deleted is immediately
            stopped and all active transactions are rolled back</listitem>
            <listitem>The closed connection will return an error with
            the <function>isc_att_shutdown</function> code to the application</listitem>
            <listitem>Later attempts to use this connection (i.e., use its handle in API calls)
            will return errors</listitem>
          </itemizedlist>
        </note>
      </para>
      <formalpara>
        <title>Example</title>
        <para>&nbsp;Closing all connections except for your own (current):
          <blockquote><programlisting>
  DELETE FROM MON$ATTACHMENTS
    WHERE MON$ATTACHMENT_ID &lt;&gt; CURRENT_CONNECTION
          </programlisting></blockquote>
        </para>
      </formalpara>
    </section> <!-- kill a connection -->
  </section> <!-- MON$ATTACHMENTS -->

  <section id="fblangref-appx05-moncallstk">
    <title>MON$CALL_STACK</title>
    <para>MON$CALL_STACK displays calls to the stack from queries executing in stored
    procedures and triggers.</para>
    <informaltable id="fblangref25-appx05-tbl-moncallstk" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$CALL_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Call identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATEMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The identifier of the top-level SQL statement, the one that
            initiated the chain of calls. Use this identifier to find the records about the
            active statement in the MON$STATEMENTS table</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CALLER_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The identifier of the calling trigger or stored procedure</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OBJECT_NAME</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">PSQL object (module) name</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OBJECT_TYPE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">PSQL object type (trigger or stored procedure):
              <simplelist type="horiz" columns="1">
                <member>2 - trigger</member>
                <member>5 - stored procedure</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">The date and time when the call was started</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SOURCE_LINE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the source line in the SQL statement being executed
            at the moment of the snapshot</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SOURCE_COLUMN</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the source column in the SQL statement being executed 
            at the moment of the snapshot</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <formalpara>
      <title><database>EXECUTE STATEMENT</database> Calls</title>
      <para>Information about calls during the execution of the EXECUTE STATEMENT
      statement does not get into the call stack.</para>
    </formalpara>
    <formalpara>
      <title>Example using MON$CALL_STACK</title>
      <para>&nbsp;Getting the call stack for all connections except own:
        <blockquote><programlisting>
WITH RECURSIVE
  HEAD AS (
    SELECT
      CALL.MON$STATEMENT_ID, CALL.MON$CALL_ID,
      CALL.MON$OBJECT_NAME, CALL.MON$OBJECT_TYPE
    FROM MON$CALL_STACK CALL
    WHERE CALL.MON$CALLER_ID IS NULL
    UNION ALL
    SELECT
      CALL.MON$STATEMENT_ID, CALL.MON$CALL_ID,
      CALL.MON$OBJECT_NAME, CALL.MON$OBJECT_TYPE
    FROM MON$CALL_STACK CALL
      JOIN HEAD ON CALL.MON$CALLER_ID = HEAD.MON$CALL_ID
  )
SELECT MON$ATTACHMENT_ID, MON$OBJECT_NAME, MON$OBJECT_TYPE
FROM HEAD
  JOIN MON$STATEMENTS STMT ON STMT.MON$STATEMENT_ID = HEAD.MON$STATEMENT_ID
WHERE STMT.MON$ATTACHMENT_ID &lt;&gt; CURRENT_CONNECTION
        </programlisting></blockquote>
      </para>
    </formalpara>
  </section> <!-- MON$CALL_STACK -->

  <section id="fblangref-appx05-contxtvars">
    <title>MON$CONTEXT_VARIABLES</title>
    <para>MON$CONTEXT_VARIABLES displays information about custom context 
    variables.</para>
    <informaltable id="fblangref25-appx05-tbl-contxtvars" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Connection identifier. It contains a valid value only for a connection-level 
            context variable.  For transaction-level variables it is NULL.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaction identifier. It contains a valid value only for transaction-level
            context variables. For connection-level variables it is NULL.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$VARIABLE_NAME</database></entry>
            <entry align="center"><database>VARCHAR(80)</database></entry>
            <entry align="left">Context variable name</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$VARIABLE_VALUE	</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Context variable value</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$CONTEXT_VARIABLES -->

  <section id="fblangref-appx05-mondb">
    <title>MON$DATABASE</title>
    <para>MON$DATABASE displays the header information from the database 
    the current user is connected to.</para>
    <informaltable id="fblangref25-appx05-tbl-mondb" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$DATABASE_NAME</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">The file name and full path of the primary database file, 
            or the database alias</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_SIZE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Database page size in bytes</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ODS_MAJOR</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Major ODS version, e.g., 11</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ODS_MINOR</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Minor ODS version, e.g., 2</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the oldest [interesting] transaction (OIT)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_ACTIVE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the oldest active transaction (OAT)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_SNAPSHOT</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the transaction that was active at the
            moment when the OAT was started - oldest snapshot transaction (OST)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$NEXT_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of the next transaction, as it stood when
            the monitoring snapshot was taken</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_BUFFERS</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">The number of pages allocated in RAM for
            the database page cache</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SQL_DIALECT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Database SQL Dialect: 1 or 3</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SHUTDOWN_MODE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">The current shutdown state of the database:
              <simplelist type="horiz" columns="1">
                <member>0 - the database is online</member>
                <member>1 - multi-user shutdown</member>
                <member>2 - single-user shutdown</member>
                <member>3 - full shutdown</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SWEEP_INTERVAL</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Sweep interval</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$READ_ONLY</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Flag indicating whether the database is read-only (value 1)
            or read-write (value 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$FORCED_WRITES</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Indicates whether the write mode of the database is set 
            for synchronous write (forced writes ON, value is 1) or asynchronous write 
            (forced writes OFF, value is 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RESERVE_SPACE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">The flag indicating reserve_space (value 1) or
            use_all_space (value 0) for filling database pages</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CREATION_DATE</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">The date and time when the database was created or was last
            restored</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">The number of pages allocated for the database on an external 
            device</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$BACKUP_STATE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Current physical backup (nBackup) state:
              <simplelist type="horiz" columns="1">
                <member>0 - normal</member>
                <member>1 - stalled</member>
                <member>2 - merge</member>
              </simplelist>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$DATABASE -->

  <section id="fblangref-appx05-iostats">
    <title>MON$IO_STATS</title>
    <para>MON$IO_STATS displays input/output statistics. The counters
    are cumulative, by group, for each group of statistics.</para>
    <informaltable id="fblangref25-appx05-tbl-iostats" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistics group:
              <simplelist type="horiz" columns="1">
                <member>0 - database</member>
                <member>1 - connection</member>
                <member>2 - transaction</member>
                <member>3 - statement</member>
                <member>4 - call</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of database pages read</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_WRITES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of database pages written to</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_FETCHES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of database pages fetched</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_MARKS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of database pages marked</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$IO_STATS -->

  <section id="fblangref-appx05-memusage">
    <title>MON$MEMORY_USAGE</title>
    <para>MON$MEMORY_USAGE displays memory usage statistics.</para>
    <informaltable id="fblangref25-appx05-tbl-memusage" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistics group:
              <simplelist type="horiz" columns="1">
                <member>0 - database</member>
                <member>1 - connection</member>
                <member>2 - transaction</member>
                <member>3 - operator</member>
                <member>4 - call</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MEMORY_USED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">The amount of memory in use, in bytes. This data is
            about the high-level memory allocation performed by the server. It can
            be useful to track down memory leaks and excessive memory usage in
            connections, procedures, etc.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MEMORY_ALLOCATED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">The amount of memory allocated by the operating system, in bytes.
            This data is about the low-level memory allocation performed by the Firebird memory
            manager&mdash;the amount of memory allocated by the operating system&mdash;which can
            allow you to control the physical memory usage.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MAX_MEMORY_USED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">The maximum number of bytes used by this object</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MAX_MEMORY_ALLOCATED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">The maximum number of bytes allocated for this object by the
            operating system</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <note>
      <para>Not all records in this table have non-zero values. MON$DATABASE and objects
      related to memory allocation have non-zero values. Minor memory allocations are not
      accrued here but are added to the database memory pool instead.</para>
    </note>
  </section> <!-- MON$MEMORY_USAGE -->

  <section id="fblangref-appx05-recstats">
    <title>MON$RECORD_STATS</title>
    <para>MON$RECORD_STATS displays record-level statistics. The counters
    are cumulative, by group, for each group of statistics.</para>
    <informaltable id="fblangref25-appx05-tbl-recstats" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistics group:
              <simplelist type="horiz" columns="1">
                <member>0 - database</member>
                <member>1 - connection</member>
                <member>2 - transaction</member>
                <member>3 - statement</member>
                <member>4 - call</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_SEQ_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of records read sequentially</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_IDX_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of records read via an index</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_INSERTS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of inserted records</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_UPDATES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of updated records</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_DELETES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of deleted records</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_BACKOUTS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of records backed out</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_PURGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of records purged</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_EXPUNGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Count of records expunged</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$RECORD_STATS -->

  <section id="fblangref-appx05-statements">
    <title>MON$STATEMENTS</title>
    <para>MON$STATEMENTS displays statements prepared for execution.</para>
    <informaltable id="fblangref25-appx05-tbl-statements" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STATEMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statement identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Connection identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaction identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATE	</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statement state:
              <simplelist type="horiz" columns="1">
                <member>0 - idle</member>
                <member>1 - active</member>
                <member>2 - stalled</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">The date and time when the statement was prepared</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SQL_TEXT</database></entry>
            <entry align="center"><database>BLOB TEXT</database></entry>
            <entry align="left">Statement text in SQL</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>The STALLED state indicates that, at the time of the snapshot, the statement 
    had an open cursor and was waiting for the client to resume fetching rows.</para>
    <section id="fblangref-appx05-statements01">
      <title>Using <database>MON$STATEMENTS</database> to Cancel a Query</title>
      <para>Monitoring tables are read-only. However, the server has a built-in mechanism for
      deleting (and only deleting) records in the MON$STATEMENTS table, which makes it possible
      to cancel a running query.
        <note>
          <title>Notes</title>
          <itemizedlist>
            <listitem>If no statements are currently being executed in the connection, 
            any attempt to cancel queries will not proceed</listitem>
            <listitem>After a query is cancelled, calling execute/fetch API functions will 
            return an error with the <function>isc_cancelled</function> code</listitem>
            <listitem>Subsequent queries from this connection will proceed as normal</listitem>
          </itemizedlist>
        </note>
      </para>
      <formalpara>
        <title>Example</title>
        <para>&nbsp;Cancelling all active queries for the specified connection:
          <blockquote><programlisting>
DELETE FROM MON$STATEMENTS
  WHERE MON$ATTACHMENT_ID = 32
          </programlisting></blockquote>
        </para>
      </formalpara>
    </section>
  </section> <!-- MON$STATEMENTS -->

  <section id="fblangref-appx05-transacs">
    <title>MON$TRANSACTIONS</title>
    <para>MON$TRANSACTIONS reports started transactions. </para>
    <informaltable id="fblangref25-appx05-tbl-transacs" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Column Name</entry>
            <entry align="center">Data Type</entry>
            <entry align="center">Description</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaction identifier (number)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Connection identifier</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database></database>MON$STATE</entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Transaction state:
              <simplelist type="horiz" columns="1">
                <member>0 - idle</member>
                <member>1 - active</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">The date and time when the transaction was started</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TOP_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Top-level transaction identifier (number)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaction ID of the oldest [interesting] transaction (OIT)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_ACTIVE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaction ID of the oldest active transaction (OAT)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ISOLATION_MODE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Isolation mode (level):
              <simplelist type="horiz" columns="1">
                <member>0 - consistency (snapshot table stability)</member>
                <member>1 - concurrency (snapshot)</member>
                <member>2 - read committed record version</member>
                <member>3 - read committed no record version</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$LOCK_TIMEOUT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Lock timeout:
              <simplelist type="horiz" columns="1">
                <member>-1 - wait forever</member>
                <member>0 - no waiting</member>
                <member>1 or greater - lock timeout in seconds</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$READ_ONLY</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Flag indicating whether the transaction is read-only (value 1)
            or read-write (value 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$AUTO_COMMIT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Flag indicating whether automatic commit is used for the transaction (value 1) 
            or not (value 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$AUTO_UNDO</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Flag indicating whether the logging mechanism
            <emphasis>automatic undo</emphasis> is used for the transaction (value 1) or not (value 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistics identifier</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$TRANSACTIONS -->

</appendix>
