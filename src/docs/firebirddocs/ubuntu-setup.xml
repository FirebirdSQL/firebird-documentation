<?xml version="1.0" encoding="UTF-8"?>
<!-- <!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
 "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"> -->
<article id="ubusetup">
  <articleinfo>
    <title>Setting up Firebird on Ubuntu Linux</title>

    <author>
      <firstname>Rodney</firstname>

      <surname>Gedda</surname>
    </author>

    <author>
      <firstname>Marius</firstname>

      <surname>Popa</surname>
    </author>


    <edition>14 May 2011 – Document version 2.3</edition>
  </articleinfo>

  <section id="ubusetup-content">
    <title>Setting up Firebird on Ubuntu Linux</title>

    <para>This article describes the process of installing and running
    Firebird on Ubuntu Linux. It should also work without modification in the Debian GNU/Linux distribution
    (stable version named Squeeze and unstable version named Sid).
    Ubuntu is based on Debian core packages. Installing software with Ubuntu (or Kubuntu) is very
    straightforward and Firebird is no exception. This guide is based on
    Ubuntu 10.04 LTS <quote>Lucid Lynx</quote>.</para>

    <para>The version of Firebird packaged with Ubuntu <quote>Lucid Lynx</quote>
    is 2.1.3 and is included by default and is the latest stable. For other Ubuntu releases there is
    a Firebird stable <ulink url="http://help.ubuntu.com/community/Firebird2.1">ppa repository</ulink> from where you can install it.</para>


    <para>With administrator privileges on the target machine, issue the
    following command:</para>

    <blockquote>
      <screen>
      $ sudo su
      # apt-get install firebird2.1-super
      </screen>
    </blockquote>

    <para>Apt's dependency tracking will automatically propose all the
    packages required for a complete installation with the following
    output:</para>

    <blockquote>
      <screen>
      The following extra packages will be installed:
      firebird2.1-common firebird2.1-server-common libedit2
        libfbclient2 libicu38
      Suggested packages:
      firebird2.1-doc
      The following NEW packages will be installed:
      firebird2.1-common firebird2.1-server-common firebird2.1-super
        libedit2 libfbclient2 libicu38
      0 upgraded, 6 newly installed, 0 to remove and 1 not upgraded.
      Need to get 11.7MB of archives.
      After unpacking 28.4MB of additional disk space will be used.
      Do you want to continue [Y/n]? y
      </screen>
    </blockquote>


    <para>The packages will then download and install on the target machine. A
    new user <quote><systemitem class="username">firebird</systemitem></quote>
    will be created to run the server, but the server will not yet be started by default:</para>

    <blockquote>
      <screen>
      Selecting previously deselected package firebird2.1-super.
      (Reading database ... 542436 files and directories currently
        installed.)
      Unpacking firebird2.1-super 
        (from .../firebird2.1-super_2.1.3.18185-0.ds1-6build1_i386.deb) ...
      Processing triggers for ureadahead ...
      Setting up firebird2.1-super (2.1.3.18185-0.ds1-6build1) ...
      Created default security.fdb
      * Firebird 2.1 server manager not running.
      * Not starting Firebird 2.1 server manager
      * Use `dpkg-reconfigure firebird2.1-super' to enable.
      </screen>
    </blockquote>

    <para>If you want Firebird to start automatically, run dpkg-reconfigure on the package and click the Yes button.
     Then you will be asked again for the <database>SYSDBA</database> password:</para>

    <blockquote>
      <screen>
      # dpkg-reconfigure firebird2.1-super
      </screen>
    </blockquote>

    <para>If all goes well, Firebird Superserver will be started:</para>

    <blockquote>
      <screen>
      * Firebird 2.1 server manager not running.
      * Starting Firebird 2.1 server manager...               [ OK ]
      * Firebird 2.1 server manager already running.
      </screen>
    </blockquote>

    <para>If you're a seasoned Unix person but new to Ubuntu, you might be
    wondering where all the Firebird files are residing in the directory
    hierarchy. To see where all the files were installed by Apt, simply
    do:</para>

    <blockquote>
      <screen>
      # dpkg -L firebird2.1-super
      /.
      /etc
      /etc/init.d
      /etc/init.d/firebird2.1-super
      /etc/default
      /etc/default/firebird2.1-super
      /usr
      /usr/share
      /usr/share/doc
      /usr/share/lintian
      /usr/share/lintian/overrides
      /usr/share/lintian/overrides/firebird2.1-super
      /usr/bin
      /usr/bin/nbackup
      /usr/bin/qli
      /usr/bin/gbak
      /usr/bin/gfix
      /usr/bin/gpre
      /usr/bin/isql-fb
      /usr/bin/gsec
      /usr/bin/fbstat
      /usr/bin/gdef
      /usr/lib
      /usr/lib/firebird
      /usr/lib/firebird/2.1
      /usr/lib/firebird/2.1/bin
      /usr/lib/firebird/2.1/bin/fbmgr
      /usr/lib/firebird/2.1/bin/fbmgr.bin
      /usr/lib/firebird/2.1/bin/fb_lock_print
      /usr/lib/firebird/2.1/bin/fbguard
      /usr/lib/firebird/2.1/bin/fbserver
      /usr/lib/firebird/2.1/UDF
      /usr/lib/firebird/2.1/UDF/fbudf.so
      /usr/lib/firebird/2.1/UDF/ib_udf.so
      /usr/share/doc/firebird2.1-super</screen>
    </blockquote>

    <para>As mentioned, a new user <quote><systemitem
    class="username">firebird</systemitem></quote> is created on the target
    machine. With administrator access, set a password for this new
    user:</para>

    <blockquote>
      <screen>
      # passwd firebird
      Enter new UNIX password:
      Retype new UNIX password:
      </screen>
    </blockquote>

    <para>Now you can switch to the <systemitem class="username">firebird</systemitem> user with the
    <command>su</command> command if required.</para>

    <para>Install the examples and dev files:</para>

    <blockquote>
      <screen>
      # apt-get install firebird2.1-examples firebird2.1-dev 
      </screen>
    </blockquote>

    <para>The example databases will wind up in the directory tree 
      <filename class='directory'>/usr/share/doc/firebird2.1-examples/examples/</filename>.</para>

     <para>Now you can test your Firebird installation by connecting to an example database.
       Decompress the <filename>employee.fdb</filename> example database:</para>

    <blockquote>
      <screen>
      # cd /usr/share/doc/firebird2.1-examples/examples/empbuild/
      gunzip employee.fdb.gz
      chown firebird.firebird employee.fdb
      mv employee.fdb /var/lib/firebird/2.1/data/
      </screen>
    </blockquote>

    <para>Fire up the interactive shell and at the <prompt>SQL&gt;</prompt> prompt connect to employee database using the
      <ulink url="http://www.firebirdsql.org/manual/qsg2-databases.html#qsg2-databases-connecting">connect statement</ulink>:</para>

    <blockquote>
      <screen>
      isql-fb
      SQL> connect "/var/lib/firebird/2.1/data/employee.fdb" user 'SYSDBA'
               password '<replaceable>SYSDBApassword</replaceable>';
      </screen>
    </blockquote>

    <para>(replacing <replaceable>SYSDBApassword</replaceable>
      with the correct password for <database>SYSDBA</database>!)</para>

    <para>When you manage to successfully connect to the database you will see
    the message:</para>

    <blockquote>
      <screen>
      Database:  "/var/lib/firebird/2.1/data/employee.fdb", User: SYSDBA
      SQL>
      </screen>
    </blockquote>
    <para>Now, from the <prompt>SQL&gt;</prompt> prompt, feel free to browse around the employee database.
      For instance, you can list the tables and check the server version:</para>
    <blockquote>
      <screen>
      SQL> show tables;
       COUNTRY                                CUSTOMER
       DEPARTMENT                             EMPLOYEE
       EMPLOYEE_PROJECT                       JOB
       PROJECT                                PROJ_DEPT_BUDGET
       SALARY_HISTORY                         SALES
      SQL> show version;
      ISQL Version: LI-V2.1.3.18185 Firebird 2.1
      Server version:
      Firebird/linux Intel (access method),
        version "LI-V2.1.3.18185 Firebird 2.1"
      Firebird/linux Intel (remote server),
        version "LI-V2.1.3.18185 Firebird 2.1/tcp (borkstationx32)/P11"
      Firebird/linux Intel (remote interface),
        version "LI-V2.1.3.18185 Firebird 2.1/tcp (borkstationx32)/P11"
      on disk structure version 11.1
      SQL> quit;
      </screen>
    </blockquote>
    <para>If you want a GUI admin tool, you might check FlameRobin, which is included in the Ubuntu repository.
      It can be installed with a simple:</para>
    <blockquote>
      <screen>
      # apt-get install flamerobin
      </screen>
    </blockquote>



    <para>If you get an error message like <quote>Statement failed, SQLCODE =
    -551 no permission for read-write access to database
    /var/lib/firebird/2.1/data/employee.fdb</quote>, then the
    server process doesn't have read or write access to the database file.
    Change the ownership of the database to the user <systemitem
    class="username">firebird</systemitem> with:</para>
    <blockquote>
      <screen>
      # cd /var/lib/firebird/2.1/data/
      # chown firebird:firebird employee.fdb
      </screen>
    </blockquote>
    <para>If you've made it this far, your Firebird installation on Ubuntu has
    been a success. Have a nice day!</para>
  </section>
  <appendix id="ubusetup-dochist">
    <title>Document history</title>

    <para>The exact file history is recorded in the <filename
    class="directory">manual</filename> module in our CVS tree; see <ulink
    url="http://sourceforge.net/cvs/?group_id=9028">http://sourceforge.net/cvs/?group_id=9028</ulink></para>

    <para><revhistory>
        <revision>
          <revnumber>1.0</revnumber>

          <date>18 Apr 2007</date>
          <authorinitials>RG</authorinitials>

          <revdescription>
            <para>First edition.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.0–2.2</revnumber>

          <date>2009–2011</date>
          <authorinitials>MP</authorinitials>

          <revdescription>
            <para>Various additions and modifications.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.3</revnumber>

          <date>14 May 2011</date>
          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Removed superfluous spaces and corrected a number of language and/or logical errors throughout the document.
              Also inserted some linebreaks in screen elements, lest the text run off the page in the PDF.</para>
          </revdescription>
        </revision>

      </revhistory></para>
  </appendix>

  <appendix id="ubusetup-license">
    <title>License notice</title>

    <para>The contents of this Documentation are subject to the Public
    Documentation License Version 1.0 (the <quote>License</quote>); you may
    only use this Documentation if you comply with the terms of this License.
    Copies of the License are available at <ulink
    url="http://www.firebirdsql.org/pdfmanual/pdl.pdf">http://www.firebirdsql.org/pdfmanual/pdl.pdf</ulink>
    (PDF) and <ulink
    url="http://www.firebirdsql.org/manual/pdl.html">http://www.firebirdsql.org/manual/pdl.html</ulink>
    (HTML).</para>

    <para>The Original Documentation is titled <citetitle>Setting up Firebird
    on Ubuntu Linux</citetitle>.</para>

    <para>The Initial Writer of the Original Documentation is: Rodney
    Gedda.</para>

    <para>Copyright (C) 2007. All Rights Reserved. Initial Writer contact:
    rodney at gedda dot info.</para>
    
    <para>Contributors: Marius Popa, Paul Vinkenoog.</para>
    
    <para>Modifications applied by Contributors are Copyright (C) 2009-2011 by their respective authors. All Rights Reserved.</para>

  </appendix>
</article>
