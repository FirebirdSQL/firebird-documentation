<?xml version="1.0" encoding="UTF-8"?>
<!-- For standalone validation, uncomment the following DOCTYPE declaration. -->
<!-- DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"> "file:../docs/docbookx/docbookx.dtd" -->
<article id="qsg">
  <articleinfo>
    <title>Firebird Quick Start Guide</title>

    <author>
      <firstname>Helen</firstname>

      <surname>Borrie</surname>
    </author>
  </articleinfo>

  <section id="qsg-about">
    <title>About this guide</title>

    <para>This guide is an introduction for the complete newcomer to a few
    essentials for getting off to a quick start with a Firebird binary kit.
    For the fine details of configuring and running your server and tuning
    your installation, please refer to Chapters 4-6 of the <citetitle>Using
    Firebird</citetitle> manual, distributed on the <ulink
    url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_cd">IBPhoenix
    CD</ulink>.</para>

    <para>The <citetitle>Firebird Quick Start Guide</citetitle> started life
    as Chapter 1 of the <citetitle>Using Firebird</citetitle> manual, sold on
    CD by <ulink url="http://www.ibphoenix.com">IBPhoenix</ulink>. Later it
    was published separately on the Internet. In June 2004, IBPhoenix donated
    the guide to the Firebird Project.</para>
  </section>

  <section id="qsg-kit-contents">
    <title>What is in the kit?</title>

    <para>All of the kits contain all of the components needed to install the
    Firebird server:</para>

    <itemizedlist>
      <listitem>
        <para>the Firebird server executable</para>
      </listitem>

      <listitem>
        <para>a client library located on the server machine</para>
      </listitem>

      <listitem>
        <para>the command-line tools</para>
      </listitem>

      <listitem>
        <para>the standard user-defined function libraries</para>
      </listitem>

      <listitem>
        <para>a sample database</para>
      </listitem>

      <listitem>
        <para>the C header files (not needed by beginners!)</para>
      </listitem>

      <listitem>
        <para>release notes – ESSENTIAL READING!</para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="qsg-disk-locations">
    <title>Default disk locations</title>

    <para>The following table describes the default disk locations for the
    components on Windows and Linux. Information is provided in two version
    contexts:</para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>versions prior to Firebird 1.5</para>
      </listitem>

      <listitem>
        <para>versions from Firebird 1.5 onward</para>
      </listitem>
    </itemizedlist>

    <para><warning>
        <para>These differences are important. Versions prior to Firebird 1.5
        use many of the same locations, component names and resource links as
        InterBase 6.x and prior versions of InterBase. Hence, it is not
        possible to run both a Firebird server and an InterBase server on the
        same machine with these versions.</para>
      </warning></para>

    <para>In the major codebase revision starting at v.1.5, the old hard links
    to InterBase artifacts were removed and many of the major components were
    renamed. Firebird 1.5 may permit a running InterBase® server to be
    present. It is a certain objective for Firebird 2.</para>

    <table frame="all" id="qsg-tbl-firebird-components"
           xreflabel="Firebird installation components table">
      <title>Components of the Firebird installation</title>

      <tgroup cols="4">
        <colspec align="left" colname="col-platform" />

        <colspec align="left" colname="col-component" />

        <colspec align="left" colname="col-filename" />

        <colspec align="left" colname="col-location" />

        <thead>
          <row>
            <entry><para>Platform</para></entry>

            <entry><para>Component</para></entry>

            <entry><para>File Name</para></entry>

            <entry><para>Default Location</para></entry>
          </row>
        </thead>

        <tbody valign="top">
          <row>
            <entry morerows="3"><para>32-bit and 64-bit Windows</para></entry>

            <entry><para>Firebird server</para></entry>

            <entry><para>Pre v.1.5: ibserver.exe</para><para>v.1.5 and onward:
            fbserver.exe</para></entry>

            <entry><para>c:\Program Files\Firebird\bin</para></entry>
          </row>

          <row>
            <entry><para>Command-line tools</para></entry>

            <entry><para>gbak.exe, gfix.exe, gstat.exe, etc.</para></entry>

            <entry><para>c:\Program Files\Firebird\bin</para></entry>
          </row>

          <row>
            <entry><para>Sample database</para></entry>

            <entry><para>Employee.gdb<!--CHECK: 1.5+ employee.fdb--></para></entry>

            <entry><para>c:\Program Files\Firebird\examples</para></entry>
          </row>

          <row>
            <entry><para>User-defined function (UDF) libraries</para></entry>

            <entry><para>ib_udf.dll &amp;
            ib_utils.dll</para><para>fbudf.dll</para></entry>

            <entry><para>c:\Program Files\Firebird\udf</para></entry>
          </row>

          <row>
            <entry><para>Windows NT, 2000, XP</para></entry>

            <entry><para>Firebird client</para></entry>

            <entry><para>Pre v.1.5: gds32.dll</para><para>v.1.5 and onward:
            gds32.dll, linking through to xxxxx.dll</para></entry>

            <entry><para>c:\Winnt\System32</para></entry>
          </row>

          <row>
            <entry><para>Windows 9x, ME</para></entry>

            <entry><para>Firebird client</para></entry>

            <entry><para>As above</para></entry>

            <entry><para>c:\Windows</para></entry>
          </row>

          <row>
            <entry morerows="4"><para>Linux and possibly other UNIX
            distros</para></entry>

            <entry><para>Firebird server</para></entry>

            <entry><para>Pre v.1.5: ibserver</para><para>v.1.5 and onward:
            fbserver</para></entry>

            <entry><para>/opt/interbase/bin</para><para>TBA</para></entry>
          </row>

          <row>
            <entry><para>Command-line tools</para></entry>

            <entry><para>gbak, gfix, gstat, etc.</para></entry>

            <entry><para>Pre v.1.5: /opt/interbase/bin</para><para>v.1.5 and
            onward: TBA</para></entry>
          </row>

          <row>
            <entry><para>Sample database</para></entry>

            <entry><para>employee.gdb<!--CHECK: 1.5+ employee.fdb--></para></entry>

            <entry><para>Pre v.1.5: /opt/interbase/examples <!--CHECK! It said "bin" here...--></para><para>v.1.5
            and onward: TBA</para></entry>
          </row>

          <row>
            <entry><para>UDF libraries</para></entry>

            <entry><para>Pre v.1.5: ib_udf.so</para><para>v.1.5 and onward:
            ib_udf.so, fbudf.so <!--CHECK: ib_udf.so still present in 1.5+ ?--></para></entry>

            <entry><para>/opt/interbase/udf</para><para>TBA</para></entry>
          </row>

          <row>
            <entry><para>Firebird client</para></entry>

            <entry><para>Pre v.1.5: libgds.so.0 (binary), libgds.so
            (symlink)</para><para>v.1.5 and onward: TBA</para></entry>

            <entry><para>/usr/lib</para></entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>

  <section id="qsg-installing-firebird">
    <title>Installing Firebird</title>

    <section>
      <title>Installation drives</title>

      <para>Firebird server – and any databases you create or connect to –
      must reside on a hard drive that is physically connected to the host
      machine. You cannot locate components of the server, or any database, on
      a mapped drive, a filesystem share or a network filesystem.</para>

      <note>
        <para>You can mount a read-only database on a CD-ROM drive but you
        cannot run Firebird server from one.</para>
      </note>
    </section>

    <section>
      <title>Installation script or program</title>

      <para>Although it is possible to install Firebird by a filesystem
      copying method – such as <quote>untarring</quote> a snapshot build file
      or decompressing a structured WinZip <filename
      class="extension">.zip</filename> file – it is strongly recommended that
      you use the distributed release kit the first time you install Firebird.
      The Windows executable installation script, the Linux
      <application>rpm</application> (<application>RedHat Package
      Manager</application>) program and the official <filename
      class="extension">.tar.gz</filename> for other Posix platforms perform
      some essential setup tasks. Provided you follow the instructions
      correctly, there should be nothing for you to do upon completion but log
      in and go!</para>

      <section>
        <title>Windows platforms</title>

        <para>On server platforms – Windows NT, 2000 and XP – the Firebird
        service will be running when the installation completes. Next time you
        boot up your server machine, it will be started automatically. To find
        out how to start and stop the server manually, see <citetitle>Running
        Firebird on Windows</citetitle>, p. 54 chapter 4 of <citetitle>Using
        Firebird</citetitle>.</para>

        <para>The non-server Windows platforms – Windows 95, 98 and ME – do
        not support services. The installation will start Firebird server as
        an application, protected by another application known as the
        Guardian. If the server application should terminate abnormally for
        some reason, the Guardian will attempt to restart it.</para>

        <note>
          <para>A copy of the client library – <filename
          class="libraryfile">gds32.dll</filename> – will have been installed
          in your system directory.</para>
        </note>
      </section>

      <section>
        <title>Posix platforms</title>

        <para>In all cases, read the release notes that pertain to the version
        of Firebird that you are going to install. There may be significant
        variations from release to release of any Posix operating system,
        especially the open source ones. Where possible, the build engineers
        for each Firebird version have attempted to document any known
        issues.</para>

        <tip>
          <para>If you do not find a copy of the release notes in your kit, go
          back to the <ulink
          url="http://firebird.sourceforge.net/index.php?op=files">Downloads
          page</ulink> of the Firebird website at <ulink
          url="http://firebird.sourceforge.net">http://firebird.sourceforge.net</ulink>
          and download a copy from there.</para>
        </tip>

        <para>If you have a Linux distribution that supports
        <application>rpm</application> installs, consult the appropriate
        platform documentation for instructions about using
        <application>RedHat Package Manager</application>. In most
        distributions you will have the choice of performing the install from
        a command shell or through a GUI interface.</para>

        <para>For Linux distributions that cannot process
        <application>rpm</application> programs, and for the various UNIX
        flavors, use the <filename class="extension">.tar.gz</filename> kit.
        You will find detailed instructions in the release notes.</para>

        <para>Shell scripts have been provided. In some cases, the release
        notes may instruct you to modify the scripts and make some manual
        adjustments.</para>
      </section>
    </section>
  </section>

  <section id="qsg-testing-installation">
    <title>Testing your installation</title>

    <para>If everything works as designed, the Firebird server process will be
    running on your server upon completion of the installation. It will start
    up automatically whenever you restart your server.</para>

    <para>At this point, it is assumed that you will use the recommended
    TCP/IP protocol for your Firebird client/server network.</para>

    <note>
      <para>For information about using NetBEUI protocol in an all-Windows
      environment, refer to Chapter 6, <citetitle>Network
      Configuration</citetitle> in the <citetitle>Using Firebird</citetitle>
      manual.</para>
    </note>

    <warning>
      <para>IPX/SX networks are not supported by Firebird.<!--CHECK: IPX/SPX ?--></para>
    </warning>

    <section>
      <title>Pinging the server</title>

      <para>Usually, the first thing you will want to do once installation is
      complete is ping the server. This just gives you a reality check to
      ensure that your client machine is able to see the host machine in your
      network. For example, if your server's IP address in the domain that is
      visible to your client is 192.13.14.1, go to a command shell and type
      the command</para>

      <blockquote>
        <para><command>ping 192.13.14.1</command></para>
      </blockquote>

      <para>substituting this example IP address for the IP address that your
      server is broadcasting.</para>

      <warning>
        <para>If you get a timeout message, study the <citetitle>Using
        Firebird</citetitle> manual – Chapter 6: <citetitle>Network
        Configuration</citetitle>, and Chapter 7: <citetitle>Troubleshooting
        Connections</citetitle> – for further instructions.</para>
      </warning>

      <para>Note that if you are connecting to the server from a local client
      – that is, a client running on the same machine as the server – you can
      ping the virtual TCP/IP loopback server:</para>

      <blockquote>
        <para><command>ping localhost</command> –or– <command>ping
        127.0.0.1</command></para>
      </blockquote>
    </section>

    <section>
      <title>Checking that the Firebird server is running</title>

      <para>After installation, Firebird server should be running as a service
      on Windows NT, 2000 or XP or on Linux.</para>

      <section>
        <title>Windows NT4, 2000 and XP</title>

        <para>For the Windows server platforms, start the Services applet on
        the Control Panel.</para>

        <section>
          <title>Firebird Server and The Guardian</title>

          <para>This illustration shows the Services applet display on Windows
          2000. The appearance may vary from one Windows server edition to
          another.</para>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="images/services.png"
                         format="PNG" />
            </imageobject>
          </mediaobject>

          <para>If the Guardian is running (as shown in the screenshot, over)
          it may have a different service name because of version
          changes.</para>

          <note>
            <para>On Windows 2000 and XP, the Guardian is a convenience rather
            than a necessity, since these two operating systems have the
            facility to watch and restart services. It is recommended that you
            keep Guardian active for other platforms if a SYSDBA is not
            available to restart the server manually in the event that it is
            stopped for some reason.</para>
          </note>
        </section>

        <section>
          <title>Windows Control Panel applet</title>

          <!--Inline image of Firebird Manager icon here-->

          <para>Earlier distributions of Firebird for Windows kits installed
          the InterBase Manager applet into the Control Panel of operating
          systems that support services. It was omitted from Firebird 1.0
          because a number of Firebird-specific <quote>Firebird [Server]
          Manager</quote> implementations became available through open source
          channels. Whilst the applet is not essential, it does provide a
          convenient way to start and stop the service.</para>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="images/servicemgr.png"
                         format="PNG" />
            </imageobject>
          </mediaobject>

          <para>If you want a Firebird Manager applet and you do not find one
          installed in the Control Panel of your Windows server, download the
          <ulink
          url="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/firebird/addons/CPA-1/">Delphi
          source code</ulink> from the addons branch of the Firebird CVS tree
          or a <ulink
          url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_contrib_download#APP ">compiled
          version</ulink> from www.ibphoenix.com.</para>

          <para>The Control Panel applet will be similar in appearance to the
          illustration.</para>
        </section>
      </section>

      <section>
        <title>Windows 9x or ME</title>

        <para>On Windows 9x or ME Firebird server should be running as an
        application, monitored by the Guardian. The Guardian's icon should
        appear in the tray with a green graphic. If the icon is flashing or
        showing as a red graphic, it indicates that Guardian is either
        attempting to start the server or has failed.</para>

        <para>If you used an installation kit that installed but did not
        automatically start the Guardian and the Firebird server, you can set
        it up as follows:</para>

        <orderedlist>
          <listitem>
            <para>Locate the executable file for the Guardian program
            (<filename>ibguard.exe</filename>) and create a shortcut for it in
            the Startup area of your machine's Start Menu.</para>
          </listitem>

          <listitem>
            <para>Open the Properties dialog of the shortcut and go to the
            field where the command line is.</para>
          </listitem>

          <listitem>
            <para>Edit the command line so it reads as follows:</para>

            <blockquote>
              <para><literal>ibguard.exe -a</literal></para>
            </blockquote>
          </listitem>

          <listitem>
            <para>Save and close the Properties dialog.</para>
          </listitem>

          <listitem>
            <para>Double-click on the shortcut to start the Guardian. The
            Guardian will proceed to start
            <filename>ibserver.exe</filename>.</para>
          </listitem>
        </orderedlist>

        <para>The Guardian should start up automatically next time you boot
        your Windows 9x or ME machine.</para>

        <warning>
          <para>There is currently no Control Panel applet which will detect
          the Firebird server application running on these non-server Windows
          versions.</para>
        </warning>
      </section>

      <section>
        <title>Posix servers</title>

        <para>Use the <command>top</command> command in a command shell to
        inspect the running processes interactively. If Firebird is running,
        you should see one process named
        <application><systemitem>ibguard</systemitem></application> (this is
        Guardian), one main and zero or more child processes named
        <application>ibserver</application> or
        <application>fbserver</application> – which one depends on the
        distribution of Firebird which you have installed.</para>

        <para>The following screenshot shows the output of
        <application>top</application>, restricted by grep to show only
        processes with names starting with the characters
        <literal>ib</literal>, i.e.</para>

        <blockquote>
          <para><command>top -A | grep ib</command></para>
        </blockquote>

        <!--Screenshot goes here - or rather make a <screen> here!-->

        <note>
          <para>If your Firebird server uses the Classic architecture, the
          process name is <application>gds_inet_server</application>. There
          will be one instance of this process running for each connection.
          Use <command>top -A | grep gds</command> to look at them.</para>
        </note>
      </section>
    </section>
  </section>

  <section id="qsg-other-necessities">
    <title>Other things you need</title>

    <section>
      <title>A network address for the server</title>

      <itemizedlist>
        <listitem>
          <para>If you are on a managed network, get the server's IP address
          from your system administrator</para>
        </listitem>

        <listitem>
          <para>If you have a simple network of two machines linked by a
          crossover cable, you can set up your server with any IP address you
          like except 127.0.0.1 (which is reserved for a local loopback
          server) and, of course, the IP address which you are using for your
          client machine. If you know the <quote>native</quote> IP addresses
          of your network cards, and they are different, you can simply use
          those</para>
        </listitem>

        <listitem>
          <para>If you are intending to try out a single-machine installation
          of both client and server, you should use the local loopback server
          address – localhost, with the IP address 127.0.0.1</para>
        </listitem>
      </itemizedlist>

      <note>
        <para>On Windows, it is possible to connect locally to the server,
        without using a local TCP/IP loopback. This is not a TCP/IP connection
        and it is not a thread-safe way to connect to a local server. For
        using single instances of the command-line tools
        (<application>gsec</application>, <application>gbak</application>
        etc.) it works just fine.</para>
      </note>
    </section>

    <section>
      <title>Default user name and password</title>

      <para>The SYSDBA user has all privileges on the server. The installation
      program will install the SYSDBA user with the password
      <literal>masterkey</literal>.</para>

      <note>
        <para>Actually, it is <literal>masterke</literal>, since all
        characters after the eighth one are ignored.</para>
      </note>

      <para>If your server is exposed to the Internet <emphasis>at
      all</emphasis>, you should change this password immediately using the
      <application>gsec</application> command-line utility.</para>

      <section>
        <title>How to change the SYSDBA password</title>

        <para>You need to be logged into the operating system as Superuser
        (root on Linux) to run <application>gsec</application>. Let's say you
        decide to change the SYSDBA password to
        <literal>icuryy4me</literal></para>

        <procedure>
          <step>
            <para>Go to a command shell on your server and change to the
            directory where the command-line utilities are located. Refer to
            the <xref linkend="qsg-tbl-firebird-components" /> to find this
            location.</para>
          </step>

          <step>
            <para>Type the following (it is case-sensitive on all platforms
            except Windows):</para>

            <blockquote>
              <para><command>gsec -user sysdba -password
              masterkey</command></para>
            </blockquote>

            <para>You should now see the shell prompt for the gsec
            utility:</para>

            <blockquote>
              <para><prompt>GSEC&gt;</prompt></para>
            </blockquote>
          </step>

          <step>
            <para>Type this command:</para>

            <blockquote>
              <para><userinput>modify sysdba -pw icuryy4me</userinput></para>
            </blockquote>
          </step>

          <step>
            <para>Press <keycap>ENTER</keycap>. The new password
            <literal>icuryy4me</literal> is now encrypted and saved and
            <literal>masterkey</literal> is no longer valid.</para>
          </step>

          <step>
            <para>Now quit the <application>gsec</application> shell:</para>

            <blockquote>
              <para><userinput>quit</userinput></para>
            </blockquote>
          </step>
        </procedure>

        <note>
          <para>Because Firebird ignores all characters in a password past the
          eighth character, <literal>icuryy4m</literal> will work, as will
          <literal>icuryy4monkeys</literal>.</para>
        </note>
      </section>
    </section>

    <section>
      <title>An Admin tool</title>

      <para>The Firebird kit does not come with a GUI admin tool. It does have
      a set of command-line tools, executable programs which are located in
      the <filename class="directory">./bin</filename> directory of your
      Firebird installation.</para>

      <para>The range of excellent GUI tools available for use with a Windows
      client machine is too numerous to describe here. A few GUI tools written
      in Borland Kylix, for use on Linux client machines, are also in various
      stages of completion.</para>

      <para>Inspect the <ulink
      url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_contrib_download#ADM">Downloads
      &gt; Contributed &gt; Admin Tools page</ulink> at <ulink
      url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink> for all
      of the options.</para>

      <note>
        <para>You can use a Windows client to access a Linux server and
        vice-versa.</para>
      </note>
    </section>
  </section>

  <section id="qsg-connecting">
    <title>Connecting to the sample database</title>

    <para>In the <filename class="directory">./examples</filename> directory
    of your Firebird installation is a sample database named
    <filename>employee.gdb</filename>. You can use this database to <quote>try
    your wings</quote>.</para>

    <warning>
      <para>If you are running the server on Windows XP or ME, be sure to
      rename this test database to <filename>employee.</filename><emphasis
      role="bold"><filename>fdb</filename></emphasis> to get around the System
      Restore utility, which targets files with a <filename
      class="extension">.gdb</filename> extension. There is more information
      about this problem in the release notes.</para>
    </warning>

    <section>
      <title>Server name and path</title>

      <para>If you move the sample database, be sure you move it to a hard
      disk that is physically attached to your server machine. Shares, mapped
      drives or (on Unix) mounted SMB (Samba) filesystems will not work. The
      same rule applies to any databases that you create.</para>

      <para>There are two elements to a TCP/IP connection string: the server
      name and the disk/filesystem path. Its format is as follows:</para>

      <itemizedlist>
        <listitem>
          <para>For a Linux server:</para>

          <blockquote>
            <para>servername:/filesystem-path/database-file</para>
          </blockquote>

          <para>Example on a Linux or other Posix server named <systemitem
          class="systemname">serverxyz</systemitem>:</para>

          <blockquote>
            <para><filename>serverxyz:/opt/interbase/examples/employee.gdb</filename></para>
          </blockquote>
        </listitem>

        <listitem>
          <para>For a Windows server:</para>

          <blockquote>
            <para>servername:D:\filesystem-path\database-file</para>
          </blockquote>

          <para>Example on Windows:</para>

          <blockquote>
            <para><filename>serverxyz:C:\Program
            Files\Firebird\examples\employee.gdb</filename></para>
          </blockquote>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>The CONNECT statement</title>

      <para>Connecting to a Firebird database always requires the user to
      <quote>log in</quote> using a user name and a valid password – widely
      referred to as a log-in or login. Any user other than <database
      class="name">SYSDBA</database> or root (on Posix systems only) needs
      also to have permissions to objects inside a database. For simplicity
      here, we will look at logging in as <database
      class="name">SYSDBA</database> using the password
      <literal>masterkey</literal>.</para>

      <section>
        <title>Using <application>isql</application></title>

        <para>There are several different ways to connect to a database using
        <application>isql</application>. One way is to start
        <application>isql</application> in its interactive shell:</para>

        <para>Go to the <filename class="directory">./bin</filename> directory
        of your Firebird installation and, at that prompt, type the command
        <command>isql</command> (note: ↵ means <quote>hit
        <keycap>Enter</keycap></quote>):</para>

        <screen>C:\Program Files\Firebird\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database
SQL&gt;CONNECT "C:\Program Files\Firebird\examples\Employee.gdb"
user 'SYSDBA' password 'masterkey';↵</screen>

        <important>
          <para>In <application>isql</application>, make sure that every
          statement ends with a semicolon. If you forget, the prompt will
          change from <prompt>SQL&gt;</prompt> to <prompt>CON&gt;</prompt> and
          you won't be able to continue until you type in the semicolon and
          press <keycap>Enter</keycap> again.</para>
        </important>

        <warning>
          <para>Although single quote symbols are the <quote>norm</quote> for
          delimiting strings in Firebird, double quote symbols were used with
          the database path string in the above example. This is sometimes
          necessary with some of the command-line utilities where the path
          string contains spaces. Single quotes should work for paths that do
          not contain spaces.</para>
        </warning>

        <para>At this point, <application>isql</application> will inform you
        that you are connected:</para>

        <screen>DATABASE "C:\Program Files\Firebird\examples\Employee.gdb", User: sysdba
SQL&gt;</screen>

        <para>You can now continue to play about with the
        <filename>employee.gdb</filename> database. The characters
        <acronym>isql</acronym> stand for <emphasis>interactive SQL
        [utility]</emphasis>. You can use it for querying data, getting
        information about the metadata, creating database objects, running
        data definition scripts and much more.</para>

        <para>To get back to the command prompt type</para>

        <screen>SQL&gt;QUIT;↵</screen>

        <para>For more information about <application>isql</application>, see
        <citetitle>Using Firebird</citetitle>, Chapter 10:
        <citetitle>Interactive SQL Utility (isql)</citetitle>.</para>
      </section>

      <section>
        <title>Using a GUI client</title>

        <para>GUI client tools usually take charge of composing the
        <database>CONNECT</database> string for you, using server, path, user
        name and password information that you type into prompting fields. Use
        the elements as described in the preceding topic.</para>

        <note>
          <itemizedlist spacing="compact">
            <listitem>
              <para>It is quite common for such tools to expect the entire
              server + path as a single string</para>
            </listitem>

            <listitem>
              <para>Remember that file names and commands on Linux and other
              Posix command shells are case-sensitive</para>
            </listitem>
          </itemizedlist>
        </note>
      </section>
    </section>
  </section>

  <section id="qsg-creating">
    <title>Creating a database using <application>isql</application></title>

    <para>There is more than one way to create a database using
    <application>isql</application>. Here, we will look at one simple way to
    create a database interactively – although, for your serious database
    definition work, you should create and maintain your metadata objects
    using data definition scripts. There is a complete chapter in the
    <citetitle>Using Firebird</citetitle> manual discussing this topic.</para>

    <section>
      <title>Starting <application>isql</application></title>

      <para>To create a database interactively using the
      <application>isql</application> command shell, you need to be working on
      the server. Get to a command prompt in Firebird's <filename
      class="directory">./bin</filename> directory and start
      <application>isql</application> as follows:</para>

      <screen>C:\Program Files\Firebird\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database</screen>
    </section>

    <section>
      <title>The CREATE DATABASE statement</title>

      <para>Now, you can create your new database interactively. Let's suppose
      that you want to create a database named <filename>test.fdb</filename>
      and store it in a directory named <filename
      class="directory">data</filename> on your <systemitem
      class="filesystem">D</systemitem> drive:</para>

      <screen>SQL&gt;CREATE DATABASE 'D:\data\test.fdb' page_size 8192 user 'SYSDBA' password 'masterkey';↵</screen>

      <para>The database will be created and, after a few moments, the SQL
      prompt will reappear. You are now connected to the new database and can
      proceed to create some test objects in it.</para>

      <para>To verify that there really is a database there, type in this
      query:</para>

      <screen>SQL&gt;SELECT * FROM RDB$RELATIONS;↵</screen>

      <para>The screen will fill up with a large amount of data! This query
      selects all of the rows in the system table where Firebird stores the
      metadata for tables. An <quote>empty</quote> database is not empty – it
      contains a database which will become populated with metadata as you
      begin creating objects in your database.</para>

      <para>To get back to the command prompt type</para>

      <screen>SQL&gt;QUIT;↵</screen>

      <para>For more information about <application>isql</application>, see
      <citetitle>Using Firebird</citetitle>, Chapter 10:
      <citetitle>Interactive SQL Utility (isql)</citetitle>.</para>
    </section>
  </section>

  <section id="qsg-client-only-install">
    <title>Performing a client-only install</title>

    <para>Each remote client machine needs to have the client library –
    <filename class="libraryfile">libgds.so</filename> on Posix clients,
    <filename class="libraryfile">gds32.dll</filename> on Windows clients –
    that matches the release version of the Firebird server.</para>

    <para>Firebird versions from 1.5 onward require an additional client
    library named <filename class="libraryfile">libfb.so</filename> or
    <filename class="libraryfile">fb32.dll</filename> which contains the full
    library. In these newer distributions, the <quote>gds</quote> named files
    are distributed to maintain compatibility with third-party products which
    need these files. Internally, the libraries will <quote>jump</quote> to
    the correct access points in the renamed libraries.</para>

    <para>Some extra pieces are also needed for the client-only
    install.</para>

    <section>
      <title>Windows</title>

      <para>At the time of publication, no compact installation program was
      available to assist with installing the client pieces on a Windows
      client. If you are in the common situation of running Windows clients to
      a Linux or other Posix Firebird server, you need to download the full
      Windows installation kit that corresponds to the version of Firebird
      server you install on your Linux or other server machine.</para>

      <para>Fortunately, once you have the kit, the Windows client-only
      install is easy to do. Run the installation program, just as though you
      were going to install the server – but select the CLIENT ONLY option
      from the install menu.</para>
    </section>

    <section>
      <title>Linux and some other Posix clients</title>

      <para>A small-footprint client install program for Linux clients is not
      available either. Additionally, some Posix flavors – even within the
      Linux constellation – have somewhat idosyncratic requirements for
      filesystem locations. For these reasons, not all *x distributions for
      Firebird even contain a client-only install option.</para>

      <para>For most Linux flavors, the following procedure is suggested for
      Firebird versions lower than 1.5. Log in as <systemitem
      class="username">root</systemitem> for this.</para>

      <procedure>
        <step>
          <para>Look for <filename class="libraryfile">libgds.so.0</filename>
          in <filename class="directory">/opt/interbase/lib</filename> on the
          server where Firebird server is installed. Copy it to <filename
          class="directory">/usr/lib</filename> on the client.</para>
        </step>

        <step>
          <para>Create the symlink <filename
          class="libraryfile">libgds.so</filename> for it, using the following
          command:</para>

          <blockquote>
            <para><command>ln -s /usr/lib/libgds.so.0
            /usr/lib/libgds.so</command></para>
          </blockquote>
        </step>

        <step>
          <para>Copy the <filename>interbase.msg</filename> file to <filename
          class="directory">/opt/interbase</filename></para>
        </step>

        <step>
          <para>In system-wide default shell profile, or using
          <function>setenv()</function> from a shell, create the
          <envar>INTERBASE</envar> environment variable and point it to
          <filename class="directory">/opt/interbase</filename>, to enable the
          API routines to locate the messages.</para>
        </step>
      </procedure>
    </section>
  </section>

  <section id="qsg-firebird-sql">
    <title>Firebird SQL</title>

    <para>Every database management system has its own idiosyncrasies in the
    ways it implements SQL. Firebird adheres to the SQL standard more
    rigorously than any other RDBMS except possibly its "cousin", InterBase®.
    Developers migrating from products that are less standards-compliant often
    wrongly suppose that Firebird is quirky, whereas many of its apparent
    quirks are not quirky at all.</para>

    <section>
      <title>String delimiter symbol</title>

      <para>Strings in Firebird are delimited by a pair of single quote
      symbols – <literal>'I am a string'</literal> – (ASCII code 39,
      <emphasis>not</emphasis> 96). If you used earlier versions of Firebird's
      relative, InterBase®, you might recall that double and single quotes
      were interchangeable as string delimiters. Double quotes cannot be used
      as string delimiters in Firebird.</para>
    </section>

    <section>
      <title>Double-quoted identifiers</title>

      <para>Before the SQL-92 standard, it was not legal to have object names
      (identifiers) in a database that duplicated keywords in the language,
      were case-sensitive or contained spaces. SQL-92 introduced a single new
      standard to make any of them legal, provided that the identifiers were
      defined within pairs of double-quote symbols (ASCII 34) and were always
      referred to using double-quote delimiters.</para>

      <para>The purpose of this <quote>gift</quote> was to make it easier to
      migrate metadata from non-standard RDBMSs to standards-compliant ones.
      The down-side is that, if you choose to define an identifier in double
      quotes, its case-sensitivity and the enforced double-quoting will remain
      mandatory.</para>

      <para>Firebird does permit a slight relaxation under a very limited set
      of conditions: if the identifier which was defined in double-quotes 1)
      was defined as all upper-case, 2) is not a keyword and 3) does not
      contain any spaces, then it can be used in SQL unquoted as long as it is
      used in all upper-case.</para>

      <para>Unless you have a compelling reason to define quoted identifiers,
      it is usually recommended that you avoid them. Firebird happily accepts
      a mix of quoted and unquoted identifiers – so there is no problem
      including that keyword which you inherited from a legacy database, if
      you need to.</para>

      <warning>
        <para>Some database admin tools enforce double-quoting of
        <emphasis>all</emphasis> identifiers by default. Try to choose a tool
        which makes double-quoting optional.</para>
      </warning>
    </section>

    <section>
      <title>Apostrophes in strings</title>

      <para>If you need to use an apostrophe inside a Firebird string, you can
      <quote>escape</quote> the apostrophe character by preceding it with
      another apostrophe.</para>

      <para>For example, this string will give an error:</para>

      <blockquote>
        <para><literal>'Joe's Emporium'</literal></para>
      </blockquote>

      <para>because the parser encounters the apostrophe and interprets the
      string as <literal>'Joe'</literal> followed by some unknown
      keywords.</para>

      <para>To make this a legal string, double the apostrophe
      character:</para>

      <blockquote>
        <para><literal>'Joe''s Emporium'</literal></para>
      </blockquote>

      <para>Notice that this is TWO single quotes, not one
      double-quote.</para>
    </section>

    <section>
      <title>Concatenation of strings</title>

      <para>The concatenation symbol in SQL is two <quote>pipe</quote> symbols
      (ASCII 124, in a pair with no space between). In SQL, the
      <quote>+</quote> symbol is an arithmetic operator and it will cause an
      error if you attempt to use it for concatenating strings. The following
      expression prefixes a character column value with the characters
      <literal>Reported by:</literal>:</para>

      <blockquote>
        <para><literal>'Reported by: ' || LastName</literal></para>
      </blockquote>

      <para>Take care with concatenations. Be aware that Firebird will raise
      an error if your expression attempts to concatenate two or more char or
      varchar columns whose potential combined lengths would exceed the
      maximum length limit for a char or a varchar (32 Kb).</para>

      <para>See also the note below, <xref
      linkend="qsg-expressions-involving-null" />, about concatenating in
      expressions involving <constant>NULL</constant>.</para>
    </section>

    <section>
      <title>Division of an integer by an integer</title>

      <para>Firebird accords with the SQL standard by truncating the result
      (quotient) of an integer/integer calculation to the next lower integer.
      This can have bizarre results unless you are aware of it.</para>

      <para>For example, this calculation is correct in SQL:</para>

      <blockquote>
        <para><literal>1 / 3 = 0</literal></para>
      </blockquote>

      <para>If you are upgrading from a RDBMS which resolves integer/integer
      division to a float quotient, you will need to alter any affected
      expressions to use a float or scaled numeric type for either dividend,
      divisor, or both.</para>

      <para>For example, the calculation above could be modified thus in order
      to produce a non-zero result:</para>

      <blockquote>
        <para><literal>1.000 / 3 = 0.333</literal></para>
      </blockquote>
    </section>

    <section id="qsg-expressions-involving-null"
             xreflabel="Expressions involving NULL">
      <title>Expressions involving <constant>NULL</constant></title>

      <para>In SQL, <constant>NULL</constant> is not a value. It is a
      condition, or <emphasis>state</emphasis>, of a data item, in which its
      value is unknown. Because it is unknown, <constant>NULL</constant>
      cannot behave like a value. When you try to perform arithmetic on
      <constant>NULL</constant>, or involve it with values in other
      expressions, the result of the operation will always be
      <constant>NULL</constant>. It is not zero or blank or an <quote>empty
      string</quote> and it does not behave like any of these values.</para>

      <para>So – here are some examples of the types of surprises you will get
      if you try to perform calculations and comparisons with
      <constant>NULL</constant>:</para>

      <itemizedlist>
        <listitem>
          <para><literal>1 + 2 + 3 + <constant>NULL</constant> =
          <constant>NULL</constant></literal></para>
        </listitem>

        <listitem>
          <para><literal>not (<constant>NULL</constant>) =
          <constant>NULL</constant></literal></para>
        </listitem>

        <listitem>
          <para><literal>'Home ' || 'sweet ' || <constant>NULL</constant> =
          <constant>NULL</constant></literal></para>
        </listitem>

        <listitem>
          <para><programlisting>if (a = b) then
  MyVariable = 'Equal';
else
  MyVariable = 'Not equal';</programlisting>After executing this code,
          <varname>MyVariable</varname> will be <literal>'Not equal'</literal>
          if both <varname>a</varname> and <varname>b</varname> are
          <constant>NULL</constant>. The reason is that the expression
          <literal>'a = b'</literal> yields <constant>NULL</constant> if at
          least one of them is <constant>NULL</constant>. In an
          <quote><literal>if...then</literal></quote> context,
          <constant>NULL</constant> behaves like <constant>FALSE</constant>.
          So the '<literal>then</literal>' block is skipped, and the
          '<literal>else</literal>' block executed.</para>
        </listitem>

        <listitem>
          <para><programlisting>if (a &lt;&gt; b) then
  MyVariable = 'Not equal';
else
  MyVariable = 'Equal';</programlisting>Here, <varname>MyVariable</varname>
          will be <literal>'Equal'</literal> if <varname>a</varname> is
          <constant>NULL</constant> and <varname>b</varname> isn't, or vice
          versa. The explanation is analogous to the previous example.</para>
        </listitem>

        <listitem>
          <para><programlisting>FirstName || ' ' || LastName</programlisting>will
          return <constant>NULL</constant> if either
          <varname>FirstName</varname> or <varname>LastName</varname> is
          <constant>NULL</constant>.</para>
        </listitem>
      </itemizedlist>

      <tip>
        <para>Think of <constant>NULL</constant> as
        <constant>UNKNOWN</constant> and all these strange results suddenly
        start to make sense! If the value of <varname>Number</varname> is
        unknown, the outcome of '<literal>1 + 2 + 3 + Number</literal>' is
        also unknown (and therefore <constant>NULL</constant>). If the content
        of <varname>MyString</varname> is unknown, so is '<literal>MyString ||
        YourString</literal>' (even if <varname>YourString</varname> is
        non-<constant>NULL</constant>). Etcetera.</para>
      </tip>
    </section>
  </section>

  <section id="qsg-backup">
    <title>Backup</title>

    <para>Firebird comes with its own utility for backing up and restoring
    your databases. Its name is <application>gbak</application> and it can be
    found in the <filename class="directory">./bin</filename> directory of
    your Firebird installation. Firebird databases can be backed up whilst
    users are connected to the system and going about their normal work. The
    backup will be taken from a snapshot of the database state at the time the
    backup began.</para>

    <para>Regular backups and occasional restores using
    <application>gbak</application> should be a scheduled part of your
    database management activity.</para>

    <warning>
      <para>Do not use external proprietary backup utilities or file-copying
      tools such as <application>WinZip</application>,
      <application>tar</application>, <application>copy</application>,
      <application>xcopy</application>, etc., on a database which is running.
      Not only will the backup be unreliable, but the disk-level blocking used
      by these tools can corrupt a running database.</para>
    </warning>

    <important>
      <para>Study the warnings in the next section about database activity
      during restores!</para>
    </important>
  </section>

  <section id="qsg-howtocorrupt">
    <title>How to corrupt a database</title>

    <section>
      <title>1. Modifying metadata tables yourself</title>

      <para>Firebird stores and maintains all of the metadata for its own and
      your user-defined objects in – a Firebird database! More precisely, it
      stores them in relations (tables) right in the database itself. The
      identifiers for the system tables, their columns and several other types
      of system objects begin with the characters
      <literal>RDB$</literal>.</para>

      <para>Because these are ordinary database objects, they can be queried
      and manipulated just like your user-defined objects. However, just
      because you can does not say you should. The Firebird engine implements
      a high-level subset of SQL (DDL) for the purpose of defining and
      operating on metadata objects, typically through
      <database>CREATE</database>, <database>ALTER</database> and
      <database>DROP</database> statements.</para>

      <para>It cannot be recommended too strongly that you use DDL – not
      direct SQL operations on the system tables – whenever you need to alter
      or remove metadata. Defer the <quote>hot fix</quote> stuff until your
      skills in SQL and your knowledge of the Firebird engine become very
      advanced. A wrecked database is neither pretty to behold nor cheap to
      repair.</para>
    </section>

    <section>
      <title>2. Disabling forced writes on Windows</title>

      <para>Firebird is installed with forced writes (synchronous writes)
      enabled by default. Changed and new data are written to disk immediately
      upon posting.</para>

      <para>It is possible to configure a database to use asynchronous data
      writes – whereby modified or new data are held in the memory cache for
      periodic flushing to disk by the operating system's I/O subsystem. The
      common term for this configuration is forced writes off (or disabled).
      It is sometimes resorted to in order to improve performance during large
      batch operations.</para>

      <para>The big warning here is – do not disable forced writes on a
      Windows server. It has been observed that the Windows server platforms
      do not flush the write cache until the Firebird service is shut down.
      Apart from power interruptions, there is just too much that can go wrong
      on a Windows server. If it should hang, the I/O system goes out of reach
      and your users' work will be lost in the process of rebooting.</para>

      <note>
        <para>Windows 9x and ME do not support deferred data writes</para>
      </note>

      <section>
        <title>Disabling Forced Writes on a Linux server</title>

        <para>Linux servers are safer for running an operation with forced
        writes disabled temporarily. Still, do not leave it disabled once your
        large batch task is completed, unless you have a very robust fall-back
        power system.</para>
      </section>
    </section>

    <section>
      <title>3. Restoring a backup to a running database</title>

      <para>One of the restore options in the <application>gbak</application>
      utility (<literal>gbak -r[estore]</literal>) allows you to restore a
      gbak file over the top of an existing database. It is possible for this
      style of restore to proceed without warning while users are logged in to
      the database. Database corruption is almost certain to be the
      result.</para>

      <warning>
        <para>Be aware that you will need to design your Admin tools and
        procedures to prevent any possibility for any user (including
        <database>SYSDBA</database>) to restore to your active database if any
        users are logged in.</para>
      </warning>

      <note>
        <para>For <application>gbak</application> instructions see chapter 21,
        <citetitle>Database Backup and Restore</citetitle>, of
        <citetitle>Using Firebird</citetitle>.</para>

        <para>For instructions about blocking access to users, see chapter 14,
        <citetitle>Getting exclusive access to a database</citetitle>, of
        <citetitle>Using Firebird</citetitle>.</para>
      </note>

      <para>If is practicable to do so, it is recommended to restore to spare
      disk space using the <literal>gbak -c[reate]</literal> option and test
      the restored database using <application>isql</application> or your
      preferred admin tool. If the restored database is good, shut down the
      server. Make a filesystem copy of the old database and then copy the
      restored database file (or files) over their existing
      counterparts.</para>
    </section>

    <section>
      <title>4. Allowing users to log in during a restore</title>

      <para>If you do not block access to users while performing a restore
      using <literal>gbak -r[estore]</literal> then users may be able to log
      in and attempt to do operations on data. Corrupted structures will
      result.</para>
    </section>
  </section>

  <section id="qsg-wheretonext">
    <title>Where to next?</title>

    <section>
      <title>How to get help</title>

      <para>The community of willing helpers around Firebird goes a long way
      back, to many years before the source code for its ancestor, InterBase®
      6, was made open source. Collectively, the Firebird community does have
      all the answers! It even includes some people who have been involved
      with it since it was a design on a drawing board in a bathroom in
      Boston.</para>

      <itemizedlist>
        <listitem>
          <para>Visit the official Firebird Project site at <ulink
          url="http://firebird.sourceforge.net">http://firebird.sourceforge.net</ulink>
          and join the user support lists.</para>
        </listitem>

        <listitem>
          <para>Visit the Firebird knowledge site at <ulink
          url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink> to
          look up a vast collection of information about developing with and
          using Firebird.</para>
        </listitem>

        <listitem>
          <para>Get the <citetitle>Using Firebird</citetitle> manual and its
          companion volume, the <citetitle>Firebird Reference
          Guide</citetitle>. Both books ship on the IBPhoenix CD as e-books in
          PDF format. They are fully cross-referenced.</para>
        </listitem>

        <listitem>
          <para>Read the <citetitle>Firebird Reference Guide</citetitle>,
          chapter 10: <citetitle>Resources and References</citetitle> – for a
          collection of useful resources about Firebird, SQL and database
          application development.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title>Using the books by IBPhoenix Publications</title>

      <para><citetitle>Using Firebird</citetitle> and the <citetitle>Firebird
      Reference Guide</citetitle> have been designed for easy use and access
      during your development work. A button at the top right-hand corner of
      each <quote>content</quote> page will cause Acrobat Reader to switch
      back and forth between the two volumes. Each content page also has a
      navigation bar with buttons to take you directly to the index listings
      for the selected character. All index listings are hyperlinked to their
      sources. If the reader is set to display at 125% resolution, one
      complete page and the hypertext side menu will be visible.</para>

      <!--Check: doesn't that depend on monitor size, screen resolution etc.?-->

      <para>For greater detail about setting up your server and your network,
      refer to the early chapters of <citetitle>Using Firebird</citetitle>.
      Chapter 7 is a troubleshooting reference. The ensuing chapters deal in
      turn with design, language and development issues and provided detailed
      instructions for using the command-line tools.</para>
    </section>
  </section>

  <section id="qsg-firebird-project">
    <title>The Firebird Project</title>

    <para>The developers, designers and testers who gave you Firebird and
    several of the drivers are members of the Firebird open source project at
    SourceForge, that amazing virtual community that is home to thousands of
    open source software teams. The Firebird project's address there is <ulink
    url="http://sourceforge.net/projects/firebird">http://sourceforge.net/projects/firebird</ulink>.
    At that site are the source code tree, the bug tracker and a number of
    technical files which can be downloaded for various purposes related to
    the development and testing of the codebases.</para>

    <para>The Firebird Project developers and testers use an email list forum
    – firebird-devel@lists.sourceforge.net – as their <quote>virtual
    laboratory</quote> for communicating with one another about their work on
    enhancements, bug-fixing and producing new versions of Firebird.</para>

    <para>Anyone who is interested in watching progress can join this forum.
    However, user support questions are a distraction which they do not
    welcome. Please do not try to post your user support questions
    there!</para>
  </section>
</article>