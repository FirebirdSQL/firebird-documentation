<?xml version="1.0" encoding="UTF-8"?>
<!-- For standalone validation, uncomment the following DOCTYPE declaration. -->
<!-- DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"> "file:../docs/docbookx/docbookx.dtd" -->
<article id="qsg2">
  <articleinfo>
    <title>Firebird 2 RC3 Quick Start Guide</title>

    <titleabbrev>Firebird 2 RC3 Quick Start</titleabbrev>

    <authorgroup>
      <corpauthor>IBPhoenix Editors</corpauthor>

      <othercredit>
        <surname>Firebird Project</surname>

        <contrib>Updates, additions</contrib>
      </othercredit>
    </authorgroup>

    <edition>26 July 2006 – Document version 3.1</edition>
  </articleinfo>

  <!--Remove all refs to UFB chapters.
Add an explanation in the introduction about how to find more documentation on this-or-that,
and repeat it at the end of the guide.-->

  <section id="qsg2-about">
    <title>About this guide</title>

    <warning>
      <title>ATTENTION!</title>

      <para>This guide has not been <emphasis>fully</emphasis> updated to
      Firebird 2 yet. It may in places contain incorrect information that
      still reflects the Firebird 1.5 state of affairs. But we've made it
      available anyway because it's better to explore Firebird 2 with an
      <quote>almost-good</quote> guide than with the Firebird 1.5 Quick Start
      Guide, which, from a Firebird 2 perspective, is badly out of
      date.</para>

      <para>The final release of Firebird 2 will come with a fully up-to-date
      Quick Start Guide.</para>
    </warning>

    <para>The <citetitle>Firebird Quick Start Guide</citetitle> is an
    introduction for the complete newcomer to a few essentials for getting off
    to a quick start with a Firebird binary kit. The guide first saw the light
    as Chapter 1 of the <citetitle>Using Firebird</citetitle> manual, sold on
    CD by <ulink url="http://www.ibphoenix.com">IBPhoenix</ulink>. Later it
    was published separately on the Internet. In June 2004, IBPhoenix donated
    it to the Firebird Project. Since then it is maintained, and regularly
    updated, by members of the Firebird documentation project.</para>

    <important>
      <para>Before you read on, verify that this guide matches your Firebird
      version. This guide covers version 2 and higher. If you run Firebird 1.0
      or 1.5, get the appropriate version of the Quick Start Guide at <ulink
      url="http://www.firebirdsql.org/manual/">http://www.firebirdsql.org/manual/</ulink>
      (HTML) or <ulink
      url="http://www.firebirdsql.org/pdfmanual/">http://www.firebirdsql.org/pdfmanual/</ulink>
      (PDF).</para>
    </important>
  </section>

  <section id="qsg2-kit-contents">
    <title><indexterm class="singular" scope="local">
        <primary>Installation</primary>

        <secondary>kit contents</secondary>
      </indexterm>What is in the kit?</title>

    <para>All of the kits contain all of the components needed to install the
    Firebird server:</para>

    <itemizedlist>
      <listitem>
        <para>The Firebird server executable.</para>
      </listitem>

      <listitem>
        <para>One or more client libraries.</para>
      </listitem>

      <listitem>
        <para>The command-line tools.</para>
      </listitem>

      <listitem>
        <para>The standard user-defined function libraries.</para>
      </listitem>

      <listitem>
        <para>A sample database.</para>
      </listitem>

      <listitem>
        <para>The C header files (not needed by beginners).</para>
      </listitem>

      <listitem>
        <para>Release notes – ESSENTIAL READING!</para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="qsg2-classic-or-super">
    <title><indexterm class="singular" scope="local">
        <primary>Installation</primary>

        <secondary>Classic or Superserver</secondary>
      </indexterm><indexterm class="singular" scope="local">
        <primary>Classic Server</primary>
      </indexterm><indexterm class="singular" scope="local">
        <primary>Superserver</primary>
      </indexterm>Classic or Superserver?</title>

    <para>Firebird comes in two flavors, called
    <firstterm>architectures</firstterm>: Classic Server and Superserver.
    Which one should you install? That depends on your situation. A short
    overview of the most important differences follows.</para>

    <table>
      <title>Firebird 2 Classic Server vs. Superserver</title>

      <tgroup cols="3">
        <colspec colname="col-feature" colwidth="*" />

        <colspec colname="col-classic" colwidth="2*" />

        <colspec colname="col-super" colwidth="2*" />

        <thead>
          <row>
            <entry></entry>

            <entry align="center"><para>Classic Server</para></entry>

            <entry align="center"><para>Superserver</para></entry>
          </row>
        </thead>

        <tbody>
          <row valign="top">
            <entry><para><emphasis>Processes</emphasis></para></entry>

            <entry><para>Creates a separate process for every client
            connection, each with its own cache. Less resource use if the
            number of connections is low.</para></entry>

            <entry><para>A single process serves all connections, using
            threads to handle requests. Shared cache space. More efficient if
            the number of simultaneous connections grows.</para></entry>
          </row>

          <row valign="top">
            <entry morerows="1"><para><emphasis>Local
            connections</emphasis></para></entry>

            <entry><para>Permits fast, direct I/O to database files for local
            connections on Linux. The client process must have
            filesystem-level access rights to the database for this to
            work.</para></entry>

            <entry><para>On Linux, all local connections are made via the
            network layer, using <systemitem
            class="systemname">localhost</systemitem> (often implicitly). Only
            the server process needs access rights to the database
            file.</para></entry>
          </row>

          <row valign="top">
            <entry align="center" nameend="col-super"
            namest="col-classic"><para>On Windows, both architectures now
            support safe and reliable local connections, with only the server
            process needing access rights to the database file.</para></entry>
          </row>

          <row valign="top">
            <entry><para><emphasis>Multiprocessor</emphasis></para></entry>

            <entry><para>SMP (symmetrical multi-processor) support. Better
            performance in case of a small number of multiple connections that
            do not influence each other.</para></entry>

            <entry><para>No SMP support. On multi-processor Windows machines,
            performance can even drop dramatically as the OS switches the
            process between CPUs. To prevent this, set the
            <parameter>CpuAffinityMask</parameter> parameter in the
            configuration file
            <filename>firebird.conf</filename>.</para></entry>
          </row>

          <row valign="top">
            <entry><para><emphasis>Guardian</emphasis></para></entry>

            <entry><!--REMOVE ROW IF BUG FIXED BEFORE 2.0 FINAL--><para>When
            run as a Windows <emphasis>application</emphasis> (as opposed to a
            service) you can't use the Firebird Guardian. Note that running
            Firebird as an application is the only option on Windows
            9x–ME.</para></entry>

            <entry><para>Can be used with the Guardian on Windows, whether run
            as an application or as a service.</para></entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <para>As you can see, neither of the architectures is better in all
    respects. This is hardly surprising: we wouldn't maintain two
    architectures if one of them was an all-fronts loser.</para>

    <para>If you're still not sure what to choose (maybe you find all this
    tech talk a little overwhelming), use this rule of thumb:</para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>On Windows, choose Superserver.</para>
      </listitem>

      <listitem>
        <para>On Linux, just pick one or the other. In most circumstances,
        chances are that you won't notice a performance difference.</para>
      </listitem>
    </itemizedlist>

    <para>Note that you can always switch to the other architecture later;
    your applications and databases will keep functioning like before.</para>

    <para>For Linux, Superserver download packages start with
    <literal>FirebirdSS</literal>, Classic packages with
    <literal>FirebirdCS</literal>. For Windows, there is a combined
    installation package; you choose the architecture during the installation
    process.</para>

    <note>
      <para>We've not been completely honest with you. Firebird has a third
      flavor: <firstterm>Embedded Server</firstterm>, but this is an entirely
      different beast and not intended for your typical client-server setups.
      Consult the Release Notes for details.</para>
    </note>
  </section>

  <section id="qsg2-disk-locations">
    <title><indexterm>
        <primary>Disk locations</primary>
      </indexterm>Default disk locations</title>

    <para>The following table describes the default disk locations for the
    components on Windows and Linux.</para>

    <table frame="all" id="qsg2-tbl-firebird-components"
           xreflabel="Firebird installation components table">
      <title>Components of the Firebird 2 installation</title>

      <tgroup cols="4">
        <colspec align="left" colname="col-platform" colwidth="2*" />

        <colspec align="left" colname="col-component" colwidth="3*" />

        <colspec align="left" colname="col-filename" colwidth="3*" />

        <colspec align="left" colname="col-location" colwidth="3*" />

        <thead>
          <row>
            <entry><para>Platform</para></entry>

            <entry><para>Component</para></entry>

            <entry><para>File Name</para></entry>

            <entry><para>Default Location</para></entry>
          </row>
        </thead>

        <tbody valign="top">
          <row>
            <entry morerows="6"><para>32-bit and 64-bit
            Windows</para><para>(Windows 95, 98, ME, NT, 2000, XP, 2003,
            ...)</para></entry>

            <entry><para>Installation directory</para><para>(referred to
            hereafter as <varname>&lt;InstallDir&gt;</varname>)</para></entry>

            <entry>—</entry>

            <entry><para><filename class="directory">C:\Program
            Files\Firebird\Firebird_2_0</filename></para></entry>
          </row>

          <row>
            <entry><para>Release Notes and other documentation</para></entry>

            <entry><para>Various files</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\doc</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebird server</para></entry>

            <entry><para><filename>fbserver.exe</filename> (SS) or
            <filename>fb_inet_server.exe</filename> (CS)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para></entry>
          </row>

          <row>
            <entry><para>Command-line tools</para></entry>

            <entry><para><filename>gbak.exe</filename>,
            <filename>nbackup.exe</filename>, <filename>gsec.exe</filename>,
            <filename>gfix.exe</filename>, <filename>gstat.exe</filename>,
            etc.</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para></entry>
          </row>

          <row>
            <entry><para>Sample database</para></entry>

            <entry><para><filename>employee.fdb</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\examples\empbuild</filename></para></entry>
          </row>

          <row>
            <entry><para>User-defined function (UDF) libraries</para></entry>

            <entry><para><filename class="libraryfile">ib_udf.dll</filename>,
            <filename class="libraryfile">fbudf.dll</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\UDF</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebird client</para></entry>

            <entry><para><filename
            class="libraryfile">fbclient.dll</filename></para><para>(with an
            optional <filename class="libraryfile">gds32.dll</filename>, to
            support legacy apps)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;\bin</filename></para><para>(with
            an optional copy in the Windows System dir – see note below
            table)</para></entry>
          </row>

          <row>
            <entry morerows="6"><para>Linux and possibly other UNIX
            distros</para></entry>

            <entry><para>Installation directory</para><para>(referred to
            hereafter as <varname>&lt;InstallDir&gt;</varname>)</para></entry>

            <entry>—</entry>

            <entry><para><filename
            class="directory">/opt/firebird</filename></para></entry>
          </row>

          <row>
            <entry><para>Release Notes and other documentation</para></entry>

            <entry><para>Various files</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/doc</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebird server</para></entry>

            <entry><para><filename>fbserver</filename> (SS) or
            <filename>fb_inet_server</filename> (CS)</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/bin</filename></para></entry>
          </row>

          <row>
            <entry><para>Command-line tools</para></entry>

            <entry><para><filename>gbak</filename>,
            <filename>nbackup</filename>, <filename>gsec</filename>,
            <filename>gfix</filename>, <filename>gstat</filename>,
            etc.</para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/bin</filename></para></entry>
          </row>

          <row>
            <entry><para>Sample database</para></entry>

            <entry><para><filename>employee.fdb</filename></para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/examples/empbuild</filename></para></entry>
          </row>

          <row>
            <entry><para>UDF libraries</para></entry>

            <entry><para><filename class="libraryfile">ib_udf.so</filename>,
            <filename class="libraryfile">fbudf.so</filename> </para></entry>

            <entry><para><filename
            class="directory">&lt;InstallDir&gt;/UDF</filename></para></entry>
          </row>

          <row>
            <entry><para>Firebird client</para></entry>

            <entry><para><filename
            class="libraryfile">libfbclient.so.2.<replaceable>m</replaceable>.<replaceable>n</replaceable></filename>
            (network client)</para><para><filename
            class="libraryfile">libfbembed.so.2.<replaceable>m</replaceable>.<replaceable>n</replaceable></filename>
            (local client, Classic only)</para><para>The usual symlinks
            (<filename class="symlink">*.so.2</filename>, <filename
            class="symlink">*.so</filename>) are created. Legacy <filename
            class="symlink">libgds.*</filename> symlinks are also
            installed.</para></entry>

            <entry><para><filename
            class="directory">/usr/lib</filename></para><para>(actually, the
            real stuff is in <filename
            class="directory">&lt;InstallDir&gt;/lib</filename>, but you
            should use the links in <filename
            class="directory">/usr/lib</filename>)</para></entry>
          </row>
        </tbody>
      </tgroup>
    </table>

    <note>
      <para>The exact path to the Windows System directory depends on your
      Windows version. Typical locations are:</para>

      <itemizedlist spacing="compact">
        <listitem>
          <para>for Windows 95/98/ME: <filename
          class="directory">C:\Windows\System</filename></para>
        </listitem>

        <listitem>
          <para>for Windows NT/2000: <filename
          class="directory">C:\WINNT\System32</filename></para>
        </listitem>

        <listitem>
          <para>for Windows XP: <filename
          class="directory">C:\Windows\System32</filename></para>
        </listitem>
      </itemizedlist>
    </note>
  </section>

  <section id="qsg2-installing">
    <title><indexterm>
        <primary>Installation</primary>
      </indexterm>Installing Firebird</title>

    <section id="qsg2-installing-server">
      <title><indexterm>
          <primary>Installation</primary>

          <secondary>server</secondary>
        </indexterm>Installing the Firebird server</title>

      <section>
        <title><indexterm>
            <primary>Installation</primary>

            <secondary>drives</secondary>
          </indexterm>Installation drives</title>

        <para>Firebird server – and any databases you create or connect to –
        must reside on a hard drive that is physically connected to the host
        machine. You cannot locate components of the server, or any database,
        on a mapped drive, a filesystem share or a network filesystem.</para>

        <note>
          <para>You can mount a read-only database on a CD-ROM drive but you
          cannot run Firebird server from one.</para>
        </note>
      </section>

      <section>
        <title><indexterm>
            <primary>Installation</primary>

            <secondary>script or program</secondary>
          </indexterm>Installation script or program</title>

        <para>Although it is possible to install Firebird by a filesystem
        copying method – such as <quote>untarring</quote> a snapshot build or
        decompressing a structured <filename class="extension">.zip</filename>
        archive – it is strongly recommended that you use the distributed
        release kit (<filename>.exe</filename> for Windows,
        <filename>.rpm</filename> for Linux), especially if this is the first
        time you install Firebird. The Windows installation executable, the
        Linux <application>rpm</application> program and the
        <filename>install.sh</filename> script in the official <filename
        class="extension">.tar.gz</filename> for various Posix platforms all
        perform some essential setup tasks. Provided you follow the
        installation instructions correctly, there should be nothing for you
        to do upon completion but log in and go!</para>

        <section>
          <title>Installing on Windows</title>

          <para>The Firebird installer lets you choose between Superserver and
          Classic Server installation. Both are fully mature and stable and
          there are no reasons to categorically prefer one to the other. Of
          course you may have your own specific reasons.</para>

          <para>If you install Firebird under Windows 95/98/ME, <emphasis
          role="bold">un</emphasis>check the option to install the Control
          Panel applet. It doesn't work on these platforms. We'll give you a
          link to a usable applet later on in this guide. (Note: the option to
          install the applet is only available for Superserver.)</para>

          <para>On Windows server platforms – NT, 2000, 2003 and XP – Firebird
          wil run as a system service be default, but during the installation
          you can also choose to let it run as an application. Non-server
          Windows systems – 95, 98 and ME – don't support services; running as
          an application is the only option there.</para>

          <section>
            <title><indexterm>
                <primary>Guardian</primary>
              </indexterm><indexterm>
                <primary>Firebird Guardian</primary>
              </indexterm>Use the Guardian?</title>

            <para>The Firebird Guardian is a utility that monitors the server
            process and tries to restart it if it terminates abnormally. Due
            to a bug, the Guardian does not work with Firebird Classic on
            Windows if the server runs as an application. Currently the
            Firebird 2 installer doesn't give you the option to install the
            Guardian <emphasis>at all</emphasis> with a Classic Server, even
            if you install it as a service.</para>

            <para>The Guardian works correctly with Superserver, whether run
            as an application or as a service.</para>

            <para>If you run Firebird <emphasis>as a service</emphasis> on
            Windows 2000, 2003 or XP, the Guardian is a convenience rather
            than a necessity, since these operating systems have the facility
            to watch and restart services. It is recommended that you keep the
            Guardian option on in all other situations.</para>
          </section>
        </section>

        <section>
          <title>Installing on Linux and other Unix-like platforms</title>

          <para>In all cases, read the release notes that pertain to the
          version of Firebird that you are going to install. There may be
          significant variations from release to release of any Posix
          operating system, especially the open source ones. Where possible,
          the build engineers for each Firebird version have attempted to
          document any known issues.</para>

          <para>If you have a Linux distribution that supports
          <application>rpm</application> installs, consult the appropriate
          platform documentation for instructions about using <application>RPM
          Package Manager</application>. In most distributions you will have
          the choice of performing the install from a command shell or through
          a GUI interface.</para>

          <para>For Linux distributions that cannot process
          <application>rpm</application> programs, and for Unix flavors for
          which no <filename class="extension">.rpm</filename> kit is
          provided, use the <filename class="extension">.tar.gz</filename>
          kit. You will find detailed instructions in the release
          notes.</para>

          <para>Shell scripts have been provided. In some cases, the release
          notes may instruct you to modify the scripts and make some manual
          adjustments.</para>
        </section>
      </section>
    </section>

    <section id="qsg2-installing-multiple">
      <title>Installing multiple servers</title>

      <para>Firebird 2 allows the operation of multiple servers on a single
      machine. It can also run concurrenty with Firebird 1.x or InterBase
      servers. Setting this up is not a beginner's task though. If you need to
      run multiple servers, consult the <citetitle>Installation
      Notes</citetitle> chapter of the Release Notes, and have the Firebird
      1.5 Release Notes handy too – you will be directed to them at a certain
      point during your reading of the Installation Notes.</para>
    </section>

    <section id="qsg2-installing-testing">
      <title><indexterm>
          <primary>Testing</primary>
        </indexterm>Testing your installation</title>

      <para>If everything works as designed, the Firebird server process will
      be running on your server machine upon completion of the installation.
      It will also start up automatically whenever you restart your
      computer.</para>

      <para>Before testing the Firebird server itself, it is advisable to
      verify if the server machine is reachable from the client at all. At
      this point, it is assumed that you will use the recommended TCP/IP
      network protocol for your Firebird client/server connections.</para>

      <note>
        <title>Notes</title>

        <itemizedlist>
          <listitem>
            <para>If you have installed a Classic Server on Linux/Unix or any
            Firebird server on Windows, it is possible to connect directly to
            the local server, without using a network layer. If you intend to
            use Firebird for this type of connection <emphasis
            role="bold">only</emphasis>, you can skip the <quote>Pinging the
            server</quote> section below.</para>
          </listitem>

          <listitem>
            <para>For information about using NetBEUI protocol in an
            all-Windows environment, refer to Chapter 6, <citetitle>Network
            Configuration</citetitle> in the <citetitle>Using
            Firebird</citetitle> manual.<!--Change this!--></para>
          </listitem>

          <listitem>
            <para>IPX/SPX networks are not supported by Firebird.</para>
          </listitem>
        </itemizedlist>
      </note>

      <section>
        <title><indexterm>
            <primary>Ping</primary>
          </indexterm>Pinging the server</title>

        <para>The <command>ping</command> command – available on most systems
        – is a quick and easy way to see if you can connect to a server
        machine via the network. For example, if your server's IP address in
        the domain that is visible to your client is <systemitem
        class="ipaddress">192.13.14.1</systemitem>, go to a command shell on
        the client machine and type the command</para>

        <blockquote>
          <para><command>ping 192.13.14.1</command></para>
        </blockquote>

        <para>substituting this example IP address with the IP address that
        your server is broadcasting. If you are on a managed network and you
        don't know the servers's IP address, ask your system administrator. Of
        course you can also ping the server by name, if you know it:</para>

        <blockquote>
          <para><command>ping vercingetorix</command></para>
        </blockquote>

        <para>If you are connecting to the server from a local client – that
        is, a client running on the same machine as the server – you can ping
        the virtual TCP/IP loopback server:</para>

        <blockquote>
          <para><command>ping localhost</command> –or– <command>ping
          127.0.0.1</command></para>
        </blockquote>

        <para>If you have a simple network of two machines linked by a
        crossover cable, you can set up your server with any IP address you
        like except 127.0.0.1 (which is reserved for a local loopback server)
        and, of course, the IP address which you are using for your client
        machine. If you know the <quote>native</quote> IP addresses of your
        network cards, and they are different, you can simply use
        those.</para>

        <para>Once you have verified that the server machine is reachable from
        the client, you can go on to the next step.</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Checking the server</primary>
          </indexterm>Checking that the Firebird server is running</title>

        <para>After installation, Firebird server should be running:</para>

        <variablelist>
          <varlistentry>
            <term>On Linux or other Unix-like systems:</term>

            <listitem>
              <para>As a service.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>On Windows server systems (NT, 2000, 2003, XP):</term>

            <listitem>
              <para>As a service or as an application. Service is default and
              highly recommended.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>On Windows non-server systems (95, 98, ME):</term>

            <listitem>
              <para>As an application.</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <para>The following sections show you how to test the server in each
        of these situations.</para>

        <section>
          <title>Server check: Linux and other Unices</title>

          <para><indexterm>
              <primary>top command (Linux)</primary>
            </indexterm><indexterm>
              <primary>Guardian</primary>
            </indexterm>Use the <command>top</command> command in a command
          shell to inspect the running processes interactively. If a Firebird
          Superserver is running, you should see a process named
          <application><systemitem>fbguard</systemitem></application>. This is
          the Guardian process. Further, there will be one main and zero or
          more child processes named
          <application><systemitem>fbserver</systemitem></application>.</para>

          <para>For Classic Server versions, the process name is
          <application><systemitem>fb_inet_server</systemitem></application>.
          There will be one instance of this process running for each network
          connection. Note that if there are no active connections, or if
          there are only direct local connections, you won't find
          <application><systemitem>fb_inet_server</systemitem></application>
          in the process list.</para>

          <para>The following screen shows the output of
          <application>top</application>, restricted by
          <application>grep</application> to show only lines containing the
          characters <literal>fb</literal>:</para>

          <screen>frodo:/inkomend/firebird # top -b -n1 | grep fb
 2587 firebird  24   0  1232 1232 1028 S  0.0  0.3   0:00.00 fbguard
 2588 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.04 fbserver
 2589 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2604 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2605 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.02 fbserver
 2606 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver
 2607 firebird  15   0  4124 4120 2092 S  0.0  0.9   0:00.00 fbserver</screen>

          <para>As an alternative to <application>top</application>, you can
          use <command>ps -ax</command> or <command>ps -aux</command> and pipe
          the output to <application>grep</application>.</para>
        </section>

        <section>
          <title>Server check: Windows, running as service</title>

          <para>Open Control Panel -&gt; Services (NT) or Control Panel -&gt;
          Administrative Tools -&gt; Services (2000, XP).</para>

          <para><indexterm>
              <primary>Services (Windows)</primary>
            </indexterm>This illustration shows the Services applet display on
          Windows 2000. The appearance may vary from one Windows server
          edition to another. Also, service names may vary with the Firebird
          version.</para>

          <mediaobject>
            <imageobject>
              <imagedata align="center" fileref="images/services-2.png"
                         format="PNG" />
            </imageobject>
          </mediaobject>

          <para>You should at least find the Firebird server in the services
          listing. The Guardian may or may not be running, depending on the
          choices you made during installation.</para>
        </section>

        <section>
          <title>Server check: Windows, running as application</title>

          <para>If Firebird is up and running as an application, it is
          represented by an icon in the system tray:</para>

          <itemizedlist spacing="compact">
            <listitem>
              <para>A green and gray server symbol if controlled by the
              Guardian;</para>
            </listitem>

            <listitem>
              <para>A round yellow and black graphic if running
              standalone.</para>
            </listitem>
          </itemizedlist>

          <para>In either case you can shut the server down by using the menu
          that appears if you right-click on the tray icon. Note that this
          also makes the icon disappear; you can restart Firebird via the
          Start menu.<!--IN ALL 1.5.X VERSIONS, SHUTTING DOWN CLASSIC *WITH GUARDIAN* VIA TRAY DOES *NOT* WORK. MUST KILL VIA TASK LIST.--></para>

          <para>A flashing icon indicates that the server is in the process of
          starting up (or at least trying to do so). A red icon, or an icon
          with a overlying red stop symbol, indicates that startup has
          failed.</para>

          <para>One way to make 100% sure if the server is running or not is
          to press Ctrl-Alt-Del and look for the <systemitem
          class="process">fbserver</systemitem> or <systemitem
          class="process">fb_inet_server</systemitem> process (and possibly
          <systemitem class="process">fbguard</systemitem>) in the task
          list.</para>

          <para>On some occasions, you may need to start the Guardian or
          server once explicitly via the Start menu even if you opted for
          <quote>Start Firebird now</quote> at the end of the installation
          process. Sometimes a reboot is necessary.</para>

          <para>If you're desperately trying to start Firebird and nothing
          seems to work, ask yourself if you've installed Firebird 2 Classic
          server with the Guardian option enabled (the installation program
          doesn't offer this possibility anymore, but there are other ways).
          As said before, the combination Classic + Guardian doesn't work if
          Firebird runs as an application. Uninstall Firebird if necessary and
          reinstall Classic <emphasis>without</emphasis> Guardian, or
          Superserver with or without Guardian.</para>

          <para>In the case of Superserver you can also use a Control Panel
          applet to check and alter the Firebird server status. Some available
          applets will be presented a little later in this guide.</para>
        </section>
      </section>
    </section>

    <section id="qsg2-installing-client">
      <title><indexterm class="singular" scope="local">
          <primary>Installation</primary>

          <secondary>client-only</secondary>
        </indexterm>Performing a client-only install</title>

      <para>Each remote client machine needs to have the client library –
      <filename class="libraryfile">libfbclient.so</filename> on Posix
      clients, <filename class="libraryfile">fbclient.dll</filename> on
      Windows clients – that matches the release version of the Firebird
      server.</para>

      <para>Firebird versions from 1.5 onward can install symlinks or copies
      named after the 1.0 libs (with the <quote>old</quote> InterBase names),
      to maintain compatibility with third-party products which need these
      files.</para>

      <para>Some extra pieces are also needed for the client-only
      install.</para>

      <section>
        <title>Windows</title>

        <para>At present, no separate installation program is available to
        install only the client pieces on a Windows machine. If you are in the
        common situation of running Windows clients to a Linux or other
        Unix-like Firebird server (or another Windows machine), you need to
        download the full Windows installation kit that corresponds to the
        version of Firebird server you install on your server machine.</para>

        <para>Fortunately, once you have the kit, the Windows client-only
        install is easy to do. Start up the installation program just as
        though you were going to install the server – but select one of the
        client-only options from the installation menu.</para>
      </section>

      <section>
        <title>Linux and some other Posix clients</title>

        <para>A small-footprint client install program for Linux clients is
        not available either. Additionally, some Posix flavors – even within
        the Linux constellation – have somewhat idiosyncratic requirements for
        filesystem locations. For these reasons, not all *x distributions for
        Firebird even contain a client-only install option.</para>

        <para>For most Linux flavors, the following procedure is suggested for
        a Firebird client-only install. Log in as <systemitem
        class="username">root</systemitem> for this.</para>

        <procedure>
          <step>
            <para>Look for <filename
            class="libraryfile">libfbclient.so.2.<replaceable>m.n</replaceable></filename>
            (<replaceable>m.n</replaceable> being the minor plus patch version
            number) in <filename
            class="directory">/opt/firebird/lib</filename> on the server where
            Firebird server is installed. Copy it to <filename
            class="directory">/usr/lib</filename> on the client.</para>
          </step>

          <step>
            <para>Create chained symlinks using the following commands:</para>

            <blockquote>
              <para><command>ln -s
              /usr/lib/libfbclient.so.2.<replaceable>m.n</replaceable>
              /usr/lib/libfbclient.so.2</command></para>

              <para><command>ln -s /usr/lib/libfbclient.so.2
              /usr/lib/libfbclient.so</command></para>
            </blockquote>

            <para>...replacing
            <varname><replaceable>2.m.n</replaceable></varname> with your
            version number, e.g. <literal>2.0.0</literal> or
            <literal>2.1.0</literal></para>

            <para>If you're running applications that expect the legacy
            libraries to be present, also create the following
            symlinks:</para>

            <blockquote>
              <para><command>ln -s /usr/lib/libfbclient.so
              /usr/lib/libgds.so.0</command></para>

              <para><command>ln -s /usr/lib/libfbclient.so
              /usr/lib/libgds.so</command></para>
            </blockquote>
          </step>

          <step>
            <para>Copy the <filename>firebird.msg</filename> file to <filename
            class="directory">/opt/firebird</filename></para>
          </step>

          <step>
            <para>In the system-wide default shell profile, or using
            <function>setenv()</function> from a shell, create the
            <envar>FIREBIRD</envar> environment variable and point it to
            <filename class="directory">/opt/firebird</filename>, to enable
            the API routines to locate the messages.</para>
          </step>
        </procedure>
      </section>
    </section>
  </section>

  <section id="qsg2-config">
    <title><indexterm>
        <primary>Configuration</primary>
      </indexterm><indexterm>
        <primary>Management</primary>
      </indexterm>Server configuration and management</title>

    <!--Intro veranderen, moet meer algemeen slaan op wat deze sectie behelst. Nu lijkt het teveel alsof er
direct op praktisch nivo besproken gaat worden wat je moet regelen en weten.-->

    <para>There are several things that you should be aware of, and take care
    of, before you start using your freshly installed Firebird server.</para>

    <section id="qsg2-config-gsec">
      <title><indexterm>
          <primary>gsec</primary>
        </indexterm>User management: gsec</title>

      <para>Firebird comes with a command-line user management tool called
      <firstterm>gsec</firstterm>. Although its functions can also be
      performed by a number of third-party GUI utilities, you should at least
      have a basic knowledge of <application>gsec</application>, since this is
      the official tool and it's present in every Firebird server
      installation. In the next sections you will use
      <application>gsec</application> to execute two tasks: changing the
      <database>SYSDBA</database> password and adding a Firebird user. First
      though, some points of attention:</para>

      <variablelist>
        <varlistentry>
          <term>Permission to run gsec</term>

          <listitem>
            <para>With some Firebird installations, you can only run
            <application>gsec </application>if you are logged into the
            operating system as Superuser (<systemitem
            class="username">root</systemitem> on Linux) or as the user the
            Firebird server process runs under. On Windows server platforms,
            you typically need to be in the Power User group or higher to run
            <application>gsec</application> successfully.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Trouble running gsec</term>

          <listitem>
            <para>If you have enough privileges but invoking
            <application>gsec</application> results in a message like
            <quote><computeroutput>cannot attach to password database - unable
            to open database</computeroutput></quote>:</para>

            <itemizedlist>
              <listitem>
                <para>You may be running Firebird on Windows and for some
                reason the local protocol isn't working. You can circumvent
                this problem by <quote>tricking</quote> gsec into using
                TCP/IP. Add the following parameter to the command line,
                adjusting the path if necessary:</para>

                <blockquote>
                  <para><command>-database "localhost:C:\Program
                  Files\Firebird\Firebird_2_0\security2.fdb"</command></para>
                </blockquote>

                <para>The file <filename>security2.fdb</filename> is the
                <firstterm>security database</firstterm>, where Firebird keeps
                its user account details. It is located in your Firebird
                installation directory.</para>
              </listitem>

              <listitem>
                <para>Your security database may be a renamed
                <filename>security.fdb</filename> from Firebird 1.5. This
                can't be the case immediately after installation, of course.
                Someone must have put it there, in order to keep the existing
                accounts available. Consult the Release Notes for instructions
                on upgrading old security databases.</para>
              </listitem>
            </itemizedlist>

            <para>If the message starts with <quote><computeroutput>Cannot
            attach to services manager</computeroutput></quote>, the server
            may not be running at all. In that case, go back to <link
            linkend="qsg2-installing-testing"><citetitle>Testing your
            installation</citetitle></link> and fix the problem.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Calling gsec on Linux</term>

          <listitem>
            <para>On **nix systems, if you call
            <application>gsec</application> from its own directory, you should
            start the command with <command>./gsec</command> instead of just
            <command>gsec</command>. The current directory is usually not part
            of the search path, so plain <command>gsec</command> may either
            fail or launch a <quote>wrong</quote>
            <application>gsec</application>.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <section>
        <title><indexterm>
            <primary>SYSDBA</primary>
          </indexterm><indexterm>
            <primary>Passwords</primary>

            <secondary>changing</secondary>
          </indexterm>Changing the <database>SYSDBA</database>
        password</title>

        <para><database>SYSDBA</database> is the only Firebird account that is
        created automatically as part of the installation process. This
        account has all the privileges on the server and cannot be deleted.
        Depending on version, OS, and architecture, the installation program
        will either</para>

        <itemizedlist>
          <listitem>
            <para>install the <database>SYSDBA</database> user with the
            password <literal>masterkey</literal> (actually,
            <literal>masterke</literal>: characters after the eighth are
            ignored), or</para>
          </listitem>

          <listitem>
            <para>ask you to enter a password during installation, or</para>
          </listitem>

          <listitem>
            <para>generate a random password and store that in the file
            <filename>SYSDBA.password</filename> within your Firebird
            installation directory.</para>
          </listitem>
        </itemizedlist>

        <para>If the password is <literal>masterkey</literal> and your server
        is exposed to the Internet <emphasis>at all</emphasis> – or even to a
        local network, unless you trust every user with the
        <database>SYSDBA</database> password – you should change it
        immediately using the <application>gsec</application> command-line
        utility. Go to a command shell, <emphasis>cd</emphasis> to the
        Firebird <filename class="directory">bin</filename> subdirectory and
        issue the following command to change the password to (as an example)
        <literal>icuryy4me</literal>:</para>

        <blockquote>
          <para><command>gsec -user sysdba -pass masterkey -mo sysdba -pw
          icuryy4me</command></para>
        </blockquote>

        <para>Notice that you specify <quote>sysdba</quote> twice in the
        command:</para>

        <itemizedlist>
          <listitem>
            <para>With the <parameter>-user</parameter> parameter you identify
            yourself as <database>SYSDBA</database>. You provide
            <database>SYSDBA</database>'s current password in the
            <parameter>-pass</parameter> parameter.</para>
          </listitem>

          <listitem>
            <para>The <parameter>-mo[dify]</parameter> parameter tells gsec
            that you want to modify an account – which happens to be
            <database>SYSDBA</database> again. Lastly,
            <parameter>-pw</parameter> specifies the type of modification: the
            password.</para>
          </listitem>
        </itemizedlist>

        <para>If all went well, the new password <literal>icuryy4me</literal>
        is now encrypted and stored, and <literal>masterkey</literal> is no
        longer valid. Please be aware that unlike Firebird user names,
        passwords are case-sensitive.</para>
      </section>

      <section>
        <title>Adding Firebird user accounts</title>

        <para><database>Firebird allows the creation of many different user
        accounts, each of which can own databases and also have various types
        of access to databases it doesn't own.</database></para>

        <para>Using <application>gsec</application>, you can add a user
        account as follows from the command line in the Firebird <filename
        class="directory">bin</filename> subdirectory:</para>

        <blockquote>
          <para><command>gsec -user sysdba -pass masterkey -add billyboy -pw
          sekrit66</command></para>
        </blockquote>

        <para>Provided that you've supplied the correct password for
        <database>SYSDBA</database>, a user account called <systemitem
        class="username">billyboy</systemitem> will now have been created with
        password <systemitem>sekrit66</systemitem>. Remember that passwords
        are case-sensitive.</para>

        <note>
          <para>Since Firebird 2, users can change their own passwords.
          Previous versions required <database>SYSDBA</database> to do
          this.</para>
        </note>
      </section>
    </section>

    <section id="qsg2-config-security">
      <title><indexterm>
          <primary>Security</primary>
        </indexterm><indexterm>
          <primary>Databases</primary>

          <secondary>security</secondary>
        </indexterm>Security</title>

      <!--Intro nog steeds niet echt daverend...-->

      <para>Firebird 2 offers a number of security options, designed to make
      unauthorized access as difficult as possible. Be warned however that
      some configurable security features default to the old,
      <quote>insecure</quote> behaviour inherited from InterBase and Firebird
      1.0, in order not to break existing applications.</para>

      <para>It pays to get acquainted with Firebird's security-related
      configuration parameters. You can significantly enhance your system's
      security if you raise the protection level wherever possible. This is
      not only a matter of setting parameters: additional measures involve
      filesystem access rights, a sensible user accounts policy, etc.</para>

      <para>Below are some tips that may help protect your Firebird server and
      databases.</para>

      <variablelist>
        <varlistentry>
          <term>Run Firebird as non-system user</term>

          <listitem>
            <para>On Unix-like systems, Firebird already runs as user
            <systemitem class="username">firebird</systemitem> by default, not
            as <systemitem class="username">root</systemitem>. On Windows
            server platforms, you can also run the Firebird service under a
            designated user account (e.g. <systemitem
            class="username">Firebird</systemitem>). The default practice –
            running the service as the <systemitem
            class="username">LocalSystem</systemitem> user – poses a security
            risk if your system is connected to the Internet. Consult
            <filename>README.instsvc</filename> in the <filename
            class="directory">doc</filename> subdir to learn about this
            setup.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><indexterm>
              <primary>SYSDBA</primary>
            </indexterm>Change <database>SYSDBA</database>'s password</term>

          <listitem>
            <para>As discussed before, if your Firebird server is reachable
            from the network and the system password is
            <literal>masterkey</literal>, change it.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><indexterm>
              <primary>SYSDBA</primary>
            </indexterm>Don't create user databases as SYSDBA</term>

          <listitem>
            <para><database>SYSDBA</database> is a very powerful account, with
            full (destructive) access rights to all your Firebird databases.
            Its password should be known to a few trusted database
            administrators only. Therefore, you shouldn't use this
            super-account to create and populate regular databases. Instead,
            generate normal user accounts, and provide their account names and
            passwords to your users as needed. You can do this with
            <application>gsec</application> as shown above, or with any
            third-party Firebird administration tool.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Protect databases on the filesystem level</term>

          <listitem>
            <para>Anybody who has filesystem-level read access to a database
            file can copy it, install it on a system under his or her own
            control, and extract all data from it – including possibly
            sensitive information. Anybody who has filesystem-level write
            access to a database file can corrupt it or totally destroy
            it.</para>

            <para>As a rule, only the Firebird server process should have
            access to the database files. Users don't need, and should not
            have, access to the files – not even read-only. They query
            databases via the server, which makes sure that users only get the
            allowed type of access (if at all) to any objects within the
            database.</para>

            <para>An exception to this rule is the so-called local or embedded
            access mode of Firebird Classic Server on Linux. This mode
            <emphasis>requires</emphasis> that users have proper access rights
            to the database file itself. (Another exception is the Windows
            Embedded Server, but that's outside the scope of this
            manual.)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><indexterm>
              <primary>Aliases</primary>
            </indexterm><indexterm>
              <primary>Databases</primary>

              <secondary>aliases</secondary>
            </indexterm>Use database aliases</term>

          <listitem>
            <para><firstterm>Database aliases</firstterm> shield the client
            from physical database locations. Using aliases, a client can e.g.
            connect to <quote><database
            class="name">frodo:zappa</database></quote> without having to know
            that the real location is
            <filename>frodo:/var/firebird/music/underground/mothers_of_invention.fdb</filename>.
            Aliases also allow you to relocate databases while the clients
            keep using their existing connection strings.</para>

            <para>Aliases are listed in the file
            <filename>aliases.conf</filename>, in this format
            (Windows):</para>

            <programlisting>poker = E:\Games\Data\PokerBase.fdb
blackjack.fdb = C:\Firebird\Databases\cardgames\blkjk_2.fdb</programlisting>

            <para>And on Linux:</para>

            <programlisting>books = /home/bookworm/database/books.fdb
zappa = /var/firebird/music/underground/mothers_of_invention.fdb</programlisting>

            <para>Giving the alias an <filename
            class="extension">.fdb</filename> (or any other) extension is
            fully optional. Of course if you do include it, you must also use
            it when you connect to the database through the alias.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Restrict database access</term>

          <listitem>
            <para>The <parameter>DatabaseAccess</parameter> parameter in
            <filename>firebird.conf</filename> can be set to
            <constant>Restrict</constant> to limit access to explicitly listed
            filesystem trees, or even to <constant>None</constant> to allow
            access to aliased databases only. Default is
            <constant>All</constant>, i.e. no restrictions.</para>

            <para>Note that this is not the same thing as the filesystem-level
            access protection discussed in the previous item: when
            <parameter>DatabaseAccess</parameter> is anything other than
            <constant>None</constant>, the server will refuse to open any
            databases outside the defined scope even if it has sufficient
            rights on the database files.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>There are more security parameters, but the ones not mentioned are
      already set to an adequate protection level by default. You can read
      about them in the Release Notes (1.5 and 2.0; both are included with
      Firebird 2) and in the comments in <filename>firebird.conf</filename>
      itself.</para>
    </section>

    <section id="qsg2-config-cpa">
      <title><indexterm>
          <primary>Control Panel applets</primary>
        </indexterm>Windows Control Panel applets</title>

      <para>Several control panel applets are available for use with Firebird.
      Whilst such applets are not essential, they do provide a convenient way
      to start and stop the server and check its current status.</para>

      <section>
        <title>Firebird Server Manager</title>

        <para>The Firebird Server Manager applet is included in the Firebird
        distribution. The option to install this applet is only available for
        Superserver.</para>

        <note>
          <para>The applet is also usable for Classic server, provided that it
          (the server) runs a a service, not as an application. Since the
          installation dialog won't give you the option to include the applet
          with a Classic server, you must, if you really want it:</para>

          <itemizedlist spacing="compact">
            <listitem>
              <para>Install Superserver first;</para>
            </listitem>

            <listitem>
              <para>Copy the applet <filename>Firebird2Control.cpl</filename>
              from the Windows system folder to a safe place;</para>
            </listitem>

            <listitem>
              <para>Uninstall Superserver;</para>
            </listitem>

            <listitem>
              <para>Install Classic;</para>
            </listitem>

            <listitem>
              <para>Copy the applet back to the system directory.</para>
            </listitem>
          </itemizedlist>
        </note>

        <para>This is a screenshot of the activated applet. Note that the
        title bar says <quote>Firebird Server Control</quote>, although it is
        listed in the Control Panel as <citetitle>Firebird 2.0 Server
        Manager</citetitle>.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="images/FbServerControl-2.png"
                       format="PNG" />
          </imageobject>
        </mediaobject>

        <para>Unfortunately, the bundled applet only works on Windows NT,
        2000/2003 and XP.</para>

        <!--REMOVE WARNING IF BUG FIXED BEFORE FB 2 FINAL RELEASE-->

        <warning>
          <title>Windows XP alert</title>

          <para>At the time of this writing (RC3 stage, June 2006) the applet
          that ships with Firebird 2 will not function on most XP systems
          because it needs a certain Microsoft DLL that often isn't present.
          No error messages will appear, but the applet simply won't show up
          in the Control Panel and won't respond if you start it from the
          Explorer.</para>

          <para>To get it to work, get hold of a copy of <filename
          class="libraryfile">mfc71.dll</filename> and place it in your
          Windows System32 directory. Alternatively, you can take the applet
          that came with Firebird 1.5 and use that one – it works fine with
          Firebird 2. The applet filename is
          <filename>Firebird2Control.cpl</filename> both in Firebird 1.5 and
          Firebird 2. Or use the Firebird Control Center, see below.</para>

          <para>This problem may be fixed in later versions.</para>
        </warning>
      </section>

      <section>
        <title>Firebird Control Center</title>

        <para>If you want an applet that also works on Windows 9x or ME, visit
        this webpage:</para>

        <blockquote>
          <para><ulink
          url="http://www.achim-kalwa.de/fbcc.phtml">http://www.achim-kalwa.de/fbcc.phtml</ulink></para>
        </blockquote>

        <para>...and download the Firebird Control Center <ulink
        url="http://www.achim-kalwa.de/dl/fbcc-0.2.7.exe">fbcc-0.2.7.exe</ulink>.
        Please note that, unlike the applet included with Firebird, the
        Firebird Control Center will <emphasis>not</emphasis> work with
        Classic servers at all.</para>

        <para>The Control Center looks a lot different than the Firebird
        applet shown in the screenshot, but offers the same functionality.
        Attention Windows XP users: the button for starting and stopping the
        server will be labeled <quote>Start</quote> all the time, even when
        the server is already running. It functions as it should though. On
        other Windowses the button will say <quote>Start</quote> or
        <quote>Stop</quote> according to the situation.</para>
      </section>
    </section>

    <section id="qsg2-config-admintools">
      <title><indexterm>
          <primary>Admin tools</primary>
        </indexterm>Administration tools</title>

      <para>The Firebird kit does not come with a GUI admin tool. It does have
      a set of command-line tools – executable programs which are located in
      the <filename class="directory">bin</filename> subdirectory of your
      Firebird installation. One of them, <application>gsec</application>, has
      already been introduced to you.</para>

      <para>The range of excellent GUI tools available for use with a Windows
      client machine is too numerous to describe here. A few GUI tools written
      in Borland Kylix, for use on Linux client machines, are also in various
      stages of completion.</para>

      <para>Inspect the <ulink
      url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;page=ibp_contrib_download#ADM">Downloads
      &gt; Contributed &gt; Admin Tools page</ulink> at <ulink
      url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink> for all
      of the options.</para>

      <note>
        <para>Remember: you can use a Windows client to access a Linux server
        and vice-versa.</para>
      </note>
    </section>
  </section>

  <section id="qsg2-databases">
    <title><indexterm>
        <primary>Databases</primary>

        <secondary>working with databases</secondary>
      </indexterm>Working with databases</title>

    <para>In this part of the manual we'll show you:</para>

    <itemizedlist spacing="compact">
      <listitem>
        <para>how to connect to an existing database;</para>
      </listitem>

      <listitem>
        <para>how to create a database;</para>
      </listitem>

      <listitem>
        <para>plus some things you should know about Firebird SQL.</para>
      </listitem>
    </itemizedlist>

    <para>In as much as remote connections are involved, we will use the
    recommended TCP/IP protocol.</para>

    <section>
      <title><indexterm>
          <primary>Connecting</primary>

          <secondary>connection strings</secondary>
        </indexterm>Connection strings</title>

      <para>If you want to connect to a database or create one, you have to
      supply (amongst other things) a <firstterm>connection string</firstterm>
      to the server.</para>

      <section>
        <title>Local connection strings</title>

        <para>An explicit local connection string consists of the path +
        filename specification in the format of the filesystem used on the
        server machine, for example</para>

        <itemizedlist>
          <listitem>
            <para>On a Linux or other Unix-like server:</para>

            <blockquote>
              <para><filename>/opt/firebird/examples/empbuild/employee.fdb</filename></para>
            </blockquote>
          </listitem>

          <listitem>
            <para>On a Windows server:</para>

            <blockquote>
              <para><filename>C:\Biology\Data\Primates\Apes\populations.fdb</filename></para>
            </blockquote>
          </listitem>
        </itemizedlist>

        <para>Many clients also allow relative path strings (e.g.
        <quote><filename>..\examples\empbuild\employee.fdb</filename></quote>)
        but you should use them with caution, as it's not always obvious how
        they will be expanded. Getting an error message is annoying enough,
        but applying changes to another database than you thought you were
        connected to may be disastrous.</para>

        <indexterm>
          <primary>Aliases</primary>
        </indexterm>

        <indexterm>
          <primary>Databases</primary>

          <secondary>aliases</secondary>
        </indexterm>

        <para>Instead of a file path, the local connection string may also be
        a <emphasis>database alias</emphasis> that is defined in
        <filename>aliases.conf</filename>, as discussed earlier. The format of
        an alias depends only on how it's defined in the aliases file, not on
        the server filesystem. Examples are:</para>

        <itemizedlist spacing="compact">
          <listitem>
            <para><filename>zappa</filename></para>
          </listitem>

          <listitem>
            <para><filename>blackjack.fdb</filename></para>
          </listitem>

          <listitem>
            <para><filename>poker</filename></para>
          </listitem>
        </itemizedlist>

        <tip>
          <para>If your local connections fail, it may be because the local
          protocol isn't working properly on your machine. Finding out what
          causes this is beyond the scope of this starters' guide, but you can
          always work around it by putting
          <quote><literal>localhost:</literal></quote> before your database
          paths or aliases, thus turning them into TCP/IP connection strings
          (see below).</para>
        </tip>
      </section>

      <section>
        <title><indexterm>
            <primary>Server name and path</primary>
          </indexterm>TCP/IP connection strings</title>

        <para>A TCP/IP connection string consists of:</para>

        <itemizedlist spacing="compact">
          <listitem>
            <para>a server name or IP address</para>
          </listitem>

          <listitem>
            <para>a colon (<quote><literal>:</literal></quote>)</para>
          </listitem>

          <listitem>
            <para>either the absolute path + filename on the server machine,
            or an alias defined on the server machine.</para>
          </listitem>
        </itemizedlist>

        <para>Examples:</para>

        <itemizedlist>
          <listitem>
            <para>On Linux/Unix:</para>

            <blockquote>
              <para><literal>pongo:/opt/firebird/examples/empbuild/employee.fdb</literal></para>

              <para><literal>bongo:fury</literal></para>

              <para><literal>112.179.0.1:/var/Firebird/databases/butterflies.fdb</literal></para>

              <para><literal>localhost:blackjack.fdb</literal></para>
            </blockquote>
          </listitem>

          <listitem>
            <para>On Windows:</para>

            <blockquote>
              <para><filename>siamang:C:\Biology\Data\Primates\Apes\populations.fdb</filename></para>

              <para><literal>sofa:D:\Misc\Friends\Rich\Lenders.fdb</literal></para>

              <para><literal>127.0.0.1:Borrowers</literal></para>
            </blockquote>
          </listitem>
        </itemizedlist>

        <para><indexterm>
            <primary>Aliases</primary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>aliases</secondary>
          </indexterm>Notice how the aliased connection strings don't give any
        clue about the server OS. And they don't have to, either: you talk to
        a Linux Firebird server just like you talk to a Windows Firebird
        server. In fact, specifying an explicit database path is one of the
        rare occasions where you have to be aware of the difference.</para>
      </section>
    </section>

    <section id="qsg2-databases-connecting">
      <title><indexterm>
          <primary>Connecting</primary>
        </indexterm><indexterm>
          <primary>Databases</primary>

          <secondary>connecting</secondary>
        </indexterm>Connecting to an existing database</title>

      <para><indexterm>
          <primary>Databases</primary>

          <secondary>example database</secondary>
        </indexterm><indexterm>
          <primary>Sample database</primary>
        </indexterm><indexterm>
          <primary>Example database</primary>
        </indexterm>A sample database named <filename>employee.fdb</filename>
      is located in the <filename
      class="directory">examples/empbuild</filename> subdirectory of your
      Firebird installation. You can use this database to <quote>try your
      wings</quote>.</para>

      <para>If you move or copy the sample database, be sure to place it on a
      hard disk that is physically attached to your server machine. Shares,
      mapped drives or (on Unix) mounted SMB (Samba) filesystems will not
      work. The same rule applies to any databases that you create or
      use.</para>

      <para>Connecting to a Firebird database requires the user to
      authenticate with a user name and a valid password. In order to work
      with objects inside the database – like tables, views, etc. – you also
      need explicit permissions on those objects, unless you own them (you own
      an object if you have created it) or if you're connected as <database
      class="name">SYSDBA</database>. In the example database, sufficient
      permissions have been granted to <database>PUBLIC</database> (i.e.
      anybody who cares to connect) to enable you to view and modify data to
      your heart's content.</para>

      <para>For simplicity here, we will look at authenticating as <database
      class="name">SYSDBA</database> using the password
      <literal>masterkey</literal>. Also, in order to keep the connection
      strings short, we will only work with local databases in the examples.
      Of course everything you'll learn in these sections can also be applied
      to remote databases, simply by prepending the host name plus
      <quote><literal>:</literal></quote> to the connection string.</para>

      <section>
        <title><indexterm>
            <primary>isql</primary>

            <secondary>connecting to a database</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>connecting</secondary>

            <tertiary>with isql</tertiary>
          </indexterm>Connecting with <application>isql</application></title>

        <para>Firebird ships with a text-mode client named
        <firstterm>isql</firstterm> (Interactive SQL utility). You can use it
        in several ways to connect to a database. One of them, shown below, is
        to start it in its interactive mode. Go to the <filename
        class="directory">bin</filename> subdirectory of your Firebird
        installation and type <command>isql</command> (Windows) or
        <command>./isql</command> (Linux) at the command prompt.</para>

        <para>[In the following examples, ↵ means <quote>hit
        <keycap>Enter</keycap></quote>]</para>

        <indexterm>
          <primary>Connecting</primary>

          <secondary>CONNECT statement</secondary>
        </indexterm>

        <indexterm class="singular" scope="local">
          <primary>SQL</primary>

          <secondary>CONNECT statement</secondary>
        </indexterm>

        <screen>C:\Program Files\Firebird\Firebird_2_0\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database
SQL&gt;CONNECT "C:\Program Files\Firebird\Firebird_2_0\examples\
             empbuild\employee.fdb"↵         // on one line!
CON&gt;user 'SYSDBA' password 'masterkey';↵</screen>

        <important>
          <itemizedlist>
            <listitem>
              <para>In <application>isql</application>, every SQL statement
              must end with a semicolon. If you hit <keycap>Enter</keycap> and
              the line doesn't end with a semicolon, isql assumes that the
              statement continues on the next line and the prompt will change
              from <prompt>SQL&gt;</prompt> to <prompt>CON&gt;</prompt>. This
              enables you to split long statements over multiple lines. If you
              hit <keycap>Enter</keycap> after your statement and you've
              forgotten the semicolon, just type it on the empty line after
              the <prompt>CON&gt;</prompt> prompt and press
              <keycap>Enter</keycap> again.</para>
            </listitem>

            <listitem>
              <para>If you run Classic Server on Linux, a fast, direct local
              connection is attempted if the database path does not start with
              a hostname. This may fail if your Linux login doesn't have
              sufficient access rights to the database file. In that case,
              connect to
              <literal>localhost:</literal><replaceable>&lt;path&gt;</replaceable>.
              Then the server process (with Firebird 2 usually running as
              <systemitem class="username">firebird</systemitem>) will open
              the file. On the other hand, network-style connections may fail
              if a user created the database in Classic local mode and the
              server doesn't have enough access rights.</para>
            </listitem>
          </itemizedlist>
        </important>

        <note>
          <para>Although single-quote symbols are the <quote>norm</quote> for
          delimiting strings in Firebird, double-quote symbols were used with
          the database path string in the above example. This is sometimes
          necessary with some of the command-line utilities where the path
          string contains spaces. Single quotes should work for paths that do
          not contain spaces.</para>

          <para>The quotes around <quote>SYSDBA</quote> and
          <quote>masterkey</quote> are optional, by the way. Database paths
          without spaces also don't need quotes.</para>
        </note>

        <para>At this point, <application>isql</application> will inform you
        that you are connected:</para>

        <screen>DATABASE "C:\Program Files\Firebird\Firebird_2_0\examples\empbuild
\employee.fdb", User: sysdba
SQL&gt;</screen>

        <para>You can now continue to play about with the
        <filename>employee.fdb</filename> database. With
        <application>isql</application> you can query data, get information
        about the metadata, create database objects, run data definition
        scripts and much more.</para>

        <para>To get back to the command prompt, type:</para>

        <screen>SQL&gt;QUIT;↵</screen>

        <para>You can also type <literal>EXIT</literal> instead of
        <literal>QUIT</literal>, the difference being that
        <literal>EXIT</literal> will first commit any open transactions,
        making your modifications permanent.</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Databases</primary>

            <secondary>connecting</secondary>

            <tertiary>with a GUI clientl</tertiary>
          </indexterm>Connecting with a GUI client</title>

        <para>GUI client tools usually take charge of composing the
        <database>CONNECT</database> string for you, using server, path (or
        alias), user name and password information that you type into
        prompting fields. Use the elements as described in the preceding
        topic.</para>

        <note>
          <title>Notes</title>

          <itemizedlist spacing="compact">
            <listitem>
              <para>It is quite common for such tools to expect the entire
              server + path/alias as a single connection string – just like
              <application>isql</application> does.</para>
            </listitem>

            <listitem>
              <para>Remember that file names and commands on Linux and other
              <quote>Unix-ish</quote> command shells are
              case-sensitive.</para>
            </listitem>
          </itemizedlist>
        </note>
      </section>
    </section>

    <section id="qsg2-databases-creating">
      <title><indexterm>
          <primary>isql</primary>

          <secondary>creating a database</secondary>
        </indexterm><indexterm>
          <primary>Databases</primary>

          <secondary>creating with isql</secondary>
        </indexterm>Creating a database using
      <application>isql</application></title>

      <para>There is more than one way to create a database using
      <application>isql</application>. Here, we will look at one simple way to
      create a database interactively – although, for your serious database
      definition work, you should create and maintain your metadata objects
      using data definition scripts.</para>

      <section>
        <title>Starting <application>isql</application></title>

        <para>To create a database interactively using the
        <application>isql</application> command shell, get to a command prompt
        in Firebird's <filename class="directory">bin</filename> subdirectory
        and type <command>isql</command> (Windows) or
        <command>./isql</command> (Linux):</para>

        <screen>C:\Program Files\Firebird\Firebird_2_0\bin&gt;isql↵
Use CONNECT or CREATE DATABASE to specify a database</screen>
      </section>

      <section>
        <title><indexterm>
            <primary>CREATE DATABASE statement</primary>
          </indexterm><indexterm class="singular" scope="local">
            <primary>SQL</primary>

            <secondary>CREATE DATABASE statement</secondary>
          </indexterm>The CREATE DATABASE statement</title>

        <para>Now you can create your new database interactively. Let's
        suppose that you want to create a database named
        <filename>test.fdb</filename> and store it in a directory named
        <filename class="directory">data</filename> on your <systemitem
        class="filesystem">D</systemitem> drive:</para>

        <screen>SQL&gt;CREATE DATABASE 'D:\data\test.fdb' page_size 8192↵
CON&gt;user 'SYSDBA' password 'masterkey';↵</screen>

        <important>
          <itemizedlist>
            <listitem>
              <para>In the <database>CREATE DATABASE</database> statement the
              quotes around path string, username, and password are
              <emphasis>mandatory</emphasis>. This is different from the
              <database>CONNECT</database> statement.</para>
            </listitem>

            <listitem>
              <para>If you run Classic Server on Linux and you don't start the
              database path with a hostname, creation of the database file is
              attempted with your Linux login as the owner. This may or may
              not be what you want (think of access rights if you want others
              to be able to connect). If you prepend <systemitem
              class="systemname">localhost:</systemitem> to the path, the
              server process (with Firebird 2 usually running as <systemitem
              class="username">firebird</systemitem>) will create and own the
              file.</para>
            </listitem>
          </itemizedlist>
        </important>

        <para>The database will be created and, after a few moments, the SQL
        prompt will reappear. You are now connected to the new database and
        can proceed to create some test objects in it.</para>

        <para>But to verify that there really is a database there, first type
        in this query:</para>

        <screen>SQL&gt;SELECT * FROM RDB$RELATIONS;↵</screen>

        <para>Although you haven't created any tables yet, the screen will
        fill up with a large amount of data! This query selects all of the
        rows in the system table <database>RDB$RELATIONS</database>, where
        Firebird stores the metadata for tables. An <quote>empty</quote>
        database is not empty: it contains a number of system tables and other
        objects. The system tables wil grow as you add more user objects to
        your database.</para>

        <para>To get back to the command prompt type <literal>QUIT</literal>
        or <literal>EXIT</literal>, as explained in the section on
        connecting.</para>
      </section>
    </section>

    <section id="qsg2-databases-sql">
      <title><indexterm class="singular" scope="local">
          <primary>SQL</primary>
        </indexterm><indexterm class="singular" scope="local">
          <primary>Firebird SQL</primary>
        </indexterm>Firebird SQL</title>

      <para>Every database management system has its own idiosyncrasies in the
      ways it implements SQL. Firebird adheres to the SQL standard more
      rigorously than most other RDBMSs. Developers migrating from products
      that are less standards-compliant often wrongly suppose that Firebird is
      quirky, whereas many of its apparent quirks are not quirky at
      all.</para>

      <section id="qsg2-integer-division">
        <title><indexterm>
            <primary>Integer division</primary>
          </indexterm>Division of an integer by an integer</title>

        <para>Firebird accords with the SQL standard by truncating the result
        (quotient) of an integer/integer calculation to the next lower
        integer. This can have bizarre results unless you are aware of
        it.</para>

        <para>For example, this calculation is correct in SQL:</para>

        <blockquote>
          <para><literal>1 / 3 = 0</literal></para>
        </blockquote>

        <para>If you are upgrading from an RDBMS which resolves
        integer/integer division to a float quotient, you will need to alter
        any affected expressions to use a float or scaled numeric type for
        either dividend, divisor, or both.</para>

        <para>For example, the calculation above could be modified thus in
        order to produce a non-zero result:</para>

        <blockquote>
          <para><literal>1.000 / 3 = 0.333</literal></para>
        </blockquote>
      </section>

      <section id="qsg2-strings">
        <title>Things to know about strings</title>

        <section>
          <title><indexterm>
              <primary>Strings</primary>

              <secondary>delimiter symbol</secondary>
            </indexterm>String delimiter symbol</title>

          <para>Strings in Firebird are delimited by a pair of single quote
          (apostrophe) symbols – <literal>'I am a string'</literal> – (ASCII
          code 39, <emphasis>not</emphasis> 96). If you used earlier versions
          of Firebird's relative, InterBase®, you might recall that double and
          single quotes were interchangeable as string delimiters. Double
          quotes cannot be used as string delimiters in Firebird SQL
          statements.</para>
        </section>

        <section>
          <title><indexterm>
              <primary>Apostrophes in strings</primary>
            </indexterm><indexterm>
              <primary>Strings</primary>

              <secondary>apostrophes in strings</secondary>
            </indexterm>Apostrophes in strings</title>

          <para>If you need to use an apostrophe inside a Firebird string, you
          can <quote>escape</quote> the apostrophe character by preceding it
          with another apostrophe.</para>

          <para>For example, this string will give an error:</para>

          <blockquote>
            <para><literal>'Joe's Emporium'</literal></para>
          </blockquote>

          <para>because the parser encounters the apostrophe and interprets
          the string as <literal>'Joe'</literal> followed by some unknown
          keywords.</para>

          <para>To make this a legal string, double the apostrophe
          character:</para>

          <blockquote>
            <para><literal>'Joe''s Emporium'</literal></para>
          </blockquote>

          <para>Notice that this is TWO single quotes, not one
          double-quote.</para>
        </section>

        <section>
          <title><indexterm>
              <primary>Strings</primary>

              <secondary>concatenation</secondary>
            </indexterm>Concatenation of strings</title>

          <para>The concatenation symbol in SQL is two <quote>pipe</quote>
          symbols (ASCII 124, in a pair with no space between). In SQL, the
          <quote>+</quote> symbol is an arithmetic operator and it will cause
          an error if you attempt to use it for concatenating strings. The
          following expression prefixes a character column value with the
          characters <quote><literal>Reported by: </literal></quote>:</para>

          <blockquote>
            <para><literal>'Reported by: ' || LastName</literal></para>
          </blockquote>

          <para>Take care with concatenations. Be aware that Firebird will
          raise an error if your expression attempts to concatenate two or
          more char or varchar columns whose potential combined lengths would
          exceed the maximum length limit for a char or a varchar (32
          Kb).</para>

          <para>See also the note below, <xref linkend="qsg2-nulls" />, about
          concatenating in expressions involving
          <constant>NULL</constant>.</para>
        </section>

        <section>
          <title><indexterm>
              <primary>Double-quoted identifiers</primary>
            </indexterm>Double-quoted identifiers</title>

          <para>Before the SQL-92 standard, it was not legal to have object
          names (identifiers) in a database that duplicated keywords in the
          language, were case-sensitive or contained spaces. SQL-92 introduced
          a single new standard to make any of them legal, provided that the
          identifiers were defined within pairs of double-quote symbols (ASCII
          34) and were always referred to using double-quote
          delimiters.</para>

          <para>The purpose of this <quote>gift</quote> was to make it easier
          to migrate metadata from non-standard RDBMSs to standards-compliant
          ones. The down-side is that, if you choose to define an identifier
          in double quotes, its case-sensitivity and the enforced
          double-quoting will remain mandatory.</para>

          <para>Firebird does permit a slight relaxation under a very limited
          set of conditions. If the identifier which was defined in
          double-quotes:</para>

          <orderedlist spacing="compact">
            <listitem>
              <para>was defined as all upper-case,</para>
            </listitem>

            <listitem>
              <para>is not a keyword, and</para>
            </listitem>

            <listitem>
              <para>does not contain any spaces,</para>
            </listitem>
          </orderedlist>

          <para>...then it can be used in SQL unquoted and case-insensitively.
          (But as soon as you put double-quotes around it, you must match the
          case again!)</para>

          <warning>
            <para>Don't get too smart with this! For instance, if you have
            tables "<database>TESTTABLE</database>" and
            "<database>TestTable</database>", both defined within
            double-quotes, and you issue the command:</para>

            <screen>SQL&gt;select * from TestTable;</screen>

            <para>...you will get the records from
            "<database>TESTTABLE</database>", not
            "<database>TestTable</database>"!</para>
          </warning>

          <para>Unless you have a compelling reason to define quoted
          identifiers, it is usually recommended that you avoid them. Firebird
          happily accepts a mix of quoted and unquoted identifiers – so there
          is no problem including that keyword which you inherited from a
          legacy database, if you need to.</para>

          <warning>
            <para>Some database admin tools enforce double-quoting of
            <emphasis>all</emphasis> identifiers by default. Try to choose a
            tool which makes double-quoting optional.</para>
          </warning>
        </section>
      </section>

      <section id="qsg2-nulls" xreflabel="Expressions involving NULL">
        <title><indexterm>
            <primary>NULL</primary>
          </indexterm>Expressions involving <constant>NULL</constant></title>

        <para>In SQL, <constant>NULL</constant> is not a value. It is a
        condition, or <emphasis>state</emphasis>, of a data item, in which its
        value is unknown. Because it is unknown, <constant>NULL</constant>
        cannot behave like a value. When you try to perform arithmetic on
        <constant>NULL</constant>, or involve it with values in other
        expressions, the result of the operation will almost always be
        <constant>NULL</constant>. It is not zero or blank or an <quote>empty
        string</quote> and it does not behave like any of these values.</para>

        <para>So – below are some examples of the types of surprises you will
        get if you try to perform calculations and comparisons with
        <constant>NULL</constant>.</para>

        <para>The following expressions all return
        <constant>NULL</constant>:</para>

        <itemizedlist>
          <listitem>
            <para><literal>1 + 2 + 3 +
            <constant>NULL</constant></literal></para>
          </listitem>

          <listitem>
            <para><literal>not (<constant>NULL</constant>)</literal></para>
          </listitem>

          <listitem>
            <para><literal>'Home ' || 'sweet ' ||
            <constant>NULL</constant></literal></para>
          </listitem>
        </itemizedlist>

        <para>You might have expected 6 from the first expression and
        <quote><literal>Home sweet</literal></quote> from the third, but as we
        just said: <constant>NULL</constant> is not like the number 0 or an
        empty string – it's far more destructive!</para>

        <para>The following expression:</para>

        <itemizedlist>
          <listitem>
            <para><programlisting>FirstName || ' ' || LastName</programlisting></para>
          </listitem>
        </itemizedlist>

        <para>will return <constant>NULL</constant> if either
        <varname>FirstName</varname> or <varname>LastName</varname> is
        <constant>NULL</constant>. Otherwise it will nicely concatenate the
        two names with a space in between. This also holds if any of the
        variables is an empty string.</para>

        <para>Now let's examine some PSQL (Procedural SQL) examples with
        <code>if</code>-constructs.</para>

        <itemizedlist>
          <listitem>
            <para><programlisting>if (a = b) then
  MyVariable = 'Equal';
else
  MyVariable = 'Not equal';</programlisting></para>

            <para>After executing this code, <varname>MyVariable</varname>
            will be <literal>'Not equal'</literal> if both
            <varname>a</varname> and <varname>b</varname> are
            <constant>NULL</constant>. The reason is that <literal>'a =
            b'</literal> yields <constant>NULL</constant> if at least one of
            them is <constant>NULL</constant>. If the test expression of an
            <quote><literal>if</literal></quote> statement is
            <constant>NULL</constant>, it behaves like
            <literal>false</literal>: the '<literal>then</literal>' block is
            skipped, and the '<literal>else</literal>' block executed.</para>

            <warning>
              <para>Although the expression may <emphasis>behave</emphasis>
              like <literal>false</literal> in this case, it's still
              <constant>NULL</constant>. If you try to invert it using
              <function>not()</function>, what you get is another
              <constant>NULL</constant> - not
              <quote><literal>true</literal></quote>.</para>
            </warning>
          </listitem>

          <listitem>
            <para><programlisting>if (a &lt;&gt; b) then
  MyVariable = 'Not equal';
else
  MyVariable = 'Equal';</programlisting></para>

            <para>Here, <varname>MyVariable</varname> will be
            <literal>'Equal'</literal> if <varname>a</varname> is
            <constant>NULL</constant> and <varname>b</varname> isn't, or vice
            versa. The explanation is analogous to that of the previous
            example.</para>
          </listitem>
        </itemizedlist>

        <tip>
          <para>Think of <constant>NULL</constant> as
          <constant>UNKNOWN</constant> and all these strange results suddenly
          start to make sense! If the value of <varname>Number</varname> is
          unknown, the outcome of '<literal>1 + 2 + 3 + Number</literal>' is
          also unknown (and therefore <constant>NULL</constant>). If the
          content of <varname>MyString</varname> is unknown, then so is
          '<literal>MyString || YourString</literal>' (even if
          <varname>YourString</varname> is non-<constant>NULL</constant>).
          Etcetera.</para>
        </tip>

        <section>
          <title>The DISTINCT keyword comes to the rescue!</title>

          <para>Firebird 2 implements a new use of the
          <database>DISTINCT</database> keyword which allows you to test the
          (in)equality of two entities. Two expressions are</para>

          <variablelist>
            <varlistentry>
              <term>DISTINCT</term>

              <listitem>
                <para>...if they have different values <emphasis
                role="bold">or</emphasis> if one is <constant>NULL</constant>
                and the other isn't.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>NOT DISTINCT</term>

              <listitem>
                <para>...if they have the same value <emphasis
                role="bold">or</emphasis> if they are both
                <constant>NULL</constant>.</para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para><database>DISTINCT</database> always returns
          <database><constant>true</constant> or <constant>false</constant>,
          never <constant>NULL</constant>.</database></para>

          <para><database>Using DISTINCT, you can rewrite the first PSQL
          example as follows:</database></para>

          <programlisting>if (a is not distinct from b) then
  MyVariable = 'Equal';
else
  MyVariable = 'Not equal';</programlisting>

          <para>And the second as:</para>

          <programlisting>if (a is distinct from b) then
  MyVariable = 'Not equal';
else
  MyVariable = 'Equal';</programlisting>

          <para>These versions will give you the results that an normal human
          being (not brainwashed by SQL standards) would expect, whether there
          are <constant>NULL</constant>s involved or not.</para>
        </section>

        <section>
          <title>More about <constant>NULL</constant>s</title>

          <para>A lot more information about <constant>NULL</constant>
          behaviour can be found in the <citetitle>Firebird Null
          Guide</citetitle>, at these locations:</para>

          <itemizedlist spacing="compact">
            <listitem>
              <para><ulink
              url="http://www.firebirdsql.org/manual/nullguide.html">http://www.firebirdsql.org/manual/nullguide.html</ulink>
              (HTML)</para>
            </listitem>

            <listitem>
              <para><ulink
              url="http://www.firebirdsql.org/pdfmanual/Firebird-Null-Guide.pdf">http://www.firebirdsql.org/pdfmanual/Firebird-Null-Guide.pdf</ulink>
              (PDF)</para>
            </listitem>
          </itemizedlist>

          <note>
            <para>At the time of this writing (August 2006), the
            <citetitle>Firebird Null Guide</citetitle> is not yet up to date
            with Firebird 2.</para>
          </note>
        </section>
      </section>
    </section>
  </section>

  <section id="qsg2-safety">
    <title>Preventing data loss</title>

    <section id="qsg2-safety-backup">
      <title><indexterm>
          <primary>Backup</primary>
        </indexterm><indexterm>
          <primary>Restore</primary>
        </indexterm><indexterm>
          <primary>Databases</primary>

          <secondary>backup and restore</secondary>
        </indexterm>Backup</title>

      <para>Firebird comes with two utilities for backing up and restoring
      your databases: <firstterm>gbak</firstterm> and
      <firstterm>nbackup</firstterm>. Both can be found in the <filename
      class="directory">bin</filename> subdirectory of your Firebird
      installation. Firebird databases can be backed up whilst users are
      connected to the system and going about their normal work. The backup
      will be taken from a snapshot of the database state at the time the
      backup began.</para>

      <para>Regular backups and occasional restores should be a scheduled part
      of your database management activity.</para>

      <warning>
        <para>Except in nbackup lock mode, do not use external proprietary
        backup utilities or file-copying tools such as
        <application>WinZip</application>, <application>tar</application>,
        <application>copy</application>, <application>xcopy</application>,
        etc., on a database which is running. Not only will the backup be
        unreliable, but the disk-level blocking used by these tools can
        corrupt a running database.</para>
      </warning>

      <important>
        <para>Study the warnings in the next section about database activity
        during restores!</para>
      </important>

      <para>More information about <application>gbak</application> can be
      found in <citetitle>The Firebird Book</citetitle>, the <citetitle>Using
      Firebird</citetitle> guide (a not-so-recent version is available through
      IBPhoenix, an updated version will be published later on the Firebird
      site), or in the InterBase 6.0 manuals combined with the Firebird 1.5
      and 2.0 Release Notes. See the links to these resources in <link
      linkend="qsg2-gettinghelp">How to get help</link>.</para>

      <para>The <application>nbackup</application> manual is here (HTML and
      PDF version, same content):</para>

      <blockquote>
        <para><ulink
        url="http://www.firebirdsql.org/manual/nbackup.html">http://www.firebirdsql.org/manual/nbackup.html</ulink></para>

        <para><ulink
        url="http://www.firebirdsql.org/pdfmanual/Firebird-nbackup.pdf">http://www.firebirdsql.org/pdfmanual/Firebird-nbackup.pdf</ulink></para>
      </blockquote>
    </section>

    <section id="qsg2-safety-howtocorrupt">
      <title><indexterm>
          <primary>Databases</primary>

          <secondary>corruption</secondary>
        </indexterm>How to corrupt a database</title>

      <para>The following is a list of things <emphasis>not</emphasis> to do
      if you want to keep your Firebird databases healthy.</para>

      <section>
        <title><indexterm>
            <primary>Databases</primary>

            <secondary>system tables</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>metadata</secondary>
          </indexterm><indexterm>
            <primary>System tables</primary>
          </indexterm>Modifying metadata tables yourself</title>

        <para>Firebird stores and maintains all of the metadata for its own
        and your user-defined objects in special tables, called
        <firstterm>system tables</firstterm>, right in the database itself.
        The identifiers for these system tables, their columns and several
        other types of system objects begin with the characters
        <literal>RDB$</literal>.</para>

        <para>Because these are ordinary database objects, they can be queried
        and manipulated just like your user-defined objects. However, just
        because you can does not say you should. The Firebird engine
        implements a high-level subset of SQL (DDL) for the purpose of
        defining and operating on metadata objects, typically through
        <database>CREATE</database>, <database>ALTER</database> and
        <database>DROP</database> statements.</para>

        <para>It cannot be recommended too strongly that you use DDL – not
        direct SQL operations on the system tables – whenever you need to
        alter or remove metadata. Defer the <quote>hot fix</quote> stuff until
        your skills in SQL and your knowledge of the Firebird engine become
        very advanced. A wrecked database is neither pretty to behold nor
        cheap to repair.</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Forced writes</primary>
          </indexterm>Disabling forced writes on Windows</title>

        <para>Firebird is installed with forced writes (synchronous writes)
        enabled by default. Changed and new data are written to disk
        immediately upon posting.</para>

        <para>It is possible to configure a database to use asynchronous data
        writes – whereby modified or new data are held in the memory cache for
        periodic flushing to disk by the operating system's I/O subsystem. The
        common term for this configuration is <firstterm>forced writes
        off</firstterm> (or <firstterm>disabled</firstterm>). It is sometimes
        resorted to in order to improve performance during large batch
        operations.</para>

        <para>The big warning here is: do <emphasis>not</emphasis> disable
        forced writes on a Windows server. It has been observed that the
        Windows server platforms do not flush the write cache until the
        Firebird service is shut down. Apart from power interruptions, there
        is just too much that can go wrong on a Windows server. If it should
        hang, the I/O system goes out of reach and your users' work will be
        lost in the process of rebooting.</para>

        <note>
          <para>Windows 9x and ME do not support deferred data writes</para>
        </note>

        <section>
          <title>Disabling Forced Writes on a Linux server</title>

          <para>Linux servers are safer for running an operation with forced
          writes disabled temporarily. Still, do not leave it disabled once
          your large batch task is completed, unless you have a very robust
          fall-back power system.</para>
        </section>
      </section>

      <section>
        <title><indexterm>
            <primary>Restore</primary>

            <secondary>to a running database</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>backup and restore</secondary>
          </indexterm>Restoring a backup to a running database</title>

        <para>One of the restore options in the
        <application>gbak</application> utility (<literal>gbak
        -rep[lace_database]</literal>) allows you to restore a gbak file over
        the top of an existing database. It is possible for this style of
        restore to proceed without warning while users are logged in to the
        database. Database corruption is almost certain to be the
        result.</para>

        <note>
          <para>Notice that the shortest form of the command is <literal>gbak
          -rep</literal>, not <literal>gbak -r</literal> as it used to be in
          previous Firebird versions. What happened to <literal>gbak
          -r</literal>? It is now short for <literal>gbak
          -recreate_database</literal> and it will throw an error if the
          specified database already exists (unless you also add the
          <literal>overwrite</literal> keyword).</para>

          <para>These changes have been made because many users thought that
          the <literal>-r</literal> switch meant <emphasis>restore</emphasis>
          instead of replace – and only found out when it was too late.</para>
        </note>

        <warning>
          <para>Be aware that you will need to design your Admin tools and
          procedures to prevent any possibility for any user (including
          <database>SYSDBA</database>) to restore to your active database if
          any users are logged in.</para>
        </warning>

        <para>If is practicable to do so, it is recommended to restore to
        spare disk space using the <literal>gbak -c[reate]</literal> option
        and test the restored database using <application>isql</application>
        or your preferred admin tool. If the restored database is good, shut
        down the server. Make a filesystem copy of the old database and then
        copy the restored database file (or files) over their existing
        counterparts.</para>
      </section>

      <section>
        <title><indexterm>
            <primary>Restore</primary>

            <secondary>user logins during restore</secondary>
          </indexterm><indexterm>
            <primary>Databases</primary>

            <secondary>backup and restore</secondary>
          </indexterm>Allowing users to log in during a restore</title>

        <para>If you do not block access to users while performing a restore
        using <literal>gbak -rep[lace_database]</literal> then users may be
        able to log in and attempt to do operations on data. Corrupted
        structures will result.</para>
      </section>
    </section>
  </section>

  <section id="qsg2-gettinghelp">
    <title><indexterm>
        <primary>Help</primary>
      </indexterm><indexterm>
        <primary>Documentation</primary>
      </indexterm>How to get help</title>

    <para>The community of willing helpers around Firebird goes a long way
    back, to many years before the source code for its ancestor, InterBase® 6,
    was made open source. Collectively, the Firebird community does have all
    the answers! It even includes some people who have been involved with it
    since it was a design on a drawing board in a bathroom in Boston.</para>

    <itemizedlist>
      <listitem>
        <para>Visit the official Firebird Project site at <ulink
        url="http://www.firebirdsql.org">http://www.firebirdsql.org</ulink>
        and join the user support lists.</para>
      </listitem>

      <listitem>
        <para>Visit the Firebird knowledge site at <ulink
        url="http://www.ibphoenix.com">http://www.ibphoenix.com</ulink> to
        look up a vast collection of information about developing with and
        using Firebird. IBPhoenix also sells a Developer CD with the Firebird
        binaries and lots of documentation.</para>
      </listitem>

      <listitem>
        <para>See the growing list of documentation that has been produced
        within the Firebird project itself at <ulink
        url="http://www.firebirdsql.org/manual/">http://www.firebirdsql.org/manual/</ulink>.</para>
      </listitem>

      <listitem>
        <para><indexterm>
            <primary>Books</primary>

            <secondary>The Firebird Book</secondary>
          </indexterm><indexterm>
            <primary>Firebird Book</primary>
          </indexterm>Order the official Firebird Book at <ulink
        url="http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;s=1093098777:149734&amp;page=ibp_firebird_book">http://www.ibphoenix.com/main.nfs?a=ibphoenix&amp;s=1093098777:149734&amp;page=ibp_firebird_book</ulink>,
        for more than 1100 pages jam-packed with Firebird information.</para>
      </listitem>

      <listitem>
        <para>As a last resort – since our documentation is still incomplete –
        you can consult the InterBase 6.0 beta manuals (the files whose names
        start with <literal>60</literal> at <ulink
        url="http://www.ibphoenix.com/downloads/">http://www.ibphoenix.com/downloads/</ulink>)
        in combination with the Firebird 1.5 and 2.0 Release Notes.</para>
      </listitem>
    </itemizedlist>

    <note>
      <para>The IBPhoenix publications <citetitle>Using Firebird</citetitle>
      and <citetitle>The Firebird Reference Guide</citetitle>, though still on
      the Developer CD, are no longer actively maintained. However, most of
      the material contained in those documents will be brought up to date and
      added to the official project documentation.</para>
    </note>
  </section>

  <section id="qsg2-firebird-project">
    <title><indexterm scope="local">
        <primary>Project</primary>
      </indexterm><indexterm>
        <primary>Firebird project</primary>
      </indexterm>The Firebird Project</title>

    <para>The developers, designers and testers who gave you Firebird and
    several of the drivers are members of the Firebird open source project at
    SourceForge, that amazing virtual community that is home to thousands of
    open source software teams. The Firebird project's address there is <ulink
    url="http://sourceforge.net/projects/firebird">http://sourceforge.net/projects/firebird</ulink>.
    At that site are the source code tree, the bug tracker and a number of
    technical files which can be downloaded for various purposes related to
    the development and testing of the codebases.</para>

    <para>The Firebird Project developers and testers use an email list forum
    – firebird-devel@lists.sourceforge.net – as their <quote>virtual
    laboratory</quote> for communicating with one another about their work on
    enhancements, bug-fixing and producing new versions of Firebird.</para>

    <para>Anyone who is interested in watching progress can join this forum.
    However, user support questions are a distraction which they do not
    welcome. Please do not try to post your user support questions there!
    These belong in firebird-support@yahoogroups.com.</para>
  </section>

  <appendix id="qsg2-dochist">
    <title><indexterm>
        <primary id="qsg10-it-dochist-p">Document history</primary>
      </indexterm>Document History</title>

    <para>The exact file history is recorded in the <filename
    class="directory">manual</filename> module in our CVS tree; see <ulink
    url="http://sourceforge.net/cvs/?group_id=9028">http://sourceforge.net/cvs/?group_id=9028</ulink></para>

    <para><revhistory>
        <revision>
          <revnumber>0.0</revnumber>

          <date>2002</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Published as Chapter One of <citetitle>Using
            Firebird</citetitle>.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.0</revnumber>

          <date>2003</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Published separately as a free Quick Start Guide.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>1.x</revnumber>

          <date>June 2004</date>

          <authorinitials>IBP</authorinitials>

          <revdescription>
            <para>Donated to Firebird Project by IBPhoenix.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.0</revnumber>

          <date>27 Aug 2004</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Upgraded to Firebird 1.5</para>

            <para>Added Classic vs. Superserver section.</para>

            <para>Reorganised and corrected Disk Locations Table.</para>

            <para>Added (new) screenshots.</para>

            <para>Added section on security.</para>

            <para>Updated and completed information on Control Panel
            applets.</para>

            <para>Added more examples to <quote>Expressions involving
            <constant>NULL</constant></quote>.</para>

            <para>Various other corrections and additions.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1</revnumber>

          <date>20 Feb 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Enhanced GSEC section.</para>

            <para>Added more info to <database>CONNECT</database> and
            <database>CREATE DATABASE</database> sections.</para>

            <para>Added version number and document history.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1.1</revnumber>

          <date>1 Mar 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Changed <literal>gbak r[estore]</literal> to
            <literal>r[eplace]</literal> in two places.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.1.2</revnumber>

          <date>8 Apr 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Reordered Firebird SQL subsections.</para>

            <para>Added links to Firebird Null Guide.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.2</revnumber>

          <date>2 Dec 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Removed "Using the books by IBPhoenix" as it doesn't make
            sense in the QSG.</para>

            <para>Promoted "How to get help" to 1st-level section and removed
            "Where to next" shell.</para>

            <para>Removed link to UFB and RefGuide; added a note instead
            explaining their current status.</para>

            <para>Updated/corrected classic-super comparison table.</para>

            <para>Moved a number of sections on installing, working with
            databases, and (un)safety into newly created top-level
            sections.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>2.2.1</revnumber>

          <date>22 Dec 2005</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Corrected statement on SS thread usage in
            Classic-vs-Superserver table.</para>

            <para>Fixed broken link.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>3.0</revnumber>

          <date>21 May 2006</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Creation of 2.0 Quick Start Guide, still equal to previous
            revision except for some version numbers, XML ids etc.</para>
          </revdescription>
        </revision>

        <revision>
          <revnumber>3.1</revnumber>

          <date>26 July 2006</date>

          <authorinitials>PV</authorinitials>

          <revdescription>
            <para>Updated references to website
            (<literal>firebird.sourceforge.net</literal> -&gt;
            <literal>www.firebirdsql.org</literal>).</para>

            <para>Removed <quote>maturity</quote> and <quote>Service
            Manager</quote> rows from Classic-vs-Super table; these things are
            no longer different in Firebird 2. Also changed the row on local
            connections: CS and SS now both allow safe, reliable local
            connections (even multiple) on Windows.</para>

            <para>Removed notes stating that Classic/Win connections will fail
            without a host name.</para>

            <para>Updated location table and inserted rows for
            documentation.</para>

            <para>Removed <quote>if-you-do-not-find-the-release-notes</quote>
            tip.</para>

            <para>Corrected more version numbers, paths, and stuff.</para>

            <para>Changed gbak -r syntax to -rep and added explanatory
            note.</para>

            <para>Changed <citetitle>Backup</citetitle> section because we now
            also have nbackup.</para>

            <para>Added the <quote>IB6 plus rlsnotes</quote> option to
            <citetitle>How to get help</citetitle>.</para>

            <para>Changed the <quote>an empty database is not empty</quote>
            paragraph.</para>

            <para>Added <database>DISTINCT</database> info to the section on
            <constant>NULL</constant>s.</para>

            <para>...and much more, to be listed later...</para>
          </revdescription>
        </revision>
      </revhistory></para>
  </appendix>

  <appendix id="qsg2-license">
    <title><indexterm>
        <primary>License notice</primary>
      </indexterm>License notice</title>

    <para>The contents of this Documentation are subject to the Public
    Documentation License Version 1.0 (the <quote>License</quote>); you may
    only use this Documentation if you comply with the terms of this License.
    Copies of the License are available at <ulink
    url="http://www.firebirdsql.org/pdfmanual/pdl.pdf">http://www.firebirdsql.org/pdfmanual/pdl.pdf</ulink>
    (PDF) and <ulink
    url="http://www.firebirdsql.org/manual/pdl.html">http://www.firebirdsql.org/manual/pdl.html</ulink>
    (HTML).</para>

    <para>The Original Documentation is titled <citetitle>Firebird Quick Start
    Guide</citetitle>.</para>

    <para>The Initial Writer of the Original Documentation is: IBPhoenix
    Editors.</para>

    <para>Copyright (C) 2002-2004. All Rights Reserved. Initial Writer
    contact: hborrie at ibphoenix dot com.</para>

    <para>Contributor: Paul Vinkenoog - see <link
    linkend="qsg2-dochist">document history</link>.</para>

    <para>Portions created by Paul Vinkenoog are Copyright (C) 2004-2006. All
    Rights Reserved. Contributor contact: paul at vinkenoog dot nl.</para>
  </appendix>

  <index id="qsg2-index">
    <title>Alphabetical index</title>
  </index>
</article>