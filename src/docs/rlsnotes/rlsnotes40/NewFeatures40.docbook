  <chapter id="rnfb40-new">
    <chapterinfo>
      <title>New In Firebird 4.0</title>
    </chapterinfo>

    <section id="rnfb40-new-sumry"><!-- sect 1 -->
      <title>Summary of New Features</title>
      <para>The following lists summarise the planned features and changes, with links to the
      topics covering items available to test in this Beta release.</para>

      <section id="rnfb40-new-complete-in_beta1"><!-- sect 2 -->
        <title>Complete In Beta 1</title>
        <variablelist>
          <varlistentry>
            <term>Support for international time zones</term>
            <listitem>
              <para>International time zone support from Firebird 4.0 onward comprises data 
              types, functions and internal algorithms to manage date/time detection, storage
              and calculations involving international time zones based on UTC (Adriano dos 
              Santos Fernandes).</para>
              <para>For full details, see <link linkend="rnfb40-timezone">Support for
              International Time Zones</link> in the Engine chapter.</para>
             <para>Tracker tickets <ulink url="http://tracker.firebirdsql.org/browse/CORE-694">CORE-694</ulink>
             &amp; <ulink url="http://tracker.firebirdsql.org/browse/CORE-909">CORE-909</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Built-in replication</term><!-- BETA 1 -->
            <listitem>
              <para>Built-in logical (row level) replication, both synchronous and asynchronous
              (Dmitry Yemanov &amp; Roman Simakov)</para>
              <para>For details, see <link linkend="rnfb40-replication">Firebird Replication</link> 
              in the Engine chapter.</para>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-2021">CORE-2021</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>New way to capture the database snapshot</term>
            <listitem>
              <para>Introducing a new methodology for the Firebird engine to capture the 
              snapshots for retaining the consistency of a transaction's view of database 
              state.  The new approach enables read consistency to be maintained for the 
              life of a statement in READ COMMITTED transactions and also allows more 
              optimal garbage collection.</para>
            </listitem>
            <listitem>
              <para>The changes are described in more detail in the chapter 
              <emphasis>Changes in the Firebird Engine</emphasis>
              in the topic <link linkend="rnfb40-engine-trans-commit-order">Commit 
              Order for Capturing the Database Snapshot</link>.</para>
            </listitem>
          </varlistentry>
          
          <varlistentry>
            <term>Pooling of external connections</term><!-- BETA 1 -->
            <listitem>

              <para>The external data source (EDS) subsystem  has been augmented by
              a pool of external connections. The pool retains unused external connections
              for a period to reduce unnecessary overhead from frequent connections and 
              disconnections by clients using the same connection strings (Vlad Khorsun).</para>
              <para>For details, see <link linkend="rnfb40-connection-pool">Pooling of External 
              Connections</link> in the Engine chapter.</para>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-5990">CORE-5990</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Physical standby solution</term>
            <listitem>
              <para>Physical standby solution (incremental restore via nbackup).
              </para>
            </listitem>
            <listitem>
              <para>The changes are described in more detail in the Utilities chapter
              in the topic <link linkend="rnfb40-util-nbackup"><emphasis>nBackup</emphasis>: GUID-based
              Backup and In-Place Merge</link>.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Extended length of metadata identifiers</term>
            <listitem>
              <para>Metadata names longer than 31 bytes: new maximum length of object names is 63 characters.</para>
            </listitem>
            <listitem>
              <para>The changes are described in more detail in the chapter Data Definition Language,
              in the topic <link linkend="rnfb40-ddl-objectnames">Extended Length for Object Names</link>.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Configurable time-outs</term>
            <listitem>
              <para>Timeout periods configurable for statements, transactions and connections.
              </para>
            </listitem>
            <listitem>
              <para>The changes for statements and connections are described in more detail in the chapter
              Changes in the Firebird Engine in the topic <link linkend="rnfb40-engine-timeouts">Timeouts
              at Two levels</link> (Vlad Khorsun).</para>
              <para>Tracker tickets <ulink url="http://tracker.firebirdsql.org/browse/CORE-658">CORE-658</ulink>
              and <ulink url="http://tracker.firebirdsql.org/browse/CORE-985">CORE-985</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Extended precision for numerics</term><!-- BETA 1 -->
            <listitem>
              <para>Fixed point numerics with precision up to 34 digits
              are now supported, along with improved intermediate calculations for 
              shorter numerics. For details, see
              <link linkend="rnfb40-ddl-longer-numerics">Increased Precision for 
              NUMERIC and DECIMAL Types</link> in the Data Definition Language
              chapter.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>New DECFLOAT data type</term>
            <listitem>
              <para>The SQL:2016 standard-compliant high-precision numeric type 
              DECFLOAT is introduced, along with related operational functions.  
              It is described in detail in the the topic <link linkend="rnfb40-ddl-decfloat">Data
              type DECFLOAT</link> in the Data Definition Language chapter.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Enhanced system privileges</term>
            <listitem>
              <para>Predefined system roles, administrative permissions.</para>
            </listitem>
            <listitem>
              <para>The changes are described in more detail in the Security chapter
              in the topic <link linkend="rnfb4-enhancedprivs">Enhanced System Privileges</link>.</para>
              <para>See also the <link linkend="rnfb40-msql">Management Statements</link> chapter for 
              some background about what the new system privileges are intended for.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>GRANT ROLE TO ROLE</term>
            <listitem>
              <para>Granting roles to other roles, described in detail in the Security chapter
              in the topic <link linkend="rnfb4-grant-role-to-role">Granting a Role
              to Another Role</link>.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>User groups</term>
            <listitem>
              <para>User groups and  cumulative permissions are described in detail 
              in the Security chapter in the topic <link linkend="rnfb4-grant-role-to-role">Granting 
              a Role to Another Role</link>.</para>
            </listitem>
          </varlistentry>
          
          <varlistentry><!-- BETA 1 -->
            <term>Batch operations in the API</term>
            <listitem>
              <para>Batch API operations, bulk load optimizations, support for 
              passing BLOBs in-line.</para>
             <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-820">CORE-820</ulink></para>
            </listitem>
            <listitem>For details, see 
            <link linkend="rnfb40-apiods-api-batchops">Support for Batch Insert and Update 
            Operations in the API</link>.
            </listitem>
          </varlistentry>
          
          <varlistentry>
            <term>Window functions extensions</term>
            <listitem>
              <para>Extensions to window functions are described in detail in the Data Manipulation Language
              chapter in the topics
              <link linkend="rnfb40-dml-framed_windows">Frames for Window Functions</link>,
              <link linkend="rnfb40-dml-named_windows">Named Windows</link>
              and <link linkend="rnfb40-dml-windows_newfunctions">More Window Functions</link>.</para>
            </listitem>
          </varlistentry>

          <varlistentry><!-- BETA 1 -->
            <term>FILTER Clause for Aggregate Functions</term>
            <listitem>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-5768">CORE-5768</ulink></para>
              <para>FILTER clause implemented for aggregate functions, see
              <link linkend="rnfb40-dml-filter-clause">FILTER Clause for Aggregate Functions</link>
              in the DML chapter.</para>
            </listitem>
          </varlistentry>
          
          <varlistentry><!-- BETA 1 -->
            <term>Enhanced RETURNING clause in DML to enable returning all current field values</term>
            <listitem>
              <para>Introduces the <code>RETURNING *</code> syntax, and variants, to return a complete
              set of field values after committing a row that has been inserted, updated or deleted
              (Adriano dos Santos Fernandes).  For details,
              see <link linkend="rnfb40-engine-dml-improvement-03">RETURNING * Now Supported</link>
              in the DML chapter.</para>
             <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-3808">CORE-3808</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry><!-- BETA 1 -->
            <term>Built-in functions FIRST_DAY and LAST_DAY</term>
            <listitem>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-5620">CORE-5620</ulink></para>
              <para>New date/time functions FIRST_DAY and LAST_DAY, see
              <link linkend="rnfb40-dml-new-timefuncs">Two New Date/Time Functions</link> in 
              the DML chapter.</para>
            </listitem>
          </varlistentry>
          
          <varlistentry><!-- BETA 1 -->
            <term>Built-in Cryptographic functions</term>
            <listitem>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-5970">CORE-5970</ulink></para>
              <para>New security-related functions, including eight cryptographic ones, see
              <link linkend="rnfb4-builtin-crypto-functions">Built-in Cryptographic Functions</link> 
              in the Security chapter.</para>
            </listitem>
          </varlistentry>
          
          <varlistentry><!-- BETA 1 -->
            <term>Monitoring Compression and Encryption Status of Attachments</term>
            <listitem>
              <para>Compression and encryption status of a connection are now available
              in the monitoring table MON$ATTACHMENTS:
              <itemizedlist>
                <listitem>MON$WIRE_COMPRESSED (wire compression enabled = 1, disabled = 0)</listitem>
                <listitem>MON$WIRE_ENCRYPTED (wire encryption enabled = 1, disabled = 0)</listitem>
              </itemizedlist>
              </para>
              <para>Tracker ticket <ulink url="http://tracker.firebirdsql.org/browse/CORE-5536">CORE-5536</ulink></para>
            </listitem>
          </varlistentry>
          
          <varlistentry>
            <term>Improve performance of <emphasis>gbak restore</emphasis></term>
            <listitem>
              <para>The new Batch API was used to improve the performance of <emphasis>gbak restore</emphasis>, 
              including parallel operations.</para>
             <para>Tracker tickets <ulink url="http://tracker.firebirdsql.org/browse/CORE-2992">CORE-2992</ulink>
             and <ulink url="http://tracker.firebirdsql.org/browse/CORE-5952">CORE-5952</ulink></para>
            </listitem>
          </varlistentry>

          <varlistentry><!-- BETA 1 -->
            <term>Backup and Restore with Encryption</term>
            <listitem>
              <para>Support for backing up and restoring encrypted databases using the
              crypt and keyholder plug-ins&mdash;see <link linkend="rnfb40-util-gbak-crypt">Backup
              and Restore with Encryption</link> in the Utilities chapter.</para>
              <para>Also available is compression and decompression of both encrypted and 
              non-encrypted backups.</para>
            </listitem>
          </varlistentry>

        </variablelist>
      </section> <!-- rnfb40-new-complete-in-beta1 -->

      <section id="rnfb40-new-compat"><!-- sect 2 -->
        <title>Compatibility with Older Versions</title>
        <para>Notes about compatibility with older Firebird versions are collated in
        Chapter 12, <quote><link linkend="rnfb40-compat">Compatibility Issues</link></quote>.</para>
      </section>
    </section>

  </chapter>
