
<chapter id="bugfixes">
<chapterinfo>
  <title>Bugfixes and Additions since Release 1.0</title>
</chapterinfo>
<para>The figure in brackets, e.g. (1.5) indicates the first release or sub-release in which the described
improvement or bug-fix was distributed.</para>

  <section id="bugfixes-improve"><!-- Level 1 section -->
  <title>Improvements</title>

  <variablelist>

<!-- 1.5 -->

    <varlistentry><term><emphasis role="bold">instsvc/instreg executables</emphasis></term>
    <listitem>
      <para><emphasis>By O. Mascia</emphasis></para>
      <para>(1.5) Enhanced Win32 install tools instsvc.exe and instreg.exe</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Increased # of indexes per table</emphasis></term>
    <listitem>
      <para><emphasis>By A. Harrison, ported to 1.5 by N.Samofatov</emphasis></para>
      <para>(1.5) Maximum number of indices per table increased from 64 to (DB_PAGE_SIZE/16)-2</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Better message detail</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov, A. Brinkman, A. Peshkoff</emphasis></para>
      <para>(1.5) Added new (more specific) error messages for some of v1.5 changes.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Security fix on Windows</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) Added -login switch to instsvc allowing FB service to be installed as non-localsystem account.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Varchar trimming over wire</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Re-introduced trimming of VARCHAR fields in the remote protocols.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Configuration improvement</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) Made path management in firebird.conf conform to the OS requirements.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">POSIX Tweak</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Allow easy adjustment of LockSemCount on POSIX platforms, without need to use gds_drop or reboot
      machine to make new setting take effect</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Keyword reduction</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Make FIRST/SKIP keywords non-reserved.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">PSQL Extensions for Loop Breakout</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) BREAK/LEAVE and EXIT statements are now available for usage in triggers.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Mix Aggregate Contexts</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Enabled aggregate functions from different parent context to be used inside another aggregate
      function.</para>
      <para>Example:</para>
      <programlisting>
  SELECT MAX((SELECT COUNT(*) FROM RDB$RELATIONS))
  FROM RDB$RELATIONS
      </programlisting>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">INTL improvement: UPPER()</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov, D. Yemanov</emphasis></para>
      <para>(1.5) Make UPPER function work for WIN1251 charset without explicit collations.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Configuration Manager change</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) Now the server will exit from encountering a missing or wrong firebird.conf by sending an error
      report to the system log.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Parser changes</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Changed parser.-</para>
      <orderedlist>
        <listitem><para>ROWS_AFFECTED is renamed to ROW_COUNT</para></listitem>
        <listitem><para>CONNECTION_ID/TRANSACTION_ID are renamed
        to CURRENT_CONNECTION/CURRENT_TRANSACTION</para></listitem>
        <listitem><para>Some of the newly introduced tokens are made non-reserved</para></listitem>
      </orderedlist>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved lock manager</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Deadlocks are now detected and reported as soon all blocking processes
      received notifications, i.e. instantly in all normal cases.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Advanced security capabilities</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) Implemented configurable access for databases, external tables and UDF libraries.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">SQL Enhancement</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov, N. Samofatov</emphasis></para>
      <para>(1.5) Allow NULLs in unique constraints and indices (SQL-99 spec).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Performance improvement</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) VIO undo log now uses B+ tree to store savepoint record data. It improves performance when doing
      multiple updates of record in a single transaction just a little (usually 2-3 orders of magnitude for
      100000 records).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved EXECUTE STATEMENT</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) Now it's possible to return values from the dynamic SQL using the INTO &lt;variables&gt;
      syntax.</para>
      <para>Syntax:</para>
      <literallayout class="monospaced">
  EXECUTE STATEMENT &lt;value&gt; INTO &lt;var_list&gt;; (singleton form)
      </literallayout>
      <para>or</para>
      <literallayout class="monospaced">
  FOR EXECUTE STATEMENT &lt;value&gt;
    INTO &lt;var_list&gt;
    DO &lt;stmt_list&gt;;
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved optimizer</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Subselects in SET clause of UPDATE now can use indices.</para>
      <para> (1.5)When an equal-node and other nodes (geq, leq, between...) are available for an index retrieval,
      then prefer the equal node.</para>
      <para> (1.5) Better optimizations of &quot;complex&quot; JOIN queries (LEFT JOIN, views, SPs, etc).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Enhanced isc_database_info capability</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) List of currently active transactions is now available via isc_database_info call.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Performance improvement</emphasis></term>
    <listitem>
      <para><emphasis>By Mike Nordell</emphasis></para>
      <para>(1.5) Implemented shortcut boolean evaluation.  Behaviour is controlled by
      &quot;CompleteBooleanEvaluation&quot; option of firebird.conf. Default is 0 (shortcut evaluation).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Performance improvement for IA32 CPU</emphasis></term>
    <listitem>
      <para><emphasis>By Mike Nordell</emphasis></para>
      <para>(1.5) Speed-up for index operations on IA32 CPU architecture.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Generic cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Blas Rodriguez Somoza, Erik Kunze</emphasis></para>
      <para>(1.5) Removed a lot of unused code.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved control when FW=OFF</emphasis></term>
    <listitem>
      <para><emphasis>By Blas Rodriguez Somoza</emphasis></para>
      <para>(1.5) Changed behaviour of the forced writes mode:  now, if FW=off (disabled), you can control how
      often dirty pages are flushed on disk (allows better reliability when FW is disabled on Win32 platforms).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">File Changes</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) The security database has been renamed to security.fdb and this version of Firebird has a new
      configuration file (firebird.conf).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New UDFs</emphasis></term>
    <listitem>
      <para><emphasis>By Juan Guerrero</emphasis></para>
      <para>(1.5) New user-defined functions LPAD and RPAD added to IB_UDF library.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Security connection cache</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Connection to the security database is now cached, thus allowing to decrease time of subsequent
      database attachments.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Performance Improvements</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) 1. Reduce memory usage by the server.</para>
      <para>(1.5) 2. Direct external I/O when the memory is not available for the sorting.</para>
      <para>(1.5) 3. Increased number of streams and predicates supported by the optimizer.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New Character Sets</emphasis></term>
    <listitem>
      <para><emphasis>By Blas Rodriguez Somoza</emphasis></para>
      <para>(1.5) New character sets:  DOS737, DOS775, DOS858, DOS862, DOS864, DOS866, DOS869, WIN1255, WIN1256,
      WIN1257, ISO8859_3, ISO8859_4, ISO8859_5, ISO8859_6, ISO8859_7, ISO8859_8, ISO8859_9, ISO8859_13.  No
      collations are available yet for these charsets.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">CREATE VIEW changes</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Disallowed PLAN subclause.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Changed aggregate tracking behavior</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Introduced backwards compatibility within aggregates.  Deepest field inside aggregate
      determines where an aggregate-context should belong.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New API functions</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) IB7-compliant functions to return version of the client library--isc_get_client_version(),
      isc_get_client_major_version(), isc_get_client_minor_version()</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Sort/merge improvement</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Merging (SORT MERGE plans) is now done via in-memory sorting module.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Performance improvement</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) New memory manager's internals have been changed to give us better performance.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Win32 build changes</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Changes.-</para>
      <orderedlist>
        <listitem><para>Changed names of USER32 objects to allow the server to run simultaneously
        with IB/FB1.</para></listitem>
        <listitem><para>Map name for local (IPC) protocol is changed, so v1.5 client library is no longer
        compatible with the previous versions via IPC.</para></listitem>
        <listitem><para>All transport protocol names (INET port and service, WNET pipe, IPC map) are now
        configurable via firebird.conf.</para></listitem>
      </orderedlist>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Triggers improvement</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Added runtime action checks (INSERTING/UPDATING/DELETING predicates).</para>
      <para>Example</para>
      <literallayout class="monospaced">
        if (INSERTING) then
          new.OPER_TYPE = 'I';
        else
          new.OPER_TYPE = 'U';
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">SELECT Improvement</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Allowed arbitrary expressions in the ORDER BY clause.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Generic code cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff, N. Samofatov</emphasis></para>
      <para>(1.5) Cleaned up structures within Y-valve.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Implemented '--' Comments</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Single-line comments (--) are now allowed in any position of the SQL statement.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FIRST/SKIP and ORDER BY changes</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Changes --</para>
      <orderedlist>
        <listitem><para>Implemented ORDER BY clause in subqueries.</para></listitem>
        <listitem><para>Disallowed FIRST/SKIP for views.</para></listitem>
        <listitem><para>Allowed zero as valid argument for FIRST.</para></listitem>
      </orderedlist>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved optimizer</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Improvement:  let subqueries also use indices when their parent is a stored procedure.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Limitation lifted</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Removed request size limitation.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Nulls first/last</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Nulls first/last options for indexes.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Collations in UNIONs</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Collation handling in &quot;order by&quot; clause of unions.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Generic code cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Erik Kunze, Ignacio J. Ortega, D. Sibiryakov</emphasis></para>
      <para>(1.5) Renamings, new safe macros, support for mingw.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Explicit record locking</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Explicit record locking implementation finalized. Should be stable and consistent now.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved optimizer</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Improvement:  better handling of AND nodes inside an OR node.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved optimizer</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) If a few indices with much different selectivity could be used for index retrieval, only better
      of them are used while others are ignored.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Classic Server for Win32</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) CS architecture is now supported on Win32, but it still cannot be considered stable, so any
      feedback is welcome.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Code Cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Stored procedures are no longer recompiled before deletion.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New WIN1251_UA Collation</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New collation for WIN1251 charset:  WIN1251_UA for both Ukrainian and Russian languages.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Client library change</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) API routines are no longer exported by ordinals.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New configuration manager</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Enable the same plain file based configuration for all supported
      platforms.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved optimizer</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Added better support for using indices with &quot;OR&quot;. Pick the best available compound
      index from all &quot;AND&quot; nodes.</para>
      <para>Added support for detecting use of index with sub-selects in aggregate select.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Explicit Savepoints</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Added support for explicit savepoint management in DSQL.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Protocol cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Sean Leyne</emphasis></para>
      <para>(1.5) IPX/SPX network protocol is no longer supported.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Obsolete platforms cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Sean Leyne</emphasis></para>
      <para>(1.5) Some platform are no longer supported by the current source code. DELTA, IMP, DG_X86, M88K,
      UNIXWARE, Ultrix, NeXT, ALPHA_NT, DGUX, MPE/XL, DecOSF, SGI, HP700, Netware, MSDOS, SUN3_3.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Improved thread scheduler for Win32 SS</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) :  now the server should be more responsive under heavy load.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Explicit Locking</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Added support for explicit locking. Wait behavior in isc_tpb_wait transaction modes is not stable
      yet.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
  SELECT &lt;...&gt;
    [FOR UPDATE [OF col [, col ...]]
    [WITH LOCK]]
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Generic cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Erik Kunze</emphasis></para>
      <para>(1.5) ISC_STATUS_LENGTH and MAXPATHLEN macros.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Empty BEGIN...END blocks</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) PSQL: enabled support for empty BEGIN...END blocks.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 437859</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5)  Implemented execute procedure and string concat, allowing any expression to be used as a
      SP parameter.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 562417</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Aggregate concatenated empty char.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451927</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New ROWS_AFFECTED system variable in PSQL:  return number of rows affected by the last
      INSERT/UPDATE/DELETE statement.  For any other statement than INSERT/UPDATE/DELETE, result is always zero.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 446240</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Dynamic exception messages:  allow to throw an exception with a message different to the one
      the exception was created with.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
    EXCEPTION name [value];
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 547383</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New SQLCODE and GDSCODE system variables providing access to the code of the caught error
      within the WHEN-block in PSQL.  Outside WHEN-block, returns 0 (success).</para>
      <para>Exception re-initiate semantics:  allows an already caught exception in PSQL to be re-thrown from
      the WHEN-block.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
    EXCEPTION;
      </literallayout>
      <para>No effect outside WHEN-block.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New NULL order handling</emphasis></term>
    <listitem>
      <para><emphasis>By N. Samofatov</emphasis></para>
      <para>(1.5) Allow user-defined ordering of NULLs.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New Registry key is used on Win32</emphasis></term>
    <listitem>
      <para>(1.5) <function>SOFTWARE\FirebirdSQL\Firebird</function></para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451925</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) User-defined constraint index names:  allows name of an index enforcing a constraint to be
      either the same as the constraint name or any user-defined name.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">New RECREATE VIEW statement</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New RECREATE VIEW statement, shorthand for DROP VIEW / CREATE VIEW coupling of statements.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
    RECREATE VIEW name &lt;view_definition&gt;;
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold"></emphasis></term>
    <listitem>
      <para><emphasis>By various authors</emphasis></para>
      <para>(1.5) Renamed distribution files to make sure we're Firebird. Now they're fbserver, fbclient,
      firebird.msg etc. The client library is fbclient now and it should be used in all new FB-based projects.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Minor ODS upgrade (ODS 10.1)</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov, N. Samofatov</emphasis></para>
      <para>(1.5) Added new system indices (RDB$INDEX_41, RDB$INDEX_42, RDB$INDEX_43), now ODS version is 10.1.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451935</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New CREATE OR ALTER statement for triggers and stored procedures, allows creating or altering
      a database object according to whether it exists or not.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
  CREATE OR ALTER name &lt;object_definition&gt;;
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Enhanced declaration of local variables in PSQL</emphasis></term>
    <listitem>
      <para><emphasis>By Claudio Valderrama</emphasis></para>
      <para>(1.5) Simplify syntax and allow declaring and defining variable at the same time.</para>
      <para>Syntax</para>
      <literallayout class="monospaced">
  DECLARE [VARIABLE] name &lt;variable_type&gt; [{'=' | DEFAULT} value];
      </literallayout>
      <para>Example</para>
      <literallayout class="monospaced">
  DECLARE my_var INTEGER = 123;
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR ## 555839, 546274</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) Enhanced grouping:  allow to GROUP BY internal functions and subqueries. Also allow to
      GROUP BY ordinal (i.e. column position, a.k.a degree of column in output set).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451917</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) New COALESCE internal function allowing a column value to be calculated by a number of
      expressions, the first expression returning a non NULL value is returned as the column value.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451917</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) New NULLIF internal function returns NULL for a sub-expression if it has a specific value,
      otherwise returns the value of the sub-expression.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451917</emphasis></term>
    <listitem>
      <para><emphasis>By A. Brinkman</emphasis></para>
      <para>(1.5) New CASE internal function allows the result of a column to be determined by a the results of a
      case expression.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Readline</emphasis></term>
    <listitem>
      <para><emphasis>By M. O'Donohue</emphasis></para>
      <para>(1.5) Command history retrieval (like Unix <function>readline</function>) added to ISQL.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 446206</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New BIGINT datatype allowing native SQL usage of 64-bit exact numerics (Dialect 3 only).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 451922</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Universal triggers allowing one trigger to be fired for a number of action types.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR ## 446238, 446243</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) New CONNECTION_ID and TRANSACTION_ID system available in PSQL.  Return appropriate internal
      identifier stored on the database header page.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 446180</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) Server-side database aliases:  attach to any database using an &quot;alias&quot; name instead
      of its physical pathname.  The list of known database aliases is stored in aliases.conf file under the
      server installation root.</para>
      <para>Example</para>
      <para>Alias entry in the configuration file:</para>
      <literallayout class="monospaced">
    my_database = c:\dbs\my\database.gdb
      </literallayout>
      <para>Connection string in application:</para>
      <literallayout class="monospaced">
    localhost:my_database
      </literallayout>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Plugin Manager</emphasis></term>
    <listitem>
      <para><emphasis>By John Bellardo</emphasis></para>
      <para>(1.5) New plugin manager and INTL interface.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">In-memory sorting</emphasis></term>
    <listitem>
      <para><emphasis>By D. Yemanov</emphasis></para>
      <para>(1.5) If SORT plan is used for a SQL statement, the sorting is done in memory.  If there's not
      enough memory for this operation, reverts to old method using temporary file.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">FR # 446256</emphasis></term>
    <listitem>
      <para><emphasis>By A. Peshkoff</emphasis></para>
      <para>(1.5) New EXECUTE STATEMENT PSQL extension statement allows execution of dynamic SQL statements
      in SPs/triggers.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Cleanup</emphasis></term>
    <listitem>
      <para><emphasis>By Sean Leyne, Erik Kunze</emphasis></para>
      <para>(1.5) Major code cleanup.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Memory Optimisation</emphasis></term>
    <listitem>
      <para><emphasis>By John Bellardo</emphasis></para>
      <para>(1.5) New memory manager.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Exception handling</emphasis></term>
    <listitem>
      <para><emphasis>By Mike Nordell, John Bellardo</emphasis></para>
      <para>(1.5) New exception handling logic.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">autoconf build</emphasis></term>
    <listitem>
      <para><emphasis>By John Bellardo, M. O'Donohue, Erik Kunze</emphasis></para>
      <para>(1.5) New autoconf-based build configuration.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Codebase Conversion</emphasis></term>
    <listitem>
      <para><emphasis>By </emphasis></para>
      <para>(1.5) The code port from C to C++.</para>
    </listitem></varlistentry>
  </variablelist>
  </section>
  
  <section id="rlsnotes156-bugfixes155" xreflabel="Release 1.5.5 Bugs Fixed in v.1.5.6"><!-- L 1 -->
    <title>Release 1.5, 1.5.1, 1.5.2, 1.5.3, 1.5.4 and 1.5.5 Bugs Fixed in v.1.5.6</title>
    <variablelist>
      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2563">CORE-2563</ulink></term>
        <listitem>
          <para><emphasis>fixed by D. Yemanov</emphasis></para>
          <para>It was possible to shut down the Superserver's main port (3050 by default) by sending a 
          malformed packet of some special format, that would lead to a Denial of Service condition for new 
          incoming connections. This exploit could be used by an unauthenticated client.</para>
          <para>Reported 15-Jul-2009 by Core Security Technologies.</para>
        </listitem>
      </varlistentry>

        <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2368">CORE-2368</ulink></term>
        <listitem>
          <para><emphasis>fixed by V. Khorsun</emphasis></para>
          <para>An isc_cancel_events() call would be succeeded by an access violation if the event was 
          not found.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2282">CORE-2282</ulink></term>
        <listitem>
          <para><emphasis>fixed by C. Valderrama</emphasis></para>
          <para><emphasis>*truncate</emphasis> UDFs were broken for numbers smaller than -1.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2281">CORE-2281</ulink></term>
        <listitem>
          <para><emphasis>fixed by C. Valderrama</emphasis></para>
          <para><emphasis>*round</emphasis> UDFs were broken for negative numbers.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2271">CORE-2271</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>The <emphasis>gfix</emphasis> utility had a legacy bug that exhibited itself during the 
          database validation/repair routines on large databases. The privilege level of the user running 
          these routines was being checked too late in the operation, thus allowing a non-privileged user 
          (i.e., not SYSDBA or Owner) to start a validation operation.  Once the privilege check occurred, 
          the database validation could halt in mid-operation and thus be left unfinished, resulting in 
          logical corruption that might not have been there otherwise.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2223">CORE-2223</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>gbak was encountering several bugs when operating on the access control lists (ACLs) that 
          store SQL privileges.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-2055">CORE-2055</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>Backported a fix for a known buffer overflow in the Firebird client library.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1972">CORE-1972</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>A non-SYSDBA user was able to change the Forced Writes mode of any database, along 
          with several other database characteristics that should be restricted to the SYSDBA. 
          This long-standing, legacy loophole in the handling of DPB parameters could lead to database 
          corruptions or give ordinary users access to SYSDBA-only operations.  The changes could 
          affect several existing applications, database tools and connectivity layers (drivers, 
          components).</para>
          <para>For details, see the <link linkend="intro-editions-this-dpb">This Edition</link> notes 
          in the <emphasis>Introduction</emphasis>.</para>
        </listitem>
      </varlistentry>
      
      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1957">CORE-1957</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>Because of a change done in the conversion to C++ at v.1.5.0, ACLs (Access Control Lists)
          longer than about 20 characters were being truncated.  This has caused particular problems 
          for applications that construct access privileges in run-time and has also given rise to 
          privileges <quote>going missing</quote> when there are more than about 2000 privileges (for a 
          report of the latter, see 
          <ulink url="http://tracker.firebirdsql.org/browse/CORE-216">Tracker issue CORE-216)</ulink>.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1830">CORE-1830</ulink></term>
        <listitem>
          <para><emphasis>fixed by V. Khorsun</emphasis></para>
          <para>Index corruption was possible when multiple updates of the same record were performed in 
          the same transaction with savepoints in use.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1810">CORE-1810</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>There was an issue with user names containing the '.' character.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1681">CORE-1681</ulink></term>
        <listitem>
          <para><emphasis>fixed by D. Yemanov</emphasis></para>
          <para>Garbage data in the incoming remote packet could crash the server.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1603">CORE-1603</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov</emphasis></para>
          <para>A long user name was a potential source of buffer overflow.</para>
        </listitem>
      </varlistentry>
      
      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1011">CORE-1011</ulink></term>
        <listitem>
          <para><emphasis>fixed by A. Peshkov, D. Yemanov</emphasis></para>
          <para>The server would crash if an application tried to connect to it via an InterBase version 
          of gds32.dll.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-538">CORE-538</ulink></term>
        <listitem>
          <para><emphasis>fixed by N. Samofatov, A. Peshkov</emphasis></para>
          <para>Superserver could crash under load.</para>
        </listitem>
      </varlistentry>

    </variablelist>
  </section>

  <section id="rlsnotes155-bugfixes154" xreflabel="Release 1.5.4 Bugs Fixed in v.1.5.5"><!-- L 1 -->
  <title>Release 1.5, 1.5.1, 1.5.2, 1.5.3 and 1.5.4 Bugs Fixed in v.1.5.5</title>
  <variablelist>
     <varlistentry>
      <term>Bugs <ulink url="http://tracker.firebirdsql.org/browse/CORE-1061">CORE-1061</ulink> and
      <ulink url="http://tracker.firebirdsql.org/browse/CORE-1109">CORE-1109</ulink>
      </term>
      <listitem>
        <para><emphasis>fixed by P. Reeves</emphasis></para>
        <para>Partial fix for Windows Vista platform, whereby the Explorer crashes when the Firebird 1.5 control
        panel applet is installed. This crash does NOT occur with Firebird 2.n, but backporting the changes did not work.
        The installer now disables installation of the 1.5 applet if Vista is detected as the host operating 
        system.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1076">CORE-1076</ulink></term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>Services Manager and gsec would truncate First/Middle/Last Name fields to 17 characters instead of the 31
        characters defined for the field definitions.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Unregistered bug</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>Supplying an empty Database Parameter Block (DPB) or Services Parameter Block (SPB) would crash the server.
        </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-nnnn">CORE-921</ulink></term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff, C. Valderrama</emphasis></para>
        <para>A number of <ulink url="http://www.risesecurity.org/advisory/RISE-2007003">vulnerabilities</ulink> found 
        and reported by RISE Security were closed.</para>
        <para>Fixes back-ported from Firebird 2.0.3</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1470">CORE-1470</ulink></term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>Supplying a name of more than 127 characters for a secondary file would cause the server to crash.</para>
        <para>Fix back-ported from Firebird 2.0.3</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug <ulink url="http://tracker.firebirdsql.org/browse/CORE-1447">CORE-1447</ulink></term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>Querying for database info on a very long path through an API call to isc_database_info() could cause a 
        buffer overrun.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Unregistered bug</term>
      <listitem>
        <para><emphasis>fixed by P. Beach</emphasis></para>
        <para>QLI could cause a crash when processing the following statement:</para>
        <literallayout>

      insert into relationx select * from relationy
        </literallayout>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Unregistered bug</term>
      <listitem>
        <para><emphasis>fixed by P. Beach</emphasis></para>
        <para>An alignment issue could cause a core dump on HPUX when using SQL Dialect 1 and the following 
        statement:</para>
        <literallayout>

      select distinct(1.0/1) from rdb$database
        </literallayout>
      </listitem>
    </varlistentry>

  </variablelist>
  </section>


  <section id="rlsnotes154-bugfixes153" xreflabel="Release 1.5.3 Bugs Fixed in v.1.5.4"><!-- L 1 -->
  <title>Release 1.5, 1.5.1, 1.5.2 and 1.5.3 Bugs Fixed in v.1.5.4</title>
  <variablelist>
     <varlistentry>
      <term>Bug CORE-921</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>A bug was causing a core dump in stored procedures using EXECUTE STATEMENT.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

  </variablelist>
  </section>
  <!-- Regressions fixed in 1.5.3 -->
  <section id="rlsnotes153-bugfixes152" xreflabel="Release 1.5.2 Bugs Fixed in v.1.5.3"><!-- L 1 -->
  <title>Release 1.5, 1.5.1 and 1.5.2 Bugs Fixed in v.1.5.3</title>

  </section>
    <variablelist>

    <varlistentry>
      <term>Bug # 1242982</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>Compound index key mangling exhibited a bug.  Now fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>Unnecessary evaluation was being performed on the last argument of the COALESCE function.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug  # 1016969</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>Using search parameters in a SUM() operation would return incorrect results</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug  # 1016969</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>UPDATE with a CASE expression involving parameters would throw an SQLCode -804 exception (&quot;Data
        type unknown&quot;).</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>COALESCE/CASE displayed a bug regarding BLOB sub-type.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>The wrong error was being detected when a write failure occurred. (v.1.5 Regression.) Fix was
        back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 1106825</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>An access violation could occur in fcblient.dll v1.5.2 on disconnecting. (v.1.5.2 Regression.)  Fix
        back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>Generators were being initialized with garbage values on restoring from a metadata-only backup.
        (v.1.5.1 regression.)  Fix backported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>User savepoints were not being released when commit retaining was issued. Fix back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>Back-ported some isql fixes from Firebird 2 HEAD:</para>
        <orderedlist>
          <listitem><para>Another fix for the -b (Bail On Error) option when SQL commands are issued and no
          database connection yet existed.</para></listitem>
          <listitem><para>Applied Miroslav Penchev's patch for a bug discovered by Ivan Prenosil, where the -Q
          switch would always return 1 to the operating system.</para></listitem>
          <listitem><para>Fixed a conflict between single-line and block comments.</para></listitem>
        </orderedlist>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>If a table contained a computed column of BLOB or ARRAY type, the first column of the table could
        be zeroed during a restore. Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama, D. Yemanov</emphasis></para>
        <para>The server would lock up if a request to attach to security.fdb was unsuccessful. (v.1.5 regression.)
        Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>The fbudf function <function>AddMonth()</function> exhibited wrong behaviour when facing January. Fix
        back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 1124720</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>The <function> FOR EXECUTE STATEMENT ... DO SUSPEND </function> construct in PSQL was exhibiting
        problems.  Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by N. Samofatov</emphasis></para>
        <para>Bugchecks were being exhibited on AMD64 (and possibly other platforms) when a database was copied,
        rather than migrated using backup/restore. Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>There were issues with descending indices used in referential constraints. Fix back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 1242982</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>An equality search on the first segment of a compound index, if it was an integer type, would
        result in redundant additional scans on specific values (2^n, e.g. 131072). Fix back-ported from Firebird
        2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>Comparisons between strings in character set NONE and another character set would cause an error.
        (V. 1.5.2 regression.)</para>
      </listitem>
    </varlistentry>

    </variablelist>

  <!-- Regressions fixed in 1.5.2 -->
  <section id="rlsnotes152-bugfixes151" xreflabel="Release 1.5.1 Bugs Fixed in v.1.5.2"><!-- L 1 -->
  <title>Release 1.5 and 1.5.1 Bugs Fixed in v.1.5.2</title>

  <variablelist>
    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>When a SEGV error (or other asyncronous exception) is thrown from a badly written UDF, the server
        should log its name. This feature was broken in FB 1.5. Restored in v.1.5.2</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun, N. Samofatov</emphasis></para>
        <para>In v.1.5.0, exit(3) was called on critical errors on Windows, precluding the use of the JIT debugger 
        to analyse problems in UDF routines. A fix in v.1.5.1 caused the debugger to be called always, introducing 
        a problem with automatic restarts of the server.</para>
        <para>V.1.5.2 now calls the debugger only if you set the <firstterm>BugcheckAbort</firstterm> 
        configuration file option to 1. The main goal of the v1.5.2 fix is to avoid Dr.Watson showing its 
        close-or-debug message box.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>Support for multi-dimensional array fields was broken v1.5.1.  Restored in v.1.5.2</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun, N. Samofatov</emphasis></para>
        <para>Plans for selectable stored procedures containing multiple FOR loops were being reported in
        reverse order, compared with v.1.5.0. Restored in v.1.5.2</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Brinkman</emphasis></para>
        <para>In v.1.5.1, a bug in the optimiser caused unnecessary fetches in joined relations when &quot;OR&quot;
        was used on the base relation.  Now fixed</para>
      </listitem>
    </varlistentry>

        <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by N. Samofatov</emphasis></para>
        <para>There was a problem with deadlock detection when pessimistic locking (WITH LOCK syntax) was 
        used.</para>
        <literallayout class="monospaced">
  create table test (id integer);
  insert into test values(1);
  insert into test values(2);
  Commit;
          </literallayout>
          <para>Transaction 1 (READ COMMITTED, WAIT):</para>
        <literallayout class="monospaced">
  select * from test
    where id = 1 with lock;
          </literallayout>
          <para>Transaction 2 (READ COMMITTED, WAIT):</para>
        <literallayout class="monospaced">
  select * from test
    where id = 2 with lock;
  select * from test
    where id = 1 with lock;
          </literallayout>
          <para>Transaction 1:</para>
        <literallayout class="monospaced">
  select * from test
    where id = 2 with lock;
        </literallayout>
        <para>This set of conditions would result in a permanent deadlock.  V.1.5.2 detects and reports such a
        deadlock as an error.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>The server would crash when NULL was passed to EXECUTE STATEMENT ... INTO. For example,</para>
        <literallayout class="monospaced">
  ...
  VAR = NULL;
  EXECUTE STATEMENT :VAR;
  ...
        </literallayout>
        <para>caused the server to die. Now fixed</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by H. Borrie, D. Yemanov</emphasis></para>
        <para>Documentation for Windows Embedded Server, README.user.embedded in the /doc subdir of the Windows
        installation, section 2.2 &quot;Database Access&quot; was &quot;corrected&quot; wrongly in v.1.5.1. This
        section was unclear in v.1.5.0. In v.1.5.1 it was plain wrong. It is now correct.</para>
      </listitem>
    </varlistentry>
  </variablelist>
  </section><!-- L 2 -->

  <!-- Regressions fixed in 1.5.1 -->
  <section id="rlsnotes151-bugfixes15" xreflabel="Release 1.5 Bugs Fixed in v.1.5.1"><!-- L 1 -->
  <title>Release 1.5 Bugs Fixed in v.1.5.1</title>
  <variablelist>
    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Alex Peshkoff</emphasis></para>
        <para>(1.5.1) Modification of /etc/init.d/firebird during Linux installation now works properly.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 750659</term>
      <listitem>
        <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
        <para>(1.5.1) The wrong soname for libib_util.so caused warnings in ldconfig and also meant that it could not be
        loaded automatically by external function libraries using calls to ib_util_malloc().  That made such
        libraries unusable, unless a PRELOAD environment setting was added for fbserver/fb_inet_server.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
        <para>(1.5.1) Memory corruptions in the embedded DSQL API implementation were corrected.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Arno Brinkman</emphasis></para>
        <para>(1.5.1) The following two optimizer bugs were fixed:</para>
        <orderedlist>
          <listitem><para>IS NULL is now handled correctly when a view is used in an outer join.</para></listitem>
          <listitem><para>MERGE is used instead of JOIN when indices are not applicable for a join.</para></listitem>
        </orderedlist>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Dmitry Sibiryakov</emphasis></para>
        <para>(1.5.1) 'Extract' bug in ISQL was fixed:  previously, procedure parameters would be extracted incorrectly.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Arno Brinkman</emphasis></para>
        <para>(1.5.1) Mapping of COUNT(*) in a HAVING clause when used with IN, ANY/SOME, ALL has been corrected.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 918653</term>
      <listitem>
        <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
        <para>(1.5.1) NULLS FIRST ordering parameter now works in union queries ().</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
        <para>(1.5.1) The algorithm for dependency tracking that was introduced into gbak in v.1.5, made restoring a
        database with many interdependent procedures too slow.  It has been replaced by a faster algorithm.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Alex Peshkoff</emphasis></para>
        <para>(1.5.1) Fixed a memory leak in EXECUTE STATEMENT...INTO.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
        <para>(1.5.1) A fresh implementation of the editline facility in isql was done to resolve a problem with isql
        crashing on some platforms.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Paul Reeves</emphasis></para>
        <para>(1.5.1) A serious memory leak was fixed in the Windows control panel applet. If the applet window was left
        open for several hours it would eventually trigger a low memory condition on the server.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Paul Reeves</emphasis></para>
        <para>(1.5.1) Switching the server status via the control panel applet from certain configurations would lead to
        inconsistencies on Win XP and Win 2003.  There were timing issues that were only apparent on these
        platforms.  The problem was fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Alex Peshkoff</emphasis></para>
        <para>(1.5.1) On Windows, server startup was failing to look for the FIREBIRD environment variable when trying to
        locate the root directory.  Fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by Helen Borrie</emphasis></para>
        <para>(1.5.1) DOC for Embedded Server (README_embedded.txt) was updated slightly to reduce confusion about the
        client connection string format.</para>
      </listitem>
    </varlistentry>
  </variablelist>
  </section>

  <!-- b u g s -->

  <section id="bugfixes-bugfix" xreflabel="Old Bugs Fixed"><!-- Level 1 section -->
  <title>Old Bugs Fixed</title>
  <para>The following list consists of bugfixes that have been done since the release of Firebird 1.0.</para>
  <para>&quot;SF&quot; bug items refer to the old Firebird bugtracker on SourceForge. &quot;QC&quot; bugs refer to
  the InterBase section of the bug tracker on Borland's Quality Central;  <quote>CORE-nnn</quote> bugs refer to 
  the more recent Tracker 
  (<ulink url="http://tracker.firebirdsql.org">http://tracker.firebirdsql.org</ulink>).</para>

  <variablelist>
<!-- 1.5.4 -->
    <varlistentry>
      <term>CORE-1042</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.4) Transaction numbers could overflow the 32-bit signed integer and corrupt the
        database.</para>
        <para>Fix back-ported from Firebird 2.0.1.</para>
      </listitem>
    </varlistentry>
    
    <varlistentry>
      <term>Bug CORE-1051</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.4) Possible stack corruption in the deferred work handler.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>   

    <varlistentry>
      <term>Bug CORE-966</term>
      <listitem>
        <para><emphasis>fixed by P. Beach, D. Yemanov</emphasis></para>
        <para>Socket binding for events exhibited a bug where 10048 network errors were being reported in the log
        when clients attempted to bind to events.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bugs CORE-157, CORE-363</term>
      <listitem>
        <para><emphasis>fixed by P. Beach, A. Peshkoff</emphasis></para>
        <para>(1.5.4) In previous versions of Superserver, if the server could not establish a socket
        for events, e.g. a firewall prevented the event port from being opened at the server side, the
        server would hang when a client attempted to register for an event.  Connected clients would
        stop responding and new connections would be blocked.</para>
        <para>Now, under these conditions, the client will hang until the socket call times out (by
        default, 10 seconds) and then the server will respond to the <emphasis>isc_que_events()</emphasis>
        call by throwing the exception <emphasis>isc_net_event_connect_err</emphasis>, <quote>Failed to
        establish a secondary connection for event processing</quote> and will continue to serve user
        requests normally.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug CORE-911</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.4) Access violations (segfaults) could occur in the Classic server when clients woke up after
        leaving read committed read-only transaction active but idle for long periods.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by P. Beach, D. Sibiryakov </emphasis></para>
        <para>(1.5.4) When the buffer overflowed in isql, the error was not detected.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

        <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by P. Beach, D. Sibiryakov </emphasis></para>
        <para>(1.5.4) Isql had some problems handling quoted strings.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>(1.5.4) On Windows, GSTAT would print <quote>unknown Windows NT error</quote> instead of
        a proper Win32 error message.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug CORE-973</term>
      <listitem>
        <para><emphasis>fixed by A. Harrison </emphasis></para>
        <para>(1.5.4) A condition was causing BUGCHECK(183) when attempting to back out a record version
        after a crash.</para>
        <para>Fix back-ported from Firebird 2.0.</para>
      </listitem>
    </varlistentry>


<!-- 1.5.3 -->
    <varlistentry>
      <term>Bug # 1175157</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.3) An error in the thread scheduler would cause the server to lock up if an I/O error occurred
        at database attachment.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>The isc_user_* (add/modify/delete) functions worked wrongly under Administrator account on
        Win32.</para>
        <para>(1.5.3) At some point during InterBase development, the intention was to make the Win32 implementation work
        so that Superuser privileges on Unix were emulated for Administrator on Win32 (SuperUser/root on Unix/Linux
        can log into the security database without entering any username and password). It worked, up to a
        point.</para>
        <para>However, if the Win32 Administrator user tried to call these functions through a SYSDBA login,
        the connection would hang with some strange path resolution errors.</para>
        <para>The code for a root-style login has been disabled in the Win32 clients (fbclient.dll and fbembed.dll).
        Now any Windows user, including Administrator, must supply the SYSDBA user name and password.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>(1.5.3) Denial-of-Service vulnerability: an extra-long database file name could crash the server. Endemic
        security bug.  One of many overflow vulnerabilities fixed in the Firebird 2 code, this fix has been
        backported to v.1.5.3.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>(1.5.3) The server would crash during some DDL operations.  Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>(1.5.3) In some cases, a BLOB filter declaration would cause the server to crash. Fix back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug  # 739480</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkov</emphasis></para>
        <para>(1.5.3) A locally exploitable stack overflow vulnerability was detected and fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.3) The server could crash while performing a metadata scan for a complex table. Fix back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.3) Database corruption could occur due to allowing certain pre-trigger actions, such as deleting a
        record in a BEFORE UPDATE trigger. Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.3) CPU load would rise to 100% when a write failure occurred. Fix back-ported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 1076858</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.3) A source of possible corruption was exhibiting in the Classic server as a page type exception
        &quot;page 0 is of wrong type (expected 6, found 1)&quot;.  Identified, fixed and back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.3) When the gfix service code tried to reattach to a database that had become unavailable, the server
        would crash. An endless loop would occur due to the inability of the service to interact with the end user,
        causing the service buffer to overflow eventually and result in the crash. Fixed and back-ported from
        Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.3) Character set and/or collation specified for local variables in PSQL would get lost, potentially
        causing string conversion errors.  Fix backported from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.3) If any DDL operations were active during a database shutdown, the server would crash. Fix back-ported
        from Firebird 2 HEAD.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 1110717</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.3) Subqueries in in VIEWs were returning character data with the wrong character set.  Fix back-ported
        from Firebird 2 HEAD. </para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>(1.5.3) There was an issue with quoted identifiers in the ISQL command SHOW GENERATORS in Dialect 3.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Harrison</emphasis></para>
        <para>(1.5.3) No more than 32767 identifiers were being generated by GPRE.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>(1.5.3) Wrong permissions were installed for the QLI help database.</para>
      </listitem>
    </varlistentry>

<!-- 1.5.2 -->
    <varlistentry>
      <term>Bug # 1045970</term>
      <listitem>
        <para><emphasis>fixed by D.Yemanov</emphasis></para>
        <para>(1.5.2) An old legacy bug that has continued to bug us is that, when a client had some events registered
        and its network connection had been terminated abnormally (hardware failure, reset button or task manager),
        then the server would start using 100% of the CPU time until the &quot;parent&quot; port (client
        connection which called <function>isc_que_events()</function> API routine) reported on its failure.</para>
        <para>This bug affected all FB versions (more or less, depending on the
        <firstterm>DummyPacketInterval</firstterm> configuration option) and only TCP/IP connections.</para>
        <para>Further work has been done to rectify the problem in v.1.5.2.  It now appears to be solved.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 544132</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>(1.5.2) UDF with NULL input parameter, problem fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Bug # 728839</term>
      <listitem>
        <para><emphasis>fixed by C. Valderrama</emphasis></para>
        <para>(1.5.2) Left join would defeat a UDF by mangling a null descriptor. Fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.2) Error trying to delete from a naturally updatable view containing computed expressions. If you had
        a view like this:</para>
        <literallayout class="monospaced">
  create view v_test (f, s)
  as
    select f1, f2 + f3
    from t
        </literallayout>
        <para>then the server returned the &quot;attempted update of read-only column&quot; error when you
        tried to perform a DELETE operation. This is fixed in FB 1.5.2 and above.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Peshkoff</emphasis></para>
        <para>(1.5.2) Numeric data types represented by floating-point variables were being processed incorrectly in
        an EXECUTE STATEMENT with dialect 1 databases--numerics were being scaled incorrectly:</para>
        <literallayout class="monospaced">
  create table a (b numeric(18,3));
  commit;
  insert into a values(12345.678);
  commit;
  set term ^;
  create procedure c
    returns(d numeric(18,3))
  as
  begin
    for execute statement 'select b from a'
    into :d
    do suspend;
  end ^
  commit^
  set term ;^
  select * from c;
        </literallayout>
        <para>returned 12.346 instead of 12345.678.  Now fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>If DISTINCT was used in an aggregate function and the record set being processed (aggregated) was
        empty, then we had a small memory leak. This memory was not returned until disconnect.</para>

        <para>This routine would eat 120MB on FB 1.5.1 and previous:</para>
        <literallayout class="monospaced">
  CREATE PROCEDURE MEM_LEAK
  AS
    DECLARE I INT = 1000;
    DECLARE T INT;
    DECLARE C INT;
  BEGIN
    WHILE (I > 0) DO
    BEGIN
      SELECT RDB$INDEX_TYPE,
      COUNT(DISTINCT RDB$RELATION_NAME)
      FROM RDB$INDICES
        WHERE 0=1
      GROUP BY 1
      INTO :T, :C;

      I = I - 1;
    END
  END
        </literallayout>
        <para>It is fixed in v.1.5.2.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.2) The server leaked resources when an exception was thrown from a selectable stored procedure. The
        procedural request wasn't freed properly and caused errors like &quot;too many concurrent executions of
        the same request&quot; after 750-1000 iterations.</para>
        <literallayout class="monospaced">
  CREATE PROCEDURE P (INP INTEGER)
  RETURNS (OUTP INTEGER)
  AS
  BEGIN
    OUTP = INP / 0;
    SUSPEND;
  END

  UPDATE T SET ID = 1
    WHERE (SELECT OUTP FROM P(1)) = 1
        </literallayout>
        <para>The leaking request blocks were returned on disconnect. Now fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by P. Reeves</emphasis></para>
        <para>(1.5.2) The server log was polluted with SIGPIPE errors when running SuperServer on UNIX. The legacy
        InterBase code was logging sigpipe errors for SS running on *nix. Unfortunately sigpipe errors come in
        their thousands (when they come at all) with the result that the log filled up rather quickly. In extreme
        cases this led to filling up the entire partition.</para>
        <para>Logging of SIGPIPE errors has thus been disabled.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.2) 100% CPU usage was exhibited by the cache_writer thread in some rare cases (reported by Adrianos
        dos Santos Fernandes).</para>
        <para>To reproduce in v.1.5.1 or lower, open two command prompts.</para>
        <para><emphasis>Prompt 1:</emphasis></para>

        <literallayout class="monospaced">
    isql
    CREATE DATABASE 'test.fdb';
    CREATE TABLE T (N INTEGER);
    EXIT;

    gbak -B test.fdb test.fbk
    del test.fdb
    gbak -C test.fbk test.fdb
        </literallayout>
        <para><emphasis>Prompt 2:</emphasis></para>
        <literallayout class="monospaced">
    gbak -B test.fdb test.fbk
        </literallayout>
        <para>The server would consume 99% of CPU until the isql prompt 2 was disconnected. The bug didn't occur
        when passing <function>-GARBAGE_COLLECT</function> in the last command.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by A. Karyakin, D. Yemanov</emphasis></para>
        <para>(1.5.2) A possible source of server crash was discovered in the <function>op_connect</function> handler.
        When a TCP/IP packet lacking user information was received on the server port, the server could crash.
        Because it was the first packet (op_connect) in the client-server protocol, it exposed the server to any
        kind of DoS attack. Anyone could kill the server with just one TCP packet. Now fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by D. Yemanov</emphasis></para>
        <para>(1.5.2) The server could crash with complex queries where lots of streams were used in a sort/merge. A
        complex union with many aggregations and merge joins could crash the server because of a streams buffer
        overflow. Although the current limit is 255 streams per request, the temporary buffer could accommodate
        only 128 items. Now fixed</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by C. Waters, D. Yemanov</emphasis></para>
        <para>(1.5.2) The server was blocking when events were used with Network Access Transaction (NAT) gateways.
        Auxiliary connections (for events) were established by the client library using the server-reported
        TCP/IP address. But the address returned by the server may be incorrect if it is behind a NAT box.</para>
        <para>The fix was to use the address that was used to connect the main socket, not the address reported by
        the server.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.2) Sweeper would not release its lock when database shutdown was executed. A server crash could occur
        when a database shutdown was initiated while the sweep is being in progress.  Now fixed.</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by V. Horsun</emphasis></para>
        <para>(1.5.2) The least significant bits of a floating-point value would be lost when rounding the value to an
        integer or int64 value.</para>

        <para>Dialect 3 database:</para>
        <literallayout class="monospaced">
SELECT CAST(CAST( 1.005E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.015E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.025E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.035E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.045E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.055E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.065E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.075E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.085E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
UNION ALL
SELECT CAST(CAST( 1.095E0 AS NUMERIC(15,2))
  AS VARCHAR(30)) FROM RDB$DATABASE
        </literallayout>

        <para>FB 1.5.1 returns</para>
        <literallayout class="monospaced">
F_1
----
1.00
1.01
1.03
1.04
1.05
1.05
1.06
1.08
1.09
1.10
        </literallayout>
        <para>The problem is fixed. FB 1.5.2 returns</para>
        <literallayout class="monospaced">
F_1
----
1.01
1.02
1.03
1.04
1.05
1.06
1.07
1.08
1.09
1.10
        </literallayout>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Not registered</term>
      <listitem>
        <para><emphasis>fixed by N. Samofatov</emphasis></para>
        <para>(1.5.2) A few memory access problems were detected when testing HEAD under Valgrind. Fixed in HEAD and
        back-ported to v.1.5.2</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>64-bit build issues</term>
      <listitem>
        <para><emphasis>Experimental 64-bit builds by N. Samofatov</emphasis></para>
        <para>(1.5.2) 64-bit SuperServer builds on platforms such as Linux/AMD64/NPTL, which use the high-order bits of a
        64-bit thread ID, were exhibiting run-time errors.</para>
        <para>CURRENT_TIMESTAMP was yielding unpredictable results on 64-bit platforms.</para>
        <warning>
          <para>The v.1.5.2 64-bit builds were subsequently withdrawn, due to database corruptions caused by
          data alignment bugs and possibly others.</para>
        </warning>
      </listitem>
    </varlistentry>

<!-- 1.5.1 -->
      <varlistentry>
        <term>Events bug</term>
        <listitem>
          <para><emphasis>fixed by Dmitry Yemanov</emphasis></para>
          <para>(1.5.1) Fixed a persistent issue with events, where a client using events would cause the server's CPU
          usage to go up to 100 percent when it terminated its connection. The problem existed in all Firebird
          versions, but became more acute in v. 1.5 because it has the default dummy packet interval at 0 and
          relies instead on TCP/IP keepalive packets.</para>
          <para>Now, the client library tries to wake up the server's port when detaching, allowing the server to
          scan for broken connections and close them sooner.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Not registered</term>
        <listitem>
          <para><emphasis>fixed by Vladimir Tsvigun</emphasis></para>
          <para>(1.5.1) Fixed a bug in the QLI utility, whereby assigning a variable would generate an access violation.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>gbak bug (1)</term>
        <listitem>
          <para><emphasis>fixed by Claudio Valderrama</emphasis></para>
          <para>(1.5.1) The -n[o_validity], that should make gbak restore a database without restoring validity
          constraints, was ignoring NOT NULL constraints and restoring them regardless.  Now it works as it
          ought to.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>gbak bug (2) SF # 750659</term>
        <listitem>
          <para><emphasis>fixed by Claudio Valderrama</emphasis></para>
          <para>(1.5.1) When a fresh database needs to be created by metadata-backup/restore, the user-defined generators
          should be set to zero.  However, during a metadata-only backup, gbak would preserve the values of all
          generators, including non-system ones. Now, they are correctly reset.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Not registered</term>
        <listitem>
          <para><emphasis>fixed by Arno Brinkman</emphasis></para>
          <para>(1.5.1) Corrected a bug that prevented proper restoration of inter-dependent views.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Memory problems (1)</term>
        <listitem>
          <para><emphasis>fixed by Dmitry Yemanov</emphasis></para>
          <para>(1.5.1) A memory leak in the Services API.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Memory problems (2)</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) A memory leak in isc_database_info().</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Memory problems (3) QC # 7496</term>
        <listitem>
          <para><emphasis>fixed by Oleg Loa</emphasis></para>
          <para>(1.5.1) Memory leaks occurred in PSQL modules when aggregation errors were handled in a WHEN block.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Memory problems (4) SF # 919246</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) A stability problem with usage of previously freed memory in the client library was found and
          eliminated.  It was present in InterBase and earlier Firebird versions but it re-surfaced in
          Firebird 1.5, due to the memory manager actively returning memory to the system. When using TCP/IP
          with Windows clients, application programs would hang because of an access violation in fbclient.dll,
          or fbclient.dll itself would hang. In some cases, further connections to the same database would be
          rejected.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Generator bugs (1)</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) Attempting to update a generator in a read-only database would cause database detach to be
          prolonged and such a situation would leave the database locked to other connections.  Fixed the broken
          CCH finalization sequence and a page lock leak.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Generator bugs (2)</term>
        <listitem>
          <para><emphasis>fixed by Oleg Loa, Vlad Horsun, Dmitry Yemanov</emphasis></para>
          <para>(1.5.1) Generator pages were not flushed properly, causing generator value changes to be lost after a
          server failure, even in Forced Writes mode</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Old tracking logic bug fixed, SF ## 627057, 922602</term>
        <listitem>
          <para><emphasis>fixed by ?</emphasis></para>
          <para>(1.5.1) A nested query that contained a variable in the WHERE clause would be erroneously flagged as
          invariant (), e.g.</para>
          <literallayout class="monospaced">
  select max(d2.id) from demo d2
    where d2.id &lt; :id
          </literallayout>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Not registered</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) Request cloning logic was broken. Clones of procedures/triggers were not accounting for invariants
          and the requests opened by them at all.  Thus, they were inheriting invariant values from previous
          executions and were not freeing resources (highly limited! - you can have only 1000 copies of a request
          open). This is why most recursive procedures didn't work at all and using procedures from multiple
          Superserver connections produced results that were inconsistent or timing-dependent.</para>

          <para>Invariant dependency tracking was not working properly.  The engine now keeps account of which
          variables an invariant depends on and clears the cached invariant value when values are being assigned
          to these variables.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Win32 lock manager bugs</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) A number of problems with the win32 lock manager, that manifested themselves as low performance
          when several operations were waiting on locks simultaneously, were solved.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>SF bug # 784121</term>
        <listitem>
          <para><emphasis>fixed by Claudio Valderrama</emphasis></para>
          <para>(1.5.1) Expression evaluation was not supported in LEFT JOIN.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Not registered</term>
        <listitem>
          <para><emphasis>fixed by Dmitry Yemanov</emphasis></para>
          <para>(1.5.1) Server would crash when views and selectable procedures were intermixed.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Not registered</term>
        <listitem>
          <para><emphasis>fixed by Nickolay Samofatov</emphasis></para>
          <para>(1.5.1) Fixed an obscure bug where the server would crash if LIKE ESCAPE &lt;symbol&gt; was asked to
          operate on NULL.  LIKE syntax is:</para>
          <literallayout class="monospaced">
  &lt;string&gt; LIKE &lt;string&gt; [ESCAPE &lt;one-char-string&gt;]
          </literallayout>
          <para>A request such as</para>
          <literallayout class="monospaced">
  select * from rdb$database
    where 'a' like 'a' escape cast(null as char(1))
          </literallayout>
          <para>would crash the engine.  It now complies with the SQL standard and returns an empty result set
          from such a query.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>UDF bugs</term>
        <listitem>
          <para><emphasis>fixed by Fred Polizo Jr</emphasis></para>
          <para>(1.5.1) Length of string types containing binary data (OCTETS) was being determined incorrectly in UDFs.</para>
        </listitem>
      </varlistentry>

<!-- 1.5 -->

    <varlistentry><term><emphasis role="bold">Unregistered bugs</emphasis></term>
    <listitem>
      <para><emphasis>fixed by P. Jacobi</emphasis></para>
      <para>(1.5) Fixed minor inconsistencies in charsets naming.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) GSTAT crashed in some switch combinations.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Fixed broken savepoint handling in BREAK|LEAVE/EXIT.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Fixed optimizer to prefer single indices to composite ones and to prefer full-match unique
      indices.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 721792</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Long runnning connection caused mem leak in OS kernel device</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 775003</emphasis></term>
    <listitem>
      <para><emphasis>fixed by P. Vinkenoog, N. Samofatov</emphasis></para>
      <para>(1.5) UDF log(x, y) in fact returned log(y, x)</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 774987</emphasis></term>
    <listitem>
      <para><emphasis>fixed by P. Vinkenoog, N. Samofatov</emphasis></para>
      <para>(1.5) UDFs ltrim('') and rtrim('') returned NULL; rtrim forgot first char</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Fixed server crash caused by lost transaction context.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Fixed server crash caused by any combination of a subquery and BETWEEN.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 736318</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) &quot;&lt;value&gt; STARTING WITH &lt;field&gt;&quot; would fail when using indices.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold"></emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Non-existent deadlock is raised after execution of pre-(update/delete) triggers.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Preparing some big queries could crash the server randomly.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Oleg Loa</emphasis></para>
      <para>(1.5) UDF arguments of types DATE/TIME were wrong in dialect 3.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Vlad Horsun, D. Yemanov</emphasis></para>
      <para>(1.5) Possible referential integrity violation.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 745090 &amp; other beta installation issues</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Erik S. LaBianca, N. Samofatov</emphasis></para>
      <para>(1.5) Permissions problem for firebird.conf.  Also generate aliases.conf on install;  use rpmbuild to
      create Linux packages</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Wrong attachment reference after exception in PSQL.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Vlad Horsun, D. Yemanov</emphasis></para>
      <para>(1.5) Potential index corruptions during garbage collection.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Solved problems with temporary files management:</para>
      <orderedlist>
      <listitem><para>Security hole on all POSIX platforms except FREEBSD/OPENBSD related to mktemp usage
      (possible DoS attacks or privileges elevation)</para></listitem>
      <listitem><para>Only 27 unique filenames generated on win32 (which could cause unpredictable behavior in
      SS builds)</para></listitem>
      </orderedlist>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug/Event Manager change</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Disabled usage of specifically-configured auxiliary port in CS builds due to known issues.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Potential crashes on disconnect when event notification was used.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Fixed Services API</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Enabled statistics Services API for POSIX CS builds.</para>
      <note>
        <orderedlist>
          <listitem><para>Appropriate changes in Win32 CS are not ready yet</para></listitem>
          <listitem><para>Backup/restore service was fixed, tested and should work</para></listitem>
          <listitem><para>Database validation was partially fixed and may work</para></listitem>
          <listitem><para>Other services are probably non-functional in CS builds yet</para></listitem>
        </orderedlist>
      </note>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Fixed Services API</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Partly enabled Services API for win32 CS builds.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Service Manager changes: Win32 Classic</emphasis></term>
    <listitem>
      <para><emphasis>Change done by D. Yemanov</emphasis></para>
      <para>(1.5) Features of GSTAT/GSEC are not available via Services API in win32 CS (until a later
      sub-release).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Wrong record statistics were reported when an operation failed for some reason.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) stdin/stdout could not be used to redirect console I/O in the Win32 build of GBAK.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Lock table resizing in CS was broken. No more &quot;lock manager out of room&quot; or crashes
      (possible in all previous CS builds of Interbase/Firebird).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 625899</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) BUGCHECK(291): Possible database corruption when you modified/deleted the same record in 
      pre-trigger for which this trigger was called.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Oleg Loa</emphasis></para>
      <para>(1.5) Buffer overrun in isc_database_info() call.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Jim Starkey, Paul Reeves</emphasis></para>
      <para>(1.5) Wrong type of event delivery (unnecessary usage of OOB packets).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Server would crash in some Services API operations.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bugs</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Mike Nordell, A. Peshkoff, N. Samofatov, D. Yemanov</emphasis></para>
      <para>(1.5) Fixed resource/memory leaks.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Buffer overrun with multidimensional arrays.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 213460, # 678718</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Various issues with events used on multihomed hosts.</para>
      <note><para>Now it's also possible to setup a definite port for event processing.</para></note>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bugs</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Mike Nordell, A. Peshkoff</emphasis></para>
      <para>(1.5) Fixed some resource leaks.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Potential for database corruption when backing out the savepoint after large number of DML
      operations (so transaction-level savepoint is dropped) and record was updated <emphasis>not</emphasis> under
      the savepoint and the deleted under the savepoint.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Server would hang during disconnect after mass updates.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) &quot;Context already in use&quot; error was exhibited in the case of DISTINCT
      with subqueries.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Long delays during connecting/disconnecting on WinXP.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 523589</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) View was affecting the result of a query.  Comment:  Problem was that RSE's (inside a view)
      were not flagged as variant.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Sometimes GFIX didn't allow to specify &quot;-user&quot; and &quot;-password&quot; switches
      (&quot;incompatible swiches&quot; error).</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 508594</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) LEFT JOIN with VIEWs:  simple LEFT JOIN on a VIEW with only an ON clause didn't use an index
      even if it was possible.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Trashed RDB$FIELD_LENGTH for views that contain concatenation of long CHAR/VARCHAR fields.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Cursors (WHERE CURRENT OF clause) could not be used in triggers.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 221921</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Case reported where ORDER BY had no effect.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 213859</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Bug case where subquery was used in connection with IN() clause.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Engine crashed when UNIONS were used in a VIEW and that VIEW was used in the WHERE clause
      inside a subquery.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) &quot;Request sycnhronization error&quot; with BREAK statement.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 521952</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) No current record for fetch operation.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) QLI didn't understand BIGINT datatype.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Brinkman</emphasis></para>
      <para>(1.5) Length of text variables inside procs/triggers wasn't copied to descriptor structure.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Erik Kunze</emphasis></para>
      <para>(1.5) Buffer overflow (MAXPATHLEN) and rewritten local function dirname.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Old but unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Make SQLDA parameter mapping consistent with order and number of parameters in source SQL
      string.</para>
      <note>
        <para>You can enable older mapping behavior (for backward compatibility)
        using the &quot;OldParameterOrdering&quot; configuration manager parameter.</para>
      </note>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Exceptions inside for/while loops in triggers were not handled correctly.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 623992</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Paul Reeves, Mark O'Donohue</emphasis></para>
      <para>(1.5) Double forward slash in connection string gave problems.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Deadlock occurred unexpectedly during some database operations.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Quoted identifiers problem in plan expressions.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 558364</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Ignacio J. Ortega</emphasis></para>
      <para>(1.5) Triggers fail to compile if PLAN used.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Vlad Horsun, Erik Kunze</emphasis></para>
      <para>(1.5) Distributed (2PC) transaction could not be properly rolled back due to network errors.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 496784</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) When the optimizer finds indexes for LEFT JOIN, they work like INNER JOIN.  Fixed problem which
      caused complex outer joins to produce wrong results.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) BLOB subtype was ignored in system domains generated for expression fields in views.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Fixed a Windows installation bug:  instreg.exe wasn't creating the &quot;GuardianOptions&quot;
      registry value.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Resource leaks in DDL recursive procedure handling which caused some DDL to fail.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) CHECK constraint which uses only one table field is now dropped automatically when this field
      is dropped.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) The server could crash during garbage collection under heavy load.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Kuzmenko</emphasis></para>
      <para>(1.5) gstat showed wrong value for maxdup element.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Trigger whose name starts with 'RDB$' can not be altered or dropped at all.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Broken dependencies (like DB$34) would appear in the database after metadata changes.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) Disabled BREAK statement for triggers (like EXIT) due to known internal limitations.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 545725</emphasis></term>
    <listitem>
      <para><emphasis>fixed by A. Peshkoff</emphasis></para>
      <para>(1.5) Automatic/background sweep could hang.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by D. Yemanov</emphasis></para>
      <para>(1.5) The server would crash when XSQLDA structures were not prepared for all statement parameters.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 567931</emphasis></term>
    <listitem>
      <para><emphasis>Partly fixed by D. Yemanov</emphasis></para>
      <para>(1.5) A metadata security hole.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unregistered bug</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Artem Petkevych</emphasis></para>
      <para>(1.5) BigInt arrays didn't work.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Bug # 538201</emphasis></term>
    <listitem>
      <para><emphasis>fixed by Claudio Valderrama</emphasis></para>
      <para>(1.5) Crash with extract from null as date.</para>
    </listitem></varlistentry>

    <varlistentry><term><emphasis role="bold">Unspecific</emphasis></term>
    <listitem>
      <para><emphasis>fixed by N. Samofatov</emphasis></para>
      <para>(1.5) Deferred metadata compilation:  solved a lot of causes of the well-known
      &quot;object in use&quot; error.</para>
    </listitem></varlistentry>
  </variablelist>
  </section>

  <section id="rlsnotes151-known-issues" xreflabel="Known Issues"><!-- L 1 -->
  <title>Known Issues</title>
  <para>The following outstanding issues were known at sub-release 1.5.1.</para>

  <variablelist>
  <!-- Added at release 1.5.4 -->
    <varlistentry>
      <term>Never-Implemented gbak Feature</term>
      <listitem>
        <para><emphasis>Note added at v.1.5.4 release:</emphasis></para>
        <para>In the v.1.0 release notes, a new, optional numeric argument for gbak's -v[erbose] switch was
        announced, supposedly to track commands as a restore proceeded.  This feature was withdrawn during
        Firebird 1.0 beta development due to regression effects and never appeared in any Firebird release.</para>
      </listitem>
    </varlistentry>
  <!-- Added at release 1.5.1 -->
    <varlistentry>
      <term>Issue with SQL Plans</term>
      <listitem>
        <para>PLANs for selectable procedures having multiple FOR loops are reported in the wrong order. </para>
        <para><emphasis>Example (from QMDB test):</emphasis></para>

        <literallayout class="monospaced">
  create procedure proc1
  returns (a integer)
  as
  begin
    for select a from table1 into :a do
      suspend;
    for select b from table2 into :a do
      suspend;
  end ^^
  ...
  select * from proc1^^
        </literallayout>
        <para>1.5.1 produces the PLAN:</para>
        <literallayout class="monospaced">
PLAN (TABLE2 NATURAL) (TABLE1 NATURAL)
        </literallayout>
        <para>instead of</para>
        <literallayout class="monospaced">
PLAN (TABLE1 NATURAL) (TABLE2 NATURAL)
        </literallayout>
      </listitem>
      <listitem>
        <para><emphasis role="bold">UPDATE :: This issue was fixed in release v.1.5.2.</emphasis></para>
      </listitem>
    </varlistentry>

  </variablelist>
  </section><!-- L 1 -->


</chapter>