<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"../../../../../tools/docbook-dtd/docbookx.dtd">
<appendix id="fblangref25-appx05-montables-de">
  <title>Monitoring Tables</title>
  <para>Firebird überwacht Aktivitäten innerhalb der Datenbank und macht diese 
      für Benutzerabfragen über die Monitoringtabellen verfügbar. Die Definitionen 
      dieser Tabellen sind immer in der Datenbank verfügbar, alle mit dem Präfix MON$.
      Die Tabelle sind virtuell: &nbsp;die Daten werden erst bei der Abfrage durch den
      Benutzer bereitgestellt. Dies ist auch der Grund, weshalb es keinen Sinn macht, Trigger
      hierfür zu erstellen!</para>
  <para>Der Schlüssel zum Verstehen des Überwachungsmechanismus ist ein <emphasis>activity snapshot</emphasis>.
  Dieser Snapshot gibt den derzeitigen Status der Datenbank zu Beginn der Transaktion wieder, in welcher 
  die Abfrage der Monitoringtabellen ausgeführt wird. Es werden einige Informationen über die Datenbank selbst,
  aktive Verbindungen, Benutzer, vorbereitete Transaktionen, laufende Abfragen und mehr zurückgegeben.</para>
  <para>Der Snapshot wird erstellt, sobald die Monitoringtabelle das erste Mal abgefragt wird. Er wird
  bis zum Ende der aktuellen Transaktion vorgehalten. Damit wird eine stabile, konsistente Ansicht zum
  Abfragen über mehrere Tabelle gewährleistet. Das heißt, Monitoringtabellen verhalten sich immer als seien
  sie in <database>SNAPSHOT TABLE STABILITY</database>-Isolation (<quote>Konsistenz</quote>), auch wenn die
  derzeitige Transaktion in einem niedrigeren Isolationslevel gestartet wird.</para>
  <para>Um den Snapshot zu aktualisieren, muss die aktuelle Transaktion abgeschlossen werden und die 
      Monitoringtabellen müssen in einem neuen Transaktionskontext erneut ausgeführt werden.</para>
  <para><emphasis role="bold">Zugriffssicherheit</emphasis>
    <itemizedlist spacing="compact">
      <listitem>SYSDBA und der Datenbankbesitzer habe Vollzugriff auf alle Informationen, die über die Monitoringtabellen
          verfügbar sind</listitem>
      <listitem>Reguläre Benutzer können nur Informationen zu ihren eigenen Verbindungen einsehen; andere Verbindungen sind
          nicht sichtbar</listitem>
    </itemizedlist>
  </para>
  <warning>
    <para>In stark belasteten Umgebungen kann das Sammeln von Informationen über die Monitoringtabellen einen negativen
        Einfluss auf die Systemleistung haben.</para>
  </warning>
  <table id="fblangref25-appx05-tbl-montables-de">
  <?dbfo keep-together='auto'?>
    <title>Liste der Monitoringtabellen</title>
    <tgroup cols="2">
      <colspec colname="colTable" colwidth="2*"></colspec>
      <colspec colname="colDesc" colwidth="3*"></colspec>
      <thead>
        <row valign="middle">
          <entry align="center">Systemtabelle</entry>
          <entry align="center">Inhalte</entry>
        </row>
      </thead>
      <tbody>
        <row valign="middle">
          <entry align="left"><database>MON$ATTACHMENTS</database></entry>
          <entry align="left">Informationen über aktive Datenbankattachments</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$CALL_STACK</database></entry>
          <entry align="left">Stackaufrufe von aktiven Abfragen durch Stored Procedures und Trigger</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$CONTEXT_VARIABLES</database></entry>
          <entry align="left">Informationen zu benutzerdefinierten Kontextvariablen</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$DATABASE</database></entry>
          <entry align="left">Informationen über die Datenbank, welche durch die CURRENT_CONNECTION verbunden
              ist</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$IO_STATS</database></entry>
          <entry align="left">Input/Output-Statistiken</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$MEMORY_USAGE</database></entry>
          <entry align="left">Statistiken über den Speicherverbrauch</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$RECORD_STATS</database></entry>
          <entry align="left">Record-Level-Statistiken</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$STATEMENTS</database></entry>
          <entry align="left">Zur Ausführung vorbereitete Statements</entry>
        </row>
        <row valign="middle">
          <entry align="left"><database>MON$TRANSACTIONS</database></entry>
          <entry align="left">Gestartete Transaktionen</entry>
        </row>
      </tbody>
    </tgroup>
  </table>

  <section id="fblangref-appx05-monattach-de">
    <title>MON$ATTACHMENTS</title>
    <para>MON$ATTACHMENTS zeigt Informationen über aktive Attachments der Datenbank an.</para>
    <informaltable id="fblangref25-appx05-tbl-monattach-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Verbindungs-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SERVER_PID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Serverprozess-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Verbindungsstatus:
              <simplelist type="horiz" columns="1">
                <member>0 - Leerlauf (idle)</member>
                <member>1 - Aktiv (active)</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_NAME</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Connection String&mdash;der Dateiname und volle Pfad zur primären
            Datenbankdatei</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$USER</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">Der Name des Benutzers, der mit diese Verbindung nutzt</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ROLE</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">Der angegebene Rollenname zum Zeitpunkt des Verbindungsaufbaus.
                Wurde beim Aufbau der Verbindung keine Rolle angegeben, enthält das Feld den Text NONE
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PROTOCOL</database></entry>
            <entry align="center"><database>VARCHAR(10)</database></entry>
            <entry align="left">Name des Remote-Protokolls</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_ADDRESS</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Remote-Adresse (Adresse und Servername)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Kennung des Client-Prozesses</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CHARACTER_SET_ID</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Kennung des Zeichensatzes (vgl. RDB$CHARACTER_SET
            in der Systemtabelle RDB$TYPES)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">Datum und Zeit zum Zeitpunkt des Verbindungsaufbaus.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$GARBAGE_COLLECTION</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Kennzeichen für Garbage Collection (wie in der Attachment DPB definiert): 
            1=erlaubt (allowed), 0=nicht erlaubt (not allowed)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$REMOTE_PROCESS</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Der volle Dateiname und Pfad zu der ausführbaren Datei, die diese
                Verbindung aufgebaut hat</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <section id="fblangref-appx05-monattach-kill-de">
      <title>Verwendung von MON$ATTACHMENTS um eine Verbindung zu beenden</title>
      <para>Monitoringtabellen sind nur-lesend. Jedoch hat der Server einen eingebauten Mechanismus,
          um Datensätze zu löschen (und nur zum Löschen) in der Tabelle MON$ATTACHMENTS, wodurch es möglich wird,
            Datenbankverbindungen zu beenden.
        <note>
          <title>Hinweis</title>
          <itemizedlist>
            <listitem>Sämtliche Aktivitäten der beendeten Verbindung werden augenblicklich gestoppt und alle 
                aktiven Transaktionen werden zurückgerollt</listitem>
            <listitem>Die beendete Verbindung gibt einen Fehler mit dem Code
            <function>isc_att_shutdown</function> zurück</listitem>
            <listitem>Versuche diese Verbindung weiterzuverwenden, wird ebenfalls Fehler zurückgeben.</listitem>
          </itemizedlist>
        </note>
      </para>
      <formalpara>
        <title>Beispiel</title>
        <para>&nbsp;Alle Verbindungen außer der eigenen (current) beenden:
          <blockquote><programlisting>
  DELETE FROM MON$ATTACHMENTS
    WHERE MON$ATTACHMENT_ID &lt;&gt; CURRENT_CONNECTION
          </programlisting></blockquote>
        </para>
      </formalpara>
    </section> <!-- kill a connection -->
  </section> <!-- MON$ATTACHMENTS -->

  <section id="fblangref-appx05-moncallstk-de">
    <title>MON$CALL_STACK</title>
    <para>MON$CALL_STACK zeigt Aufrufe des Stacks durch Abfragen von Stored Procedures und 
        Trigger an.</para>
    <informaltable id="fblangref25-appx05-tbl-moncallstk-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$CALL_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Aufruf-Kennzeichen</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATEMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Das Kennzeichen des Top-Level-SQL-Statements. Dies ist das Statement,
                das die Kette der Aufrufe initialisiert hat. Nutzen Sie diese Kennung um die aktiven
                Statments in der MON$STATEMENTS-Tabelle zu finden.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CALLER_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Die Kennung der aufrufenden Stored Procedure oder des aufrufenden Triggers</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OBJECT_NAME</database></entry>
            <entry align="center"><database>CHAR(31)</database></entry>
            <entry align="left">PSQL-Objekt-Name (Module)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OBJECT_TYPE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">PSQL-Objekt-Typ (Trigger oder Stored Procedure):
              <simplelist type="horiz" columns="1">
                <member>2 - Trigger</member>
                <member>5 - Stored Procedure</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">Datum und Zeitpunkt des Aufrufs</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SOURCE_LINE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Die Zeilennummer im SQL-Statement, welches 
                zum Zeitpunkt des Snapshots gestartet wurde</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SOURCE_COLUMN</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Die Spaltennummer im SQL-Statement, welches 
                zum Zeitpunkt des Snapshots gestartet wurde</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <formalpara>
      <title><database>EXECUTE STATEMENT</database>-Aufrufe</title>
      <para>Informationen über Aufrufe, die mittels EXECUTE STATEMENT ausgeführt wurden,
          erscheinen nicht im Aufruf-Stack.</para>
    </formalpara>
    <formalpara>
      <title>Beispiel zur Verwendung von MON$CALL_STACK</title>
      <para>&nbsp;Ermitteln des Aufruf-Stack für alle Verbindungen außer der eigenen:
        <blockquote><programlisting>
WITH RECURSIVE
  HEAD AS (
    SELECT
      CALL.MON$STATEMENT_ID, CALL.MON$CALL_ID,
      CALL.MON$OBJECT_NAME, CALL.MON$OBJECT_TYPE
    FROM MON$CALL_STACK CALL
    WHERE CALL.MON$CALLER_ID IS NULL
    UNION ALL
    SELECT
      CALL.MON$STATEMENT_ID, CALL.MON$CALL_ID,
      CALL.MON$OBJECT_NAME, CALL.MON$OBJECT_TYPE
    FROM MON$CALL_STACK CALL
      JOIN HEAD ON CALL.MON$CALLER_ID = HEAD.MON$CALL_ID
  )
SELECT MON$ATTACHMENT_ID, MON$OBJECT_NAME, MON$OBJECT_TYPE
FROM HEAD
  JOIN MON$STATEMENTS STMT ON STMT.MON$STATEMENT_ID = HEAD.MON$STATEMENT_ID
WHERE STMT.MON$ATTACHMENT_ID &lt;&gt; CURRENT_CONNECTION
        </programlisting></blockquote>
      </para>
    </formalpara>
  </section> <!-- MON$CALL_STACK -->

  <section id="fblangref-appx05-contxtvars-de">
    <title>MON$CONTEXT_VARIABLES</title>
    <para>MON$CONTEXT_VARIABLES zeigt Infos über benutzerdefinierte Kontextvariablen an.</para>
    <informaltable id="fblangref25-appx05-tbl-contxtvars" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Verbindungskennung. Gültiger Wert nur für Variablen auf Verbindungsebene.
            Für Transaktionsebenen ist der Variablenwert NULL.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaktionskennung. Gültiger Wert nur auf Transaktionsebene.
                Für Verbindungsebenen ist der Variablenwert NULL.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$VARIABLE_NAME</database></entry>
            <entry align="center"><database>VARCHAR(80)</database></entry>
            <entry align="left">Name der Kontextvariable</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$VARIABLE_VALUE	</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Wert der Kontextvariable</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$CONTEXT_VARIABLES -->

  <section id="fblangref-appx05-mondb-de">
    <title>MON$DATABASE</title>
    <para>MON$DATABASE zeigt Header-Daten der Datenbank an, mit der der aktuelle Benutzer
        verbunden ist.</para>
    <informaltable id="fblangref25-appx05-tbl-mondb-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$DATABASE_NAME</database></entry>
            <entry align="center"><database>VARCHAR(255)</database></entry>
            <entry align="left">Name und voller Pfad der primären Datenbankdatei oder der
                Datenbank-Alias.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_SIZE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Datenbank Seitengröße in Bytes.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ODS_MAJOR</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Haupt-ODS-Version, z.B. 11</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ODS_MINOR</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Unter-ODS-Version, z.B. 11</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Nummer der ältesten (relevanten) Transaktion (oldest [interesting] transaction (OIT))</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_ACTIVE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Nummer der ältesten aktiven Transaktion (oldest active transaction (OAT))</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_SNAPSHOT</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Nummer der Transaktion, die zum Zeitpunkt der OAT aktiv war - älteste 
                Snapshot Transaktion (oldest snapshot transaction (OST))</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$NEXT_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Nummer der nächsten Transaktion zum Zeitpunkt als der Monitoring-Snapshot 
                erstellt wurde</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_BUFFERS</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Die Anzahl der Seiten, die im Speicher für den Datenbank Seiten-Cache (page cache)
                zugewiesen wurden</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SQL_DIALECT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">SQL-Dialekt der Datenbank: 1 oder 3</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SHUTDOWN_MODE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Der derzeitige Shutdown-Status der Datenbank:
              <simplelist type="horiz" columns="1">
                <member>0 - Die Datenbank ist online</member>
                <member>1 - Multi-User Shutdown</member>
                <member>2 - Single-User Shutdown</member>
                <member>3 - Kompletter Shutdown</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SWEEP_INTERVAL</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Sweep-Intervall</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$READ_ONLY</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Dieses Kennzeichen gibt an, ob die Datenbank im Modus read-only (Wert 1)
            oder read-write (Wert 0) arbeitet.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$FORCED_WRITES</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Gibt an, ob der Schreibmodus der Datenbank auf 
            synchrones Schreiben (forced writes ON, Wert ist 1) oder asynchrones Schreiben
            (forced writes OFF, Wert ist 0) gestellt ist</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RESERVE_SPACE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Gibt an, ob reserve_space (Wert 1) oder
            use_all_space (Wert 0) zum Füllen der Datenbankseiten verwendet wird.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$CREATION_DATE</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">Datum und Zeit zu der die Datenbank erstellt oder wiederhergestellt wurde.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der zugewiesenen Seiten der Datenbank auf einem externen Gerät</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$BACKUP_STATE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Derzeitiger physikalischer Backup-Status (nBackup):
              <simplelist type="horiz" columns="1">
                <member>0 - normal</member>
                <member>1 - stalled</member>
                <member>2 - merge</member>
              </simplelist>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$DATABASE -->

  <section id="fblangref-appx05-iostats-de">
    <title>MON$IO_STATS</title>
    <para>MON$IO_STATS zeigt Input/Output-Statistiken an. Die Zähler arbeiten kumulativ,
        gruppiert für jede Statistikgruppe.</para>
    <informaltable id="fblangref25-appx05-tbl-iostats-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistik-Gruppe:
              <simplelist type="horiz" columns="1">
                <member>0 - Datenbank</member>
                <member>1 - Verbindung</member>
                <member>2 - Transaktion</member>
                <member>3 - Statement</member>
                <member>4 - Aufruf (Call)</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der gelesenen Datenbankseiten</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_WRITES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der geschriebenen Datenbankseiten</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_FETCHES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der geholten (fetched) Datenbankseiten</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$PAGE_MARKS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der markierten Datenbankseiten</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$IO_STATS -->

  <section id="fblangref-appx05-memusage-de">
    <title>MON$MEMORY_USAGE</title>
    <para>MON$MEMORY_USAGE zeigt Statistiken zu Speichernutzung an.</para>
    <informaltable id="fblangref25-appx05-tbl-memusage-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistik-Gruppen:
              <simplelist type="horiz" columns="1">
                <member>0 - Datenbank</member>
                <member>1 - Verbindung</member>
                <member>2 - Transaktion</member>
                <member>3 - Statement</member>
                <member>4 - Aufruf (Call)</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MEMORY_USED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Die Größe des genutzten Speichers in Bytes. 
            Diese Daten beziehen sich auf die höchste Speicherzuteilung, die vom Server abgerufen wird. 
            Dies ist nützlich, um Speicherlecks und exzessiven Speicherverbrauch in Verbindungen, Prozeduren,
                etc. zu ermitteln.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MEMORY_ALLOCATED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Die Größe des Speichers, der durch das Betriebssystem zugeteilt wurde. Angabe in Bytes.
                Diese Daten beziehen sich auf die Low-Level-Zuweisung von Speicher, die durch den Firebird
                Speicher-Manager abgerufen wird&mdash;die Größe des Speichers zugewiesen durch das Betriebssystem&mdash;
                womit Sie die physikalischen Speicherbedarf steuern können.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MAX_MEMORY_USED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Der größte Speicherverbrauch für dieses Objekt in Bytes. </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$MAX_MEMORY_ALLOCATED</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Die größte Speicherreservierung für dieses Objekt durch das Betriebssystem in Bytes.</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <note>
      <para>Nicht alle Datensätze dieser Tabelle haben nicht-null-Werte. MON$DATABASE und Objekte in Beziehung
          auf Speicherzuweisungen haben nicht-null-Werte. Kleinere Speicherzuordnungen werden hier nicht angeführt, 
          sondern dem Datenbankspeicherpool zugewiesen.</para>
    </note>
  </section> <!-- MON$MEMORY_USAGE -->

  <section id="fblangref-appx05-recstats-de">
    <title>MON$RECORD_STATS</title>
    <para>MON$RECORD_STATS zeigt Datensatz-Level-Statistiken an. Die Zähler arbeiten kumulativ,
        gruppiert für jede Statistikgruppe.</para>
    <informaltable id="fblangref25-appx05-tbl-recstats-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_GROUP</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statistik-Gruppen:
              <simplelist type="horiz" columns="1">
                <member>0 - Datenbank</member>
                <member>1 - Verbindung</member>
                <member>2 - Transaktion</member>
                <member>3 - Statement</member>
                <member>4 - Aufruf (Call)</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_SEQ_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der sequenziell gelesenen Datensätze</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_IDX_READS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der mittels Index gelesenen Datensätze</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_INSERTS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der eingefügten Datensätze</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_UPDATES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der aktualisierten Datensätze</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_DELETES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der gelöschten Datensätze</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_BACKOUTS</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der Datensätze für die eine neue primäre Datensatzversion
                während eines Rollbacks oder Savepoint-Undo erstellt wurde.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_PURGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der Datensätze für die die Versionskette 
                nicht länger von der OAT (oldest active transaction) oder jüngeren Transaktionen benötigt wird.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$RECORD_EXPUNGES</database></entry>
            <entry align="center"><database>BIGINT</database></entry>
            <entry align="left">Anzahl der Datensätze, in denen die Versionskette aufgrund 
                von Löschungen innerhalb von Transaktionen gelöscht wird, die älter als die OAT (oldest active transaction) sind</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$RECORD_STATS -->

  <section id="fblangref-appx05-statements-de">
    <title>MON$STATEMENTS</title>
    <para>MON$STATEMENTS zeigt Statments an, die für die Ausführung vorbereitet wurden.</para>
    <informaltable id="fblangref25-appx05-tbl-statements-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$STATEMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statement-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Verbindungs-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaktions-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STATE	</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Statement-Status:
              <simplelist type="horiz" columns="1">
                <member>0 - Leerlauf (idle)</member>
                <member>1 - Aktiv</member>
                <member>2 - verzögert (stalled)</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">Der Zeitpunkt an dem das Statement vorbereitet wurde.</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$SQL_TEXT</database></entry>
            <entry align="center"><database>BLOB TEXT</database></entry>
            <entry align="left">Statement-Text in SQL</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>Der Status STALLED gibt an, dass das Statement zum Zeitpunkt des Snapshots einen offenen Cursor besaß und
        auf den Client wartet, der weitere Datensätze abruft.</para>
    <section id="fblangref-appx05-statements01">
      <title><database>MON$STATEMENTS</database> zum Stoppen einer Abfrage nutzen</title>
      <para>Monitoringtabellen können nur gelesen werden. Jedoch hat der Server einen eingebauten Mechanismus um 
          Datensätze in der Tabelle MON$STATEMENTS zu löschen (und nur zum Löschen), womit es möglich ist,
          laufende Abfragen zu stoppen.
        <note>
          <title>Hinweis</title>
          <itemizedlist>
            <listitem>Werden derzeit keine Abfragen in der Verbindung ausgeführt, so wird jeder Versuch eine Abfrage zu
                stoppen, nicht funktionieren.</listitem>
            <listitem>Nachdem eine Abfrage gestoppt wurde, werden Execute- und Fetch-Aufrufe der API
                den Fehlercode <function>isc_cancelled</function> zurückgeben.</listitem>
            <listitem>Nachfolgende Abfragen laufen normal weiter.</listitem>
          </itemizedlist>
        </note>
      </para>
      <formalpara>
        <title>Beispiel</title>
        <para>&nbsp;Stoppen aller aktiven Abfragen der angegebenen Verbindung
          <blockquote><programlisting>
DELETE FROM MON$STATEMENTS
  WHERE MON$ATTACHMENT_ID = 32
          </programlisting></blockquote>
        </para>
      </formalpara>
    </section>
  </section> <!-- MON$STATEMENTS -->

  <section id="fblangref-appx05-transacs-de">
    <title>MON$TRANSACTIONS</title>
    <para>MON$TRANSACTIONS gibt Auskunft über gestartete Transaktionen.</para>
    <informaltable id="fblangref25-appx05-tbl-transacs-de" frame="all" rowsep="1" colsep="1">
    <?dbfo keep-together='auto'?>
      <tgroup cols="3">
        <colspec colname="colColumn" colwidth="4*"></colspec>
        <colspec colname="colType" colwidth="3*"></colspec>
        <colspec colname="colDesc" colwidth="5*"></colspec>
        <thead>
          <row valign="middle">
            <entry align="center">Spaltenname</entry>
            <entry align="center">Datentyp</entry>
            <entry align="center">Beschreibung</entry>
          </row>
        </thead>
        <tbody>
          <row valign="middle">
            <entry align="left"><database>MON$TRANSACTION_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Transaktions-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ATTACHMENT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Verbindungs-Kennung</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database></database>MON$STATE</entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Transaktionsstatus:
              <simplelist type="horiz" columns="1">
                <member>0 - Leerlauf (idle)</member>
                <member>1 - Aktiv</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TIMESTAMP</database></entry>
            <entry align="center"><database>TIMESTAMP</database></entry>
            <entry align="left">Zeitpunkt an dem die Transaktion gestartet wurde</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$TOP_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Top-Level-Transaktionsnummer (Kennung)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_TRANSACTION</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Kennung der ältesten relevanten Transaktion (oldest [interesting] transaction (OIT))</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$OLDEST_ACTIVE</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Kennung der ältesten aktiven Transaktion (oldest active transaction (OAT))</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$ISOLATION_MODE</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Isolationsmoduls (Level):
              <simplelist type="horiz" columns="1">
                <member>0 - Konsistenz (Snapshot für Tabellenstabilität)</member>
                <member>1 - Konkurrierend (Snapshot)</member>
                <member>2 - Read Committed mit Datensatzversion</member>
                <member>3 - Read Committed ohne Datensatzversion</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$LOCK_TIMEOUT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Lock-Timeout:
              <simplelist type="horiz" columns="1">
                <member>-1 - warten (ewig)</member>
                <member>0 - nicht warten</member>
                <member>1 oder größer - Lock-Timeout in Sekunden</member>
              </simplelist>
            </entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$READ_ONLY</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Gibt an, ob die Transaktion nur-lesend (Wert 1)
            oder lesend-schreibend (Wert 0) läuft</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$AUTO_COMMIT</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Gibt an, ob automatisches Commit für die Transaktion verwendet wird (Wert 1) 
                oder nicht (Wert 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$AUTO_UNDO</database></entry>
            <entry align="center"><database>SMALLINT</database></entry>
            <entry align="left">Gibt an, ob der Logging-Mechanismus
            <emphasis>automatiches Undo</emphasis> für die Transaktion verwendet wird (Wert 1) 
                oder nicht (Wert 0)</entry>
          </row>
          <row valign="middle">
            <entry align="left"><database>MON$STAT_ID</database></entry>
            <entry align="center"><database>INTEGER</database></entry>
            <entry align="left">Statistik-Kennung</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section> <!-- MON$TRANSACTIONS -->

</appendix>
